2023-01-09 00:21:34.8831|INFO|Bank.API.Program|Initializing application...
2023-01-09 00:21:41.4849|ERROR|Bank.API.Program|An error occurred while migrating the database!
2023-01-09 00:21:41.7853|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\z004pj3h\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-01-09 00:21:43.1034|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:57658/ - -
2023-01-09 00:21:43.2670|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:57658/ - - - 404 0 - 170.9863ms
2023-01-09 00:22:24.2483|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:57658/api/accounts application/json 96
2023-01-09 00:22:24.2590|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.AccountsController.GetAccounts (Bank.API)'
2023-01-09 00:22:24.2974|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetAccounts", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAccounts() on controller Bank.API.Controllers.AccountsController (Bank.API).
2023-01-09 00:23:12.8048|INFO|Bank.API.Program|Initializing application...
2023-01-09 00:23:22.5371|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (59ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-09 00:23:22.6799|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2023-01-09 00:23:22.7253|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (32ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [AccountInfoDB];
2023-01-09 00:23:23.0867|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (271ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [AccountInfoDB];
2023-01-09 00:23:23.2309|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (141ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2023-01-09 00:23:23.2410|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-09 00:23:23.4306|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2023-01-09 00:23:23.4306|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-09 00:23:23.4837|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (36ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-01-09 00:23:23.4837|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-01-09 00:23:23.5357|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230105161435_AccountInfoDBInitialMigration'.
2023-01-09 00:23:23.6363|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Accounts] (
    [Id] int NOT NULL IDENTITY,
    [Owner] nvarchar(50) NOT NULL,
    [Sum] int NOT NULL,
    CONSTRAINT [PK_Accounts] PRIMARY KEY ([Id])
);
2023-01-09 00:23:23.6427|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Deposits] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [DepositSum] int NOT NULL,
    [AccountId] int NOT NULL,
    CONSTRAINT [PK_Deposits] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Deposits_Accounts_AccountId] FOREIGN KEY ([AccountId]) REFERENCES [Accounts] ([Id]) ON DELETE CASCADE
);
2023-01-09 00:23:23.6427|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Deposits_AccountId] ON [Deposits] ([AccountId]);
2023-01-09 00:23:23.6427|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230105161435_AccountInfoDBInitialMigration', N'7.0.1');
2023-01-09 00:23:23.6779|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230105162733_AccountInfoDBAddNumberOfDeposits'.
2023-01-09 00:23:23.6978|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD [NumberOfDeposits] int NOT NULL DEFAULT 0;
2023-01-09 00:23:23.6978|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230105162733_AccountInfoDBAddNumberOfDeposits', N'7.0.1');
2023-01-09 00:23:23.7055|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230105175606_SampleData'.
2023-01-09 00:23:23.8390|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (67ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'NumberOfDeposits', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] ON;
INSERT INTO [Accounts] ([Id], [NumberOfDeposits], [Owner], [Sum])
VALUES (1, 0, N'Gabor Andreea', 2500),
(2, 0, N'Pavel Carmen', 3200),
(3, 0, N'Wolf Lorena', 2800);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'NumberOfDeposits', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] OFF;
2023-01-09 00:23:23.8585|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (17ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] ON;
INSERT INTO [Deposits] ([Id], [AccountId], [DepositSum], [Name])
VALUES (1, 1, 2000, N'Savings Deposit'),
(2, 1, 500, N'Fixed Deposit'),
(3, 2, 2200, N'Fixed Deposit'),
(4, 2, 1000, N'Recurring Deposit'),
(5, 3, 1200, N'Savings Deposit'),
(6, 3, 1600, N'Current Deposit');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] OFF;
2023-01-09 00:23:23.8616|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230105175606_SampleData', N'7.0.1');
2023-01-09 00:23:24.1343|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\z004pj3h\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-01-09 00:23:25.5721|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:57658/ - -
2023-01-09 00:23:25.7482|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:57658/ - - - 404 0 - 181.6287ms
2023-01-09 00:23:49.3914|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:57658/api/accounts application/json 96
2023-01-09 00:23:49.3914|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.AccountsController.GetAccounts (Bank.API)'
2023-01-09 00:23:49.4388|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetAccounts", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAccounts() on controller Bank.API.Controllers.AccountsController (Bank.API).
2023-01-09 00:23:50.5349|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[NumberOfDeposits], [a].[Owner], [a].[Sum]
FROM [Accounts] AS [a]
ORDER BY [a].[Owner]
2023-01-09 00:23:50.6630|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Bank.API.Models.AccountWithoutDepositsDTO, Bank.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-01-09 00:23:50.8590|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.AccountsController.GetAccounts (Bank.API) in 1403.3901ms
2023-01-09 00:23:50.8590|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.AccountsController.GetAccounts (Bank.API)'
2023-01-09 00:23:50.8876|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:57658/api/accounts application/json 96 - 200 130 application/json;+charset=utf-8 1493.9917ms
2023-01-09 00:25:25.7162|INFO|Bank.API.Program|Initializing application...
2023-01-09 00:25:32.0699|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (70ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-09 00:25:32.4311|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (154ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2023-01-09 00:25:32.4825|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (48ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [AccountInfoDB];
2023-01-09 00:25:32.8860|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (240ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [AccountInfoDB];
2023-01-09 00:25:32.9935|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (103ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2023-01-09 00:25:33.0040|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-09 00:25:33.2284|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2023-01-09 00:25:33.2284|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-09 00:25:33.2997|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (49ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-01-09 00:25:33.3186|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-01-09 00:25:33.4173|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230105161435_AccountInfoDBInitialMigration'.
2023-01-09 00:25:33.5589|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Accounts] (
    [Id] int NOT NULL IDENTITY,
    [Owner] nvarchar(50) NOT NULL,
    [Sum] int NOT NULL,
    CONSTRAINT [PK_Accounts] PRIMARY KEY ([Id])
);
2023-01-09 00:25:33.5808|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (17ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Deposits] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [DepositSum] int NOT NULL,
    [AccountId] int NOT NULL,
    CONSTRAINT [PK_Deposits] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Deposits_Accounts_AccountId] FOREIGN KEY ([AccountId]) REFERENCES [Accounts] ([Id]) ON DELETE CASCADE
);
2023-01-09 00:25:33.6028|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Deposits_AccountId] ON [Deposits] ([AccountId]);
2023-01-09 00:25:33.6101|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230105161435_AccountInfoDBInitialMigration', N'7.0.1');
2023-01-09 00:25:33.6453|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230105162733_AccountInfoDBAddNumberOfDeposits'.
2023-01-09 00:25:33.6860|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD [NumberOfDeposits] int NOT NULL DEFAULT 0;
2023-01-09 00:25:33.6898|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230105162733_AccountInfoDBAddNumberOfDeposits', N'7.0.1');
2023-01-09 00:25:33.6898|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230105175606_SampleData'.
2023-01-09 00:25:33.8048|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (34ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'NumberOfDeposits', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] ON;
INSERT INTO [Accounts] ([Id], [NumberOfDeposits], [Owner], [Sum])
VALUES (1, 0, N'Gabor Andreea', 2500),
(2, 0, N'Pavel Carmen', 3200),
(3, 0, N'Wolf Lorena', 2800);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'NumberOfDeposits', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] OFF;
2023-01-09 00:25:33.8298|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] ON;
INSERT INTO [Deposits] ([Id], [AccountId], [DepositSum], [Name])
VALUES (1, 1, 2000, N'Savings Deposit'),
(2, 1, 500, N'Fixed Deposit'),
(3, 2, 2200, N'Fixed Deposit'),
(4, 2, 1000, N'Recurring Deposit'),
(5, 3, 1200, N'Savings Deposit'),
(6, 3, 1600, N'Current Deposit');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] OFF;
2023-01-09 00:25:33.8298|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230105175606_SampleData', N'7.0.1');
2023-01-09 00:25:34.1432|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\z004pj3h\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-01-09 00:25:36.2682|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:57658/ - -
2023-01-09 00:25:36.5752|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:57658/ - - - 404 0 - 190.0865ms
2023-01-09 00:27:35.2742|INFO|Bank.API.Program|Initializing application...
2023-01-09 00:27:42.4381|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (55ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-09 00:27:45.5842|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3,016ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2023-01-09 00:27:45.6475|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (61ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [AccountInfoDB];
2023-01-09 00:27:46.0120|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (288ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [AccountInfoDB];
2023-01-09 00:27:46.0972|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (83ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2023-01-09 00:27:46.0972|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-09 00:27:46.3111|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2023-01-09 00:27:46.3259|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-09 00:27:46.3734|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (37ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-01-09 00:27:46.3991|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-01-09 00:27:46.4433|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230105161435_AccountInfoDBInitialMigration'.
2023-01-09 00:27:46.5629|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Accounts] (
    [Id] int NOT NULL IDENTITY,
    [Owner] nvarchar(50) NOT NULL,
    [Sum] int NOT NULL,
    CONSTRAINT [PK_Accounts] PRIMARY KEY ([Id])
);
2023-01-09 00:27:46.5629|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Deposits] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [DepositSum] int NOT NULL,
    [AccountId] int NOT NULL,
    CONSTRAINT [PK_Deposits] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Deposits_Accounts_AccountId] FOREIGN KEY ([AccountId]) REFERENCES [Accounts] ([Id]) ON DELETE CASCADE
);
2023-01-09 00:27:46.5893|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Deposits_AccountId] ON [Deposits] ([AccountId]);
2023-01-09 00:27:46.5937|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230105161435_AccountInfoDBInitialMigration', N'7.0.1');
2023-01-09 00:27:46.6252|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230105162733_AccountInfoDBAddNumberOfDeposits'.
2023-01-09 00:27:46.6485|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD [NumberOfDeposits] int NOT NULL DEFAULT 0;
2023-01-09 00:27:46.6570|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230105162733_AccountInfoDBAddNumberOfDeposits', N'7.0.1');
2023-01-09 00:27:46.6570|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230105175606_SampleData'.
2023-01-09 00:27:46.7875|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (28ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'NumberOfDeposits', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] ON;
INSERT INTO [Accounts] ([Id], [NumberOfDeposits], [Owner], [Sum])
VALUES (1, 0, N'Gabor Andreea', 2500),
(2, 0, N'Pavel Carmen', 3200),
(3, 0, N'Wolf Lorena', 2800);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'NumberOfDeposits', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] OFF;
2023-01-09 00:27:46.8110|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] ON;
INSERT INTO [Deposits] ([Id], [AccountId], [DepositSum], [Name])
VALUES (1, 1, 2000, N'Savings Deposit'),
(2, 1, 500, N'Fixed Deposit'),
(3, 2, 2200, N'Fixed Deposit'),
(4, 2, 1000, N'Recurring Deposit'),
(5, 3, 1200, N'Savings Deposit'),
(6, 3, 1600, N'Current Deposit');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] OFF;
2023-01-09 00:27:46.8230|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230105175606_SampleData', N'7.0.1');
2023-01-09 00:27:46.8281|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230108222712_AccountInfoDBRemoveNumberOfDeposits'.
2023-01-09 00:27:46.9416|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (97ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Accounts]') AND [c].[name] = N'NumberOfDeposits');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [Accounts] DROP CONSTRAINT [' + @var0 + '];');
ALTER TABLE [Accounts] DROP COLUMN [NumberOfDeposits];
2023-01-09 00:27:46.9416|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230108222712_AccountInfoDBRemoveNumberOfDeposits', N'7.0.1');
2023-01-09 00:27:47.2178|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\z004pj3h\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-01-09 00:27:48.5299|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:57658/ - -
2023-01-09 00:27:48.7162|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:57658/ - - - 404 0 - 203.5127ms
2023-01-09 00:28:19.5241|INFO|Bank.API.Program|Initializing application...
2023-01-09 00:49:24.2970|INFO|Bank.API.Program|Initializing application...
2023-01-09 00:49:33.3011|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (55ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-09 00:49:33.4954|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2023-01-09 00:49:33.5585|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (59ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [AccountInfoDB];
2023-01-09 00:49:33.9594|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (282ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [AccountInfoDB];
2023-01-09 00:49:34.0436|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (81ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2023-01-09 00:49:34.0527|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-09 00:49:34.2368|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2023-01-09 00:49:34.2575|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-09 00:49:34.3723|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (65ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-01-09 00:49:34.4933|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (52ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-01-09 00:49:34.5618|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230105161435_AccountInfoDBInitialMigration'.
2023-01-09 00:49:34.7227|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Accounts] (
    [Id] int NOT NULL IDENTITY,
    [Owner] nvarchar(50) NOT NULL,
    [Sum] int NOT NULL,
    CONSTRAINT [PK_Accounts] PRIMARY KEY ([Id])
);
2023-01-09 00:49:34.7451|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Deposits] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [DepositSum] int NOT NULL,
    [AccountId] int NOT NULL,
    CONSTRAINT [PK_Deposits] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Deposits_Accounts_AccountId] FOREIGN KEY ([AccountId]) REFERENCES [Accounts] ([Id]) ON DELETE CASCADE
);
2023-01-09 00:49:34.7669|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (17ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Deposits_AccountId] ON [Deposits] ([AccountId]);
2023-01-09 00:49:34.7751|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230105161435_AccountInfoDBInitialMigration', N'7.0.1');
2023-01-09 00:49:34.7983|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230105162733_AccountInfoDBAddNumberOfDeposits'.
2023-01-09 00:49:34.8279|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD [NumberOfDeposits] int NOT NULL DEFAULT 0;
2023-01-09 00:49:34.8279|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230105162733_AccountInfoDBAddNumberOfDeposits', N'7.0.1');
2023-01-09 00:49:34.8389|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230105175606_SampleData'.
2023-01-09 00:49:34.9639|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (30ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'NumberOfDeposits', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] ON;
INSERT INTO [Accounts] ([Id], [NumberOfDeposits], [Owner], [Sum])
VALUES (1, 0, N'Gabor Andreea', 2500),
(2, 0, N'Pavel Carmen', 3200),
(3, 0, N'Wolf Lorena', 2800);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'NumberOfDeposits', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] OFF;
2023-01-09 00:49:35.0320|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (37ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] ON;
INSERT INTO [Deposits] ([Id], [AccountId], [DepositSum], [Name])
VALUES (1, 1, 2000, N'Savings Deposit'),
(2, 1, 500, N'Fixed Deposit'),
(3, 2, 2200, N'Fixed Deposit'),
(4, 2, 1000, N'Recurring Deposit'),
(5, 3, 1200, N'Savings Deposit'),
(6, 3, 1600, N'Current Deposit');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] OFF;
2023-01-09 00:49:35.0963|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (40ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230105175606_SampleData', N'7.0.1');
2023-01-09 00:49:35.1377|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230108222712_AccountInfoDBRemoveNumberOfDeposits'.
2023-01-09 00:49:35.2393|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (53ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Accounts]') AND [c].[name] = N'NumberOfDeposits');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [Accounts] DROP CONSTRAINT [' + @var0 + '];');
ALTER TABLE [Accounts] DROP COLUMN [NumberOfDeposits];
2023-01-09 00:49:35.2619|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230108222712_AccountInfoDBRemoveNumberOfDeposits', N'7.0.1');
2023-01-09 00:49:35.9404|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\z004pj3h\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-01-09 00:49:38.8319|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:57658/ - -
2023-01-09 00:49:39.5971|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:57658/ - - - 404 0 - 564.2268ms
2023-01-09 00:50:21.8815|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:57658/api/accounts application/json 96
2023-01-09 00:50:21.9096|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.AccountsController.GetAccounts (Bank.API)'
2023-01-09 00:50:21.9917|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetAccounts", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAccounts() on controller Bank.API.Controllers.AccountsController (Bank.API).
2023-01-09 00:50:23.3903|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[Owner], [a].[Sum]
FROM [Accounts] AS [a]
ORDER BY [a].[Owner]
2023-01-09 00:50:23.5090|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Bank.API.Services.AccountWithoutDepositsDTO, Bank.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-01-09 00:50:23.7585|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.AccountsController.GetAccounts (Bank.API) in 1744.5279ms
2023-01-09 00:50:23.7847|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.AccountsController.GetAccounts (Bank.API)'
2023-01-09 00:50:23.8136|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:57658/api/accounts application/json 96 - 200 130 application/json;+charset=utf-8 1932.7913ms
2023-01-09 00:50:32.6553|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:57658/api/accounts/2 application/json 96
2023-01-09 00:50:32.6616|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.AccountsController.GetAccount (Bank.API)'
2023-01-09 00:50:32.6847|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetAccount", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAccount(Int32, Boolean) on controller Bank.API.Controllers.AccountsController (Bank.API).
2023-01-09 00:50:32.9670|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (112ms) [Parameters=[@__accountId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Owner], [a].[Sum]
FROM [Accounts] AS [a]
WHERE [a].[Id] = @__accountId_0
2023-01-09 00:50:32.9739|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing OkObjectResult, writing value of type 'Bank.API.Services.AccountWithoutDepositsDTO'.
2023-01-09 00:50:32.9739|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.AccountsController.GetAccount (Bank.API) in 289.777ms
2023-01-09 00:50:32.9739|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.AccountsController.GetAccount (Bank.API)'
2023-01-09 00:50:32.9874|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:57658/api/accounts/2 application/json 96 - 200 42 application/json;+charset=utf-8 330.6854ms
2023-01-09 11:06:32.0967|INFO|Bank.API.Program|Initializing application...
2023-01-09 11:06:43.9394|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (62ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-09 11:06:44.2694|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (72ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2023-01-09 11:06:44.2962|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [AccountInfoDB];
2023-01-09 11:06:44.7311|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (308ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [AccountInfoDB];
2023-01-09 11:06:44.8302|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (96ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2023-01-09 11:06:44.8508|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-09 11:06:45.1439|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2023-01-09 11:06:45.1439|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-09 11:06:45.2395|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (68ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-01-09 11:06:45.2662|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-01-09 11:06:45.3273|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230105161435_AccountInfoDBInitialMigration'.
2023-01-09 11:06:45.4636|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Accounts] (
    [Id] int NOT NULL IDENTITY,
    [Owner] nvarchar(50) NOT NULL,
    [Sum] int NOT NULL,
    CONSTRAINT [PK_Accounts] PRIMARY KEY ([Id])
);
2023-01-09 11:06:45.4714|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Deposits] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [DepositSum] int NOT NULL,
    [AccountId] int NOT NULL,
    CONSTRAINT [PK_Deposits] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Deposits_Accounts_AccountId] FOREIGN KEY ([AccountId]) REFERENCES [Accounts] ([Id]) ON DELETE CASCADE
);
2023-01-09 11:06:45.4714|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Deposits_AccountId] ON [Deposits] ([AccountId]);
2023-01-09 11:06:45.4714|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230105161435_AccountInfoDBInitialMigration', N'7.0.1');
2023-01-09 11:06:45.5108|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230105162733_AccountInfoDBAddNumberOfDeposits'.
2023-01-09 11:06:45.5360|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD [NumberOfDeposits] int NOT NULL DEFAULT 0;
2023-01-09 11:06:45.5360|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230105162733_AccountInfoDBAddNumberOfDeposits', N'7.0.1');
2023-01-09 11:06:45.5360|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230105175606_SampleData'.
2023-01-09 11:06:45.7249|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (63ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'NumberOfDeposits', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] ON;
INSERT INTO [Accounts] ([Id], [NumberOfDeposits], [Owner], [Sum])
VALUES (1, 0, N'Gabor Andreea', 2500),
(2, 0, N'Pavel Carmen', 3200),
(3, 0, N'Wolf Lorena', 2800);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'NumberOfDeposits', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] OFF;
2023-01-09 11:06:45.7501|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] ON;
INSERT INTO [Deposits] ([Id], [AccountId], [DepositSum], [Name])
VALUES (1, 1, 2000, N'Savings Deposit'),
(2, 1, 500, N'Fixed Deposit'),
(3, 2, 2200, N'Fixed Deposit'),
(4, 2, 1000, N'Recurring Deposit'),
(5, 3, 1200, N'Savings Deposit'),
(6, 3, 1600, N'Current Deposit');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] OFF;
2023-01-09 11:06:45.7545|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230105175606_SampleData', N'7.0.1');
2023-01-09 11:06:45.7545|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230108222712_AccountInfoDBRemoveNumberOfDeposits'.
2023-01-09 11:06:45.9918|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (213ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Accounts]') AND [c].[name] = N'NumberOfDeposits');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [Accounts] DROP CONSTRAINT [' + @var0 + '];');
ALTER TABLE [Accounts] DROP COLUMN [NumberOfDeposits];
2023-01-09 11:06:46.0077|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230108222712_AccountInfoDBRemoveNumberOfDeposits', N'7.0.1');
2023-01-09 11:06:46.4686|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\z004pj3h\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-01-09 11:06:48.4623|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:57658/ - -
2023-01-09 11:06:48.7175|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:57658/ - - - 404 0 - 233.2152ms
2023-01-09 11:09:42.2713|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 DELETE https://localhost:57658/api/accounts/2 application/json 96
2023-01-09 11:09:42.3317|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.AccountsController.DeleteAccount (Bank.API)'
2023-01-09 11:09:42.4344|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "DeleteAccount", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteAccount(Int32) on controller Bank.API.Controllers.AccountsController (Bank.API).
2023-01-09 11:09:44.8488|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (241ms) [Parameters=[@__accountId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Accounts] AS [a]
        WHERE [a].[Id] = @__accountId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-01-09 11:09:45.0107|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__accountId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Owner], [a].[Sum]
FROM [Accounts] AS [a]
WHERE [a].[Id] = @__accountId_0
2023-01-09 11:09:45.5449|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Accounts]
OUTPUT 1
WHERE [Id] = @p0;
2023-01-09 11:09:45.6091|INFO|Microsoft.AspNetCore.Mvc.StatusCodeResult|Executing StatusCodeResult, setting HTTP status code 204
2023-01-09 11:09:45.6378|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.AccountsController.DeleteAccount (Bank.API) in 3175.529ms
2023-01-09 11:09:45.6436|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.AccountsController.DeleteAccount (Bank.API)'
2023-01-09 11:09:45.6827|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 DELETE https://localhost:57658/api/accounts/2 application/json 96 - 204 - - 3411.5310ms
2023-01-09 11:10:23.6502|INFO|Bank.API.Program|Initializing application...
2023-01-09 11:10:32.7949|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (100ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-09 11:10:36.0562|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3,024ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2023-01-09 11:10:36.1068|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (47ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [AccountInfoDB];
2023-01-09 11:10:36.5640|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (325ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [AccountInfoDB];
2023-01-09 11:10:36.6874|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (100ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2023-01-09 11:10:36.7178|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-09 11:10:37.0446|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (36ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2023-01-09 11:10:37.0499|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-09 11:10:37.1114|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (46ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-01-09 11:10:37.1332|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-01-09 11:10:37.2051|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230105161435_AccountInfoDBInitialMigration'.
2023-01-09 11:10:37.3557|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Accounts] (
    [Id] int NOT NULL IDENTITY,
    [Owner] nvarchar(50) NOT NULL,
    [Sum] int NOT NULL,
    CONSTRAINT [PK_Accounts] PRIMARY KEY ([Id])
);
2023-01-09 11:10:37.3742|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (14ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Deposits] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [DepositSum] int NOT NULL,
    [AccountId] int NOT NULL,
    CONSTRAINT [PK_Deposits] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Deposits_Accounts_AccountId] FOREIGN KEY ([AccountId]) REFERENCES [Accounts] ([Id]) ON DELETE CASCADE
);
2023-01-09 11:10:37.3787|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Deposits_AccountId] ON [Deposits] ([AccountId]);
2023-01-09 11:10:37.3787|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230105161435_AccountInfoDBInitialMigration', N'7.0.1');
2023-01-09 11:10:37.4296|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230105162733_AccountInfoDBAddNumberOfDeposits'.
2023-01-09 11:10:37.5008|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD [NumberOfDeposits] int NOT NULL DEFAULT 0;
2023-01-09 11:10:37.5172|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230105162733_AccountInfoDBAddNumberOfDeposits', N'7.0.1');
2023-01-09 11:10:37.5266|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230105175606_SampleData'.
2023-01-09 11:10:37.7279|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (68ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'NumberOfDeposits', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] ON;
INSERT INTO [Accounts] ([Id], [NumberOfDeposits], [Owner], [Sum])
VALUES (1, 0, N'Gabor Andreea', 2500),
(2, 0, N'Pavel Carmen', 3200),
(3, 0, N'Wolf Lorena', 2800);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'NumberOfDeposits', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] OFF;
2023-01-09 11:10:37.7637|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (32ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] ON;
INSERT INTO [Deposits] ([Id], [AccountId], [DepositSum], [Name])
VALUES (1, 1, 2000, N'Savings Deposit'),
(2, 1, 500, N'Fixed Deposit'),
(3, 2, 2200, N'Fixed Deposit'),
(4, 2, 1000, N'Recurring Deposit'),
(5, 3, 1200, N'Savings Deposit'),
(6, 3, 1600, N'Current Deposit');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] OFF;
2023-01-09 11:10:37.7637|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230105175606_SampleData', N'7.0.1');
2023-01-09 11:10:37.7781|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230108222712_AccountInfoDBRemoveNumberOfDeposits'.
2023-01-09 11:10:37.9984|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (188ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Accounts]') AND [c].[name] = N'NumberOfDeposits');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [Accounts] DROP CONSTRAINT [' + @var0 + '];');
ALTER TABLE [Accounts] DROP COLUMN [NumberOfDeposits];
2023-01-09 11:10:37.9984|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230108222712_AccountInfoDBRemoveNumberOfDeposits', N'7.0.1');
2023-01-09 11:10:38.3623|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\z004pj3h\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-01-09 11:10:41.1913|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:57658/ - -
2023-01-09 11:10:41.4888|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:57658/ - - - 404 0 - 249.3016ms
2023-01-09 11:11:16.4510|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:57658/api/accounts application/json 96
2023-01-09 11:11:16.4703|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.AccountsController.GetAccounts (Bank.API)'
2023-01-09 11:11:16.5561|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetAccounts", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAccounts() on controller Bank.API.Controllers.AccountsController (Bank.API).
2023-01-09 11:11:18.8002|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[Owner], [a].[Sum]
FROM [Accounts] AS [a]
ORDER BY [a].[Owner]
2023-01-09 11:11:19.0639|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Bank.API.Services.AccountWithoutDepositsDTO, Bank.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-01-09 11:11:19.6286|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.AccountsController.GetAccounts (Bank.API) in 3011.6522ms
2023-01-09 11:11:19.6572|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.AccountsController.GetAccounts (Bank.API)'
2023-01-09 11:11:19.8403|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:57658/api/accounts application/json 96 - 200 130 application/json;+charset=utf-8 3234.9711ms
2023-01-09 11:11:54.7773|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 POST https://localhost:57658/api/accounts application/json 62
2023-01-09 11:11:54.7863|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.AccountsController.CreateAccount (Bank.API)'
2023-01-09 11:11:54.8523|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "CreateAccount", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult CreateAccount(Bank.API.Services.AccountCreationDTO) on controller Bank.API.Controllers.AccountsController (Bank.API).
2023-01-09 11:11:56.1666|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (312ms) [Parameters=[@p0='?' (Size = 50), @p1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Accounts] ([Owner], [Sum])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2023-01-09 11:11:56.6675|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing CreatedAtRouteResult, writing value of type 'Bank.API.Services.AccountDTO'.
2023-01-09 11:11:56.8954|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.AccountsController.CreateAccount (Bank.API) in 1921.3913ms
2023-01-09 11:11:56.9726|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.AccountsController.CreateAccount (Bank.API)'
2023-01-09 11:11:57.0042|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 POST https://localhost:57658/api/accounts application/json 62 - 201 75 application/json;+charset=utf-8 2199.5583ms
2023-01-09 11:12:17.1402|INFO|Bank.API.Program|Initializing application...
2023-01-09 11:12:24.5760|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (95ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-09 11:12:28.1779|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3,023ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2023-01-09 11:12:28.2681|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (85ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [AccountInfoDB];
2023-01-09 11:12:28.9095|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (419ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [AccountInfoDB];
2023-01-09 11:12:29.0390|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (125ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2023-01-09 11:12:29.0390|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-09 11:12:29.4318|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (32ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2023-01-09 11:12:29.4485|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-09 11:12:29.5491|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (80ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-01-09 11:12:29.5794|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (12ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-01-09 11:12:29.6803|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230105161435_AccountInfoDBInitialMigration'.
2023-01-09 11:12:29.8661|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (14ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Accounts] (
    [Id] int NOT NULL IDENTITY,
    [Owner] nvarchar(50) NOT NULL,
    [Sum] int NOT NULL,
    CONSTRAINT [PK_Accounts] PRIMARY KEY ([Id])
);
2023-01-09 11:12:29.9048|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (33ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Deposits] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [DepositSum] int NOT NULL,
    [AccountId] int NOT NULL,
    CONSTRAINT [PK_Deposits] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Deposits_Accounts_AccountId] FOREIGN KEY ([AccountId]) REFERENCES [Accounts] ([Id]) ON DELETE CASCADE
);
2023-01-09 11:12:29.9121|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Deposits_AccountId] ON [Deposits] ([AccountId]);
2023-01-09 11:12:29.9121|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230105161435_AccountInfoDBInitialMigration', N'7.0.1');
2023-01-09 11:12:29.9673|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230105162733_AccountInfoDBAddNumberOfDeposits'.
2023-01-09 11:12:30.0013|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD [NumberOfDeposits] int NOT NULL DEFAULT 0;
2023-01-09 11:12:30.0096|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230105162733_AccountInfoDBAddNumberOfDeposits', N'7.0.1');
2023-01-09 11:12:30.0096|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230105175606_SampleData'.
2023-01-09 11:12:30.2214|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (52ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'NumberOfDeposits', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] ON;
INSERT INTO [Accounts] ([Id], [NumberOfDeposits], [Owner], [Sum])
VALUES (1, 0, N'Gabor Andreea', 2500),
(2, 0, N'Pavel Carmen', 3200),
(3, 0, N'Wolf Lorena', 2800);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'NumberOfDeposits', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] OFF;
2023-01-09 11:12:30.2540|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (28ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] ON;
INSERT INTO [Deposits] ([Id], [AccountId], [DepositSum], [Name])
VALUES (1, 1, 2000, N'Savings Deposit'),
(2, 1, 500, N'Fixed Deposit'),
(3, 2, 2200, N'Fixed Deposit'),
(4, 2, 1000, N'Recurring Deposit'),
(5, 3, 1200, N'Savings Deposit'),
(6, 3, 1600, N'Current Deposit');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] OFF;
2023-01-09 11:12:30.2540|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230105175606_SampleData', N'7.0.1');
2023-01-09 11:12:30.2540|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230108222712_AccountInfoDBRemoveNumberOfDeposits'.
2023-01-09 11:12:30.4361|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (146ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Accounts]') AND [c].[name] = N'NumberOfDeposits');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [Accounts] DROP CONSTRAINT [' + @var0 + '];');
ALTER TABLE [Accounts] DROP COLUMN [NumberOfDeposits];
2023-01-09 11:12:30.4404|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230108222712_AccountInfoDBRemoveNumberOfDeposits', N'7.0.1');
2023-01-09 11:12:31.0836|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\z004pj3h\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-01-09 11:12:33.2359|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:57658/ - -
2023-01-09 11:12:33.6229|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:57658/ - - - 404 0 - 384.1171ms
2023-01-09 12:11:14.9773|INFO|Bank.API.Program|Initializing application...
2023-01-09 12:11:24.5535|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (80ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-09 12:11:24.8200|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (73ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2023-01-09 12:11:24.8471|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [AccountInfoDB];
2023-01-09 12:11:25.2580|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (298ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [AccountInfoDB];
2023-01-09 12:11:25.3582|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (96ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2023-01-09 12:11:25.3687|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-09 12:11:25.6211|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2023-01-09 12:11:25.6211|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-09 12:11:25.7037|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (56ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-01-09 12:11:25.7218|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-01-09 12:11:25.8177|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230105161435_AccountInfoDBInitialMigration'.
2023-01-09 12:11:25.9154|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Accounts] (
    [Id] int NOT NULL IDENTITY,
    [Owner] nvarchar(50) NOT NULL,
    [Sum] int NOT NULL,
    CONSTRAINT [PK_Accounts] PRIMARY KEY ([Id])
);
2023-01-09 12:11:25.9331|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (13ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Deposits] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [DepositSum] int NOT NULL,
    [AccountId] int NOT NULL,
    CONSTRAINT [PK_Deposits] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Deposits_Accounts_AccountId] FOREIGN KEY ([AccountId]) REFERENCES [Accounts] ([Id]) ON DELETE CASCADE
);
2023-01-09 12:11:25.9331|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Deposits_AccountId] ON [Deposits] ([AccountId]);
2023-01-09 12:11:25.9448|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230105161435_AccountInfoDBInitialMigration', N'7.0.1');
2023-01-09 12:11:26.0439|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230105162733_AccountInfoDBAddNumberOfDeposits'.
2023-01-09 12:11:26.0998|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD [NumberOfDeposits] int NOT NULL DEFAULT 0;
2023-01-09 12:11:26.1298|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230105162733_AccountInfoDBAddNumberOfDeposits', N'7.0.1');
2023-01-09 12:11:26.1829|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230105175606_SampleData'.
2023-01-09 12:11:26.3544|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (57ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'NumberOfDeposits', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] ON;
INSERT INTO [Accounts] ([Id], [NumberOfDeposits], [Owner], [Sum])
VALUES (1, 0, N'Gabor Andreea', 2500),
(2, 0, N'Pavel Carmen', 3200),
(3, 0, N'Wolf Lorena', 2800);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'NumberOfDeposits', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] OFF;
2023-01-09 12:11:26.3769|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] ON;
INSERT INTO [Deposits] ([Id], [AccountId], [DepositSum], [Name])
VALUES (1, 1, 2000, N'Savings Deposit'),
(2, 1, 500, N'Fixed Deposit'),
(3, 2, 2200, N'Fixed Deposit'),
(4, 2, 1000, N'Recurring Deposit'),
(5, 3, 1200, N'Savings Deposit'),
(6, 3, 1600, N'Current Deposit');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] OFF;
2023-01-09 12:11:26.3814|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230105175606_SampleData', N'7.0.1');
2023-01-09 12:11:26.3814|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230108222712_AccountInfoDBRemoveNumberOfDeposits'.
2023-01-09 12:11:26.6445|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (224ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Accounts]') AND [c].[name] = N'NumberOfDeposits');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [Accounts] DROP CONSTRAINT [' + @var0 + '];');
ALTER TABLE [Accounts] DROP COLUMN [NumberOfDeposits];
2023-01-09 12:11:26.6743|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (18ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230108222712_AccountInfoDBRemoveNumberOfDeposits', N'7.0.1');
2023-01-09 12:11:27.0195|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\z004pj3h\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-01-09 12:11:28.4338|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:57658/ - -
2023-01-09 12:11:28.6603|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:57658/ - - - 404 0 - 184.6797ms
2023-01-09 12:11:51.8697|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:57658/api/accounts application/json 62
2023-01-09 12:11:51.8697|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.AccountsController.GetAccounts (Bank.API)'
2023-01-09 12:11:51.9172|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetAccounts", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAccounts() on controller Bank.API.Controllers.AccountsController (Bank.API).
2023-01-09 12:11:53.0419|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[Owner], [a].[Sum]
FROM [Accounts] AS [a]
ORDER BY [a].[Owner]
2023-01-09 12:11:53.1604|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Bank.API.Services.Models.AccountWithoutDepositsDTO, Bank.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-01-09 12:11:53.4035|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.AccountsController.GetAccounts (Bank.API) in 1453.7458ms
2023-01-09 12:11:53.4242|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.AccountsController.GetAccounts (Bank.API)'
2023-01-09 12:11:53.4543|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:57658/api/accounts application/json 62 - 200 130 application/json;+charset=utf-8 1580.6514ms
2023-01-09 12:12:08.4519|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 POST https://localhost:57658/api/accounts application/json 62
2023-01-09 12:12:08.4519|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.AccountsController.CreateAccount (Bank.API)'
2023-01-09 12:12:08.4734|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "CreateAccount", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult CreateAccount(Bank.API.Services.Models.AccountCreationDTO) on controller Bank.API.Controllers.AccountsController (Bank.API).
2023-01-09 12:12:09.0494|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (153ms) [Parameters=[@p0='?' (Size = 50), @p1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Accounts] ([Owner], [Sum])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2023-01-09 12:12:09.1095|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing CreatedAtRouteResult, writing value of type 'Bank.API.Services.Models.AccountDTO'.
2023-01-09 12:12:09.1617|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.AccountsController.CreateAccount (Bank.API) in 685.2939ms
2023-01-09 12:12:09.1617|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.AccountsController.CreateAccount (Bank.API)'
2023-01-09 12:12:09.1617|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 POST https://localhost:57658/api/accounts application/json 62 - 201 75 application/json;+charset=utf-8 719.4475ms
2023-01-09 12:12:24.3738|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:57658/api/accounts application/json 62
2023-01-09 12:12:24.3822|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.AccountsController.GetAccounts (Bank.API)'
2023-01-09 12:12:24.3822|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetAccounts", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAccounts() on controller Bank.API.Controllers.AccountsController (Bank.API).
2023-01-09 12:12:24.3987|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[Owner], [a].[Sum]
FROM [Accounts] AS [a]
ORDER BY [a].[Owner]
2023-01-09 12:12:24.3987|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Bank.API.Services.Models.AccountWithoutDepositsDTO, Bank.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-01-09 12:12:24.3987|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.AccountsController.GetAccounts (Bank.API) in 16.9325ms
2023-01-09 12:12:24.3987|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.AccountsController.GetAccounts (Bank.API)'
2023-01-09 12:12:24.4263|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:57658/api/accounts application/json 62 - 200 171 application/json;+charset=utf-8 38.1561ms
2023-01-09 13:10:46.8168|INFO|Bank.API.Program|Initializing application...
2023-01-09 13:23:08.2878|INFO|Bank.API.Program|Initializing application...
2023-01-09 13:23:21.1271|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (58ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-09 13:23:21.4710|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (107ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2023-01-09 13:23:21.5330|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (52ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [AccountInfoDB];
2023-01-09 13:23:22.0627|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (429ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [AccountInfoDB];
2023-01-09 13:23:22.1897|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (124ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2023-01-09 13:23:22.2224|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-09 13:23:22.4427|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2023-01-09 13:23:22.4427|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-09 13:23:22.5171|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (51ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-01-09 13:23:22.5494|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (14ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-01-09 13:23:22.6157|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230105161435_AccountInfoDBInitialMigration'.
2023-01-09 13:23:22.7232|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Accounts] (
    [Id] int NOT NULL IDENTITY,
    [Owner] nvarchar(50) NOT NULL,
    [Sum] int NOT NULL,
    CONSTRAINT [PK_Accounts] PRIMARY KEY ([Id])
);
2023-01-09 13:23:22.7343|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Deposits] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [DepositSum] int NOT NULL,
    [AccountId] int NOT NULL,
    CONSTRAINT [PK_Deposits] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Deposits_Accounts_AccountId] FOREIGN KEY ([AccountId]) REFERENCES [Accounts] ([Id]) ON DELETE CASCADE
);
2023-01-09 13:23:22.7343|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Deposits_AccountId] ON [Deposits] ([AccountId]);
2023-01-09 13:23:22.7459|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230105161435_AccountInfoDBInitialMigration', N'7.0.1');
2023-01-09 13:23:22.7718|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230105162733_AccountInfoDBAddNumberOfDeposits'.
2023-01-09 13:23:22.7947|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD [NumberOfDeposits] int NOT NULL DEFAULT 0;
2023-01-09 13:23:22.8133|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230105162733_AccountInfoDBAddNumberOfDeposits', N'7.0.1');
2023-01-09 13:23:22.8495|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230105175606_SampleData'.
2023-01-09 13:23:23.3353|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (279ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'NumberOfDeposits', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] ON;
INSERT INTO [Accounts] ([Id], [NumberOfDeposits], [Owner], [Sum])
VALUES (1, 0, N'Gabor Andreea', 2500),
(2, 0, N'Pavel Carmen', 3200),
(3, 0, N'Wolf Lorena', 2800);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'NumberOfDeposits', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] OFF;
2023-01-09 13:23:23.4026|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (53ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] ON;
INSERT INTO [Deposits] ([Id], [AccountId], [DepositSum], [Name])
VALUES (1, 1, 2000, N'Savings Deposit'),
(2, 1, 500, N'Fixed Deposit'),
(3, 2, 2200, N'Fixed Deposit'),
(4, 2, 1000, N'Recurring Deposit'),
(5, 3, 1200, N'Savings Deposit'),
(6, 3, 1600, N'Current Deposit');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] OFF;
2023-01-09 13:23:23.4586|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230105175606_SampleData', N'7.0.1');
2023-01-09 13:23:23.4832|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230108222712_AccountInfoDBRemoveNumberOfDeposits'.
2023-01-09 13:23:23.7767|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (238ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Accounts]') AND [c].[name] = N'NumberOfDeposits');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [Accounts] DROP CONSTRAINT [' + @var0 + '];');
ALTER TABLE [Accounts] DROP COLUMN [NumberOfDeposits];
2023-01-09 13:23:23.7767|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230108222712_AccountInfoDBRemoveNumberOfDeposits', N'7.0.1');
2023-01-09 13:23:24.6310|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\z004pj3h\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-01-09 13:23:26.3472|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:57658/ - -
2023-01-09 13:23:26.7362|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:57658/ - - - 404 0 - 444.3539ms
2023-01-09 14:38:38.8325|INFO|Bank.API.Program|Initializing application...
2023-01-09 14:38:47.8405|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (53ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-09 14:38:47.9845|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2023-01-09 14:38:48.0200|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (32ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [AccountInfoDB];
2023-01-09 14:38:48.5005|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (392ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [AccountInfoDB];
2023-01-09 14:38:48.5820|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (71ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2023-01-09 14:38:48.5921|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-09 14:38:48.7902|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2023-01-09 14:38:48.7902|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-09 14:38:48.8488|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (38ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-01-09 14:38:48.8788|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (14ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-01-09 14:38:48.9277|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230105161435_AccountInfoDBInitialMigration'.
2023-01-09 14:38:49.0170|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Accounts] (
    [Id] int NOT NULL IDENTITY,
    [Owner] nvarchar(50) NOT NULL,
    [Sum] int NOT NULL,
    CONSTRAINT [PK_Accounts] PRIMARY KEY ([Id])
);
2023-01-09 14:38:49.0170|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Deposits] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [DepositSum] int NOT NULL,
    [AccountId] int NOT NULL,
    CONSTRAINT [PK_Deposits] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Deposits_Accounts_AccountId] FOREIGN KEY ([AccountId]) REFERENCES [Accounts] ([Id]) ON DELETE CASCADE
);
2023-01-09 14:38:49.0282|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Deposits_AccountId] ON [Deposits] ([AccountId]);
2023-01-09 14:38:49.0282|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230105161435_AccountInfoDBInitialMigration', N'7.0.1');
2023-01-09 14:38:49.0623|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230105162733_AccountInfoDBAddNumberOfDeposits'.
2023-01-09 14:38:49.1068|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD [NumberOfDeposits] int NOT NULL DEFAULT 0;
2023-01-09 14:38:49.1068|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230105162733_AccountInfoDBAddNumberOfDeposits', N'7.0.1');
2023-01-09 14:38:49.1068|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230105175606_SampleData'.
2023-01-09 14:38:49.2138|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (37ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'NumberOfDeposits', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] ON;
INSERT INTO [Accounts] ([Id], [NumberOfDeposits], [Owner], [Sum])
VALUES (1, 0, N'Gabor Andreea', 2500),
(2, 0, N'Pavel Carmen', 3200),
(3, 0, N'Wolf Lorena', 2800);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'NumberOfDeposits', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] OFF;
2023-01-09 14:38:49.2433|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (26ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] ON;
INSERT INTO [Deposits] ([Id], [AccountId], [DepositSum], [Name])
VALUES (1, 1, 2000, N'Savings Deposit'),
(2, 1, 500, N'Fixed Deposit'),
(3, 2, 2200, N'Fixed Deposit'),
(4, 2, 1000, N'Recurring Deposit'),
(5, 3, 1200, N'Savings Deposit'),
(6, 3, 1600, N'Current Deposit');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] OFF;
2023-01-09 14:38:49.2433|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230105175606_SampleData', N'7.0.1');
2023-01-09 14:38:49.2433|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230108222712_AccountInfoDBRemoveNumberOfDeposits'.
2023-01-09 14:38:49.3685|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (100ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Accounts]') AND [c].[name] = N'NumberOfDeposits');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [Accounts] DROP CONSTRAINT [' + @var0 + '];');
ALTER TABLE [Accounts] DROP COLUMN [NumberOfDeposits];
2023-01-09 14:38:49.3685|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230108222712_AccountInfoDBRemoveNumberOfDeposits', N'7.0.1');
2023-01-09 14:38:49.7462|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\z004pj3h\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-01-09 14:38:51.1148|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:57658/ - -
2023-01-09 14:38:51.2667|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:57658/ - - - 404 0 - 165.6984ms
2023-01-09 14:39:11.3466|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:57658/api/accounts application/json 62
2023-01-09 14:39:11.3535|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.AccountsController.GetAccounts (Bank.API)'
2023-01-09 14:39:11.3894|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetAccounts", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAccounts() on controller Bank.API.Controllers.AccountsController (Bank.API).
2023-01-09 14:39:12.4642|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[Owner], [a].[Sum]
FROM [Accounts] AS [a]
ORDER BY [a].[Owner]
2023-01-09 14:39:12.5889|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Bank.API.Services.Models.AccountWithoutDepositsDTO, Bank.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-01-09 14:39:12.8675|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.AccountsController.GetAccounts (Bank.API) in 1457.7696ms
2023-01-09 14:39:12.8675|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.AccountsController.GetAccounts (Bank.API)'
2023-01-09 14:39:12.9399|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:57658/api/accounts application/json 62 - 200 130 application/json;+charset=utf-8 1557.9921ms
2023-01-09 14:39:23.0755|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:57658/api/accounts application/json 63
2023-01-09 14:39:23.0755|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.AccountsController.GetAccounts (Bank.API)'
2023-01-09 14:39:23.0923|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetAccounts", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAccounts() on controller Bank.API.Controllers.AccountsController (Bank.API).
2023-01-09 14:39:23.1845|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[Owner], [a].[Sum]
FROM [Accounts] AS [a]
ORDER BY [a].[Owner]
2023-01-09 14:39:23.1845|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Bank.API.Services.Models.AccountWithoutDepositsDTO, Bank.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-01-09 14:39:23.2549|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.AccountsController.GetAccounts (Bank.API) in 96.6359ms
2023-01-09 14:39:23.6184|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.AccountsController.GetAccounts (Bank.API)'
2023-01-09 14:39:23.7252|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:57658/api/accounts application/json 63 - 200 130 application/json;+charset=utf-8 545.5861ms
2023-01-09 14:39:29.6825|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 POST https://localhost:57658/api/accounts application/json 63
2023-01-09 14:39:29.6825|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.AccountsController.CreateAccount (Bank.API)'
2023-01-09 14:39:29.7084|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "CreateAccount", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult CreateAccount(Bank.API.Services.Models.AccountCreationDTO) on controller Bank.API.Controllers.AccountsController (Bank.API).
2023-01-09 14:39:30.1394|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (126ms) [Parameters=[@p0='?' (Size = 50), @p1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Accounts] ([Owner], [Sum])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2023-01-09 14:39:30.1991|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing CreatedAtRouteResult, writing value of type 'Bank.API.Services.Models.AccountDTO'.
2023-01-09 14:39:30.2870|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.AccountsController.CreateAccount (Bank.API) in 573.0525ms
2023-01-09 14:39:30.2919|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.AccountsController.CreateAccount (Bank.API)'
2023-01-09 14:39:30.3089|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 POST https://localhost:57658/api/accounts application/json 63 - 201 76 application/json;+charset=utf-8 612.3472ms
2023-01-09 14:39:59.2830|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:57658/api/accounts application/json 63
2023-01-09 14:39:59.2830|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.AccountsController.GetAccounts (Bank.API)'
2023-01-09 14:39:59.3005|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetAccounts", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAccounts() on controller Bank.API.Controllers.AccountsController (Bank.API).
2023-01-09 14:39:59.3109|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[Owner], [a].[Sum]
FROM [Accounts] AS [a]
ORDER BY [a].[Owner]
2023-01-09 14:39:59.3109|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Bank.API.Services.Models.AccountWithoutDepositsDTO, Bank.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-01-09 14:39:59.3275|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.AccountsController.GetAccounts (Bank.API) in 14.6394ms
2023-01-09 14:39:59.3275|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.AccountsController.GetAccounts (Bank.API)'
2023-01-09 14:39:59.3275|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:57658/api/accounts application/json 63 - 200 172 application/json;+charset=utf-8 55.0226ms
2023-01-09 14:41:02.4582|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 POST https://localhost:57658/api/accounts application/json 40
2023-01-09 14:41:02.4678|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.AccountsController.CreateAccount (Bank.API)'
2023-01-09 14:41:02.4820|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "CreateAccount", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult CreateAccount(Bank.API.Services.Models.AccountCreationDTO) on controller Bank.API.Controllers.AccountsController (Bank.API).
2023-01-09 14:41:02.4952|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2023-01-09 14:41:02.5517|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.AccountsController.CreateAccount (Bank.API) in 58.3178ms
2023-01-09 14:41:02.5852|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.AccountsController.CreateAccount (Bank.API)'
2023-01-09 14:41:02.5916|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 POST https://localhost:57658/api/accounts application/json 40 - 400 249 application/problem+json;+charset=utf-8 130.2066ms
2023-01-09 14:51:49.1460|INFO|Bank.API.Program|Initializing application...
2023-01-09 14:51:58.8254|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (57ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-09 14:51:59.1240|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (114ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2023-01-09 14:51:59.1506|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [AccountInfoDB];
2023-01-09 14:51:59.5216|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (283ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [AccountInfoDB];
2023-01-09 14:51:59.5901|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (66ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2023-01-09 14:51:59.5901|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-09 14:51:59.7829|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2023-01-09 14:51:59.7829|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-09 14:51:59.8486|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (45ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-01-09 14:51:59.8668|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-01-09 14:51:59.9124|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230105161435_AccountInfoDBInitialMigration'.
2023-01-09 14:52:00.0310|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Accounts] (
    [Id] int NOT NULL IDENTITY,
    [Owner] nvarchar(50) NOT NULL,
    [Sum] int NOT NULL,
    CONSTRAINT [PK_Accounts] PRIMARY KEY ([Id])
);
2023-01-09 14:52:00.0697|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (31ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Deposits] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [DepositSum] int NOT NULL,
    [AccountId] int NOT NULL,
    CONSTRAINT [PK_Deposits] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Deposits_Accounts_AccountId] FOREIGN KEY ([AccountId]) REFERENCES [Accounts] ([Id]) ON DELETE CASCADE
);
2023-01-09 14:52:00.0917|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Deposits_AccountId] ON [Deposits] ([AccountId]);
2023-01-09 14:52:00.0917|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230105161435_AccountInfoDBInitialMigration', N'7.0.1');
2023-01-09 14:52:00.1333|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230105162733_AccountInfoDBAddNumberOfDeposits'.
2023-01-09 14:52:00.1625|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD [NumberOfDeposits] int NOT NULL DEFAULT 0;
2023-01-09 14:52:00.1625|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230105162733_AccountInfoDBAddNumberOfDeposits', N'7.0.1');
2023-01-09 14:52:00.1688|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230105175606_SampleData'.
2023-01-09 14:52:00.2840|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (40ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'NumberOfDeposits', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] ON;
INSERT INTO [Accounts] ([Id], [NumberOfDeposits], [Owner], [Sum])
VALUES (1, 0, N'Gabor Andreea', 2500),
(2, 0, N'Pavel Carmen', 3200),
(3, 0, N'Wolf Lorena', 2800);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'NumberOfDeposits', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] OFF;
2023-01-09 14:52:00.3094|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] ON;
INSERT INTO [Deposits] ([Id], [AccountId], [DepositSum], [Name])
VALUES (1, 1, 2000, N'Savings Deposit'),
(2, 1, 500, N'Fixed Deposit'),
(3, 2, 2200, N'Fixed Deposit'),
(4, 2, 1000, N'Recurring Deposit'),
(5, 3, 1200, N'Savings Deposit'),
(6, 3, 1600, N'Current Deposit');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] OFF;
2023-01-09 14:52:00.3094|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230105175606_SampleData', N'7.0.1');
2023-01-09 14:52:00.3094|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230108222712_AccountInfoDBRemoveNumberOfDeposits'.
2023-01-09 14:52:00.4349|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (101ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Accounts]') AND [c].[name] = N'NumberOfDeposits');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [Accounts] DROP CONSTRAINT [' + @var0 + '];');
ALTER TABLE [Accounts] DROP COLUMN [NumberOfDeposits];
2023-01-09 14:52:00.4349|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230108222712_AccountInfoDBRemoveNumberOfDeposits', N'7.0.1');
2023-01-09 14:52:00.8515|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\z004pj3h\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-01-09 14:52:02.2228|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:57658/ - -
2023-01-09 14:52:02.4076|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:57658/ - - - 404 0 - 193.7516ms
2023-01-09 14:52:31.5758|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 POST https://localhost:57658/api/accounts application/json 55
2023-01-09 14:52:31.5758|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.AccountsController.CreateAccount (Bank.API)'
2023-01-09 14:52:31.6475|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "CreateAccount", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult CreateAccount(Bank.API.Services.Models.AccountCreationDTO) on controller Bank.API.Controllers.AccountsController (Bank.API).
2023-01-09 14:52:32.5503|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (78ms) [Parameters=[@p0='?' (Size = 50), @p1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Accounts] ([Owner], [Sum])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2023-01-09 14:52:32.6371|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing CreatedAtRouteResult, writing value of type 'Bank.API.Services.Models.AccountDTO'.
2023-01-09 14:52:32.8225|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.AccountsController.CreateAccount (Bank.API) in 1152.7092ms
2023-01-09 14:52:32.8319|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.AccountsController.CreateAccount (Bank.API)'
2023-01-09 14:52:32.8981|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 POST https://localhost:57658/api/accounts application/json 55 - 201 69 application/json;+charset=utf-8 1283.5549ms
2023-01-09 14:54:01.6856|INFO|Bank.API.Program|Initializing application...
2023-01-09 14:54:08.8865|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (45ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-09 14:54:09.0649|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2023-01-09 14:54:09.0975|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (30ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [AccountInfoDB];
2023-01-09 14:54:09.4791|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (280ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [AccountInfoDB];
2023-01-09 14:54:09.5599|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (76ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2023-01-09 14:54:09.5599|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-09 14:54:09.7234|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2023-01-09 14:54:09.7234|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-09 14:54:09.7903|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (45ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-01-09 14:54:09.8120|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-01-09 14:54:09.8590|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230105161435_AccountInfoDBInitialMigration'.
2023-01-09 14:54:09.9546|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Accounts] (
    [Id] int NOT NULL IDENTITY,
    [Owner] nvarchar(50) NOT NULL,
    [Sum] int NOT NULL,
    CONSTRAINT [PK_Accounts] PRIMARY KEY ([Id])
);
2023-01-09 14:54:09.9546|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Deposits] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [DepositSum] int NOT NULL,
    [AccountId] int NOT NULL,
    CONSTRAINT [PK_Deposits] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Deposits_Accounts_AccountId] FOREIGN KEY ([AccountId]) REFERENCES [Accounts] ([Id]) ON DELETE CASCADE
);
2023-01-09 14:54:09.9663|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Deposits_AccountId] ON [Deposits] ([AccountId]);
2023-01-09 14:54:09.9663|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230105161435_AccountInfoDBInitialMigration', N'7.0.1');
2023-01-09 14:54:10.0184|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230105162733_AccountInfoDBAddNumberOfDeposits'.
2023-01-09 14:54:10.0423|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD [NumberOfDeposits] int NOT NULL DEFAULT 0;
2023-01-09 14:54:10.0455|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230105162733_AccountInfoDBAddNumberOfDeposits', N'7.0.1');
2023-01-09 14:54:10.0455|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230105175606_SampleData'.
2023-01-09 14:54:10.1475|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (29ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'NumberOfDeposits', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] ON;
INSERT INTO [Accounts] ([Id], [NumberOfDeposits], [Owner], [Sum])
VALUES (1, 0, N'Gabor Andreea', 2500),
(2, 0, N'Pavel Carmen', 3200),
(3, 0, N'Wolf Lorena', 2800);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'NumberOfDeposits', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] OFF;
2023-01-09 14:54:10.1704|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] ON;
INSERT INTO [Deposits] ([Id], [AccountId], [DepositSum], [Name])
VALUES (1, 1, 2000, N'Savings Deposit'),
(2, 1, 500, N'Fixed Deposit'),
(3, 2, 2200, N'Fixed Deposit'),
(4, 2, 1000, N'Recurring Deposit'),
(5, 3, 1200, N'Savings Deposit'),
(6, 3, 1600, N'Current Deposit');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] OFF;
2023-01-09 14:54:10.1704|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230105175606_SampleData', N'7.0.1');
2023-01-09 14:54:10.1704|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230108222712_AccountInfoDBRemoveNumberOfDeposits'.
2023-01-09 14:54:10.2947|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (90ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Accounts]') AND [c].[name] = N'NumberOfDeposits');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [Accounts] DROP CONSTRAINT [' + @var0 + '];');
ALTER TABLE [Accounts] DROP COLUMN [NumberOfDeposits];
2023-01-09 14:54:10.2947|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230108222712_AccountInfoDBRemoveNumberOfDeposits', N'7.0.1');
2023-01-09 14:54:10.5358|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\z004pj3h\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-01-09 14:54:11.7968|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:57658/ - -
2023-01-09 14:54:11.9816|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:57658/ - - - 404 0 - 182.6037ms
2023-01-09 14:57:09.7606|INFO|Bank.API.Program|Initializing application...
2023-01-09 14:57:16.7084|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (73ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-09 14:57:17.0153|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (85ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2023-01-09 14:57:17.0371|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [AccountInfoDB];
2023-01-09 14:57:17.3642|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (228ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [AccountInfoDB];
2023-01-09 14:57:17.4462|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (79ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2023-01-09 14:57:17.4632|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-09 14:57:17.6619|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2023-01-09 14:57:17.6619|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-09 14:57:17.7180|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (37ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-01-09 14:57:17.7399|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-01-09 14:57:17.8014|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230105161435_AccountInfoDBInitialMigration'.
2023-01-09 14:57:17.8870|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Accounts] (
    [Id] int NOT NULL IDENTITY,
    [Owner] nvarchar(50) NOT NULL,
    [Sum] int NOT NULL,
    CONSTRAINT [PK_Accounts] PRIMARY KEY ([Id])
);
2023-01-09 14:57:17.8928|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Deposits] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [DepositSum] int NOT NULL,
    [AccountId] int NOT NULL,
    CONSTRAINT [PK_Deposits] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Deposits_Accounts_AccountId] FOREIGN KEY ([AccountId]) REFERENCES [Accounts] ([Id]) ON DELETE CASCADE
);
2023-01-09 14:57:17.8928|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Deposits_AccountId] ON [Deposits] ([AccountId]);
2023-01-09 14:57:17.8928|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230105161435_AccountInfoDBInitialMigration', N'7.0.1');
2023-01-09 14:57:17.9262|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230105162733_AccountInfoDBAddNumberOfDeposits'.
2023-01-09 14:57:17.9533|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD [NumberOfDeposits] int NOT NULL DEFAULT 0;
2023-01-09 14:57:17.9833|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230105162733_AccountInfoDBAddNumberOfDeposits', N'7.0.1');
2023-01-09 14:57:17.9833|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230105175606_SampleData'.
2023-01-09 14:57:18.1321|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (57ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'NumberOfDeposits', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] ON;
INSERT INTO [Accounts] ([Id], [NumberOfDeposits], [Owner], [Sum])
VALUES (1, 0, N'Gabor Andreea', 2500),
(2, 0, N'Pavel Carmen', 3200),
(3, 0, N'Wolf Lorena', 2800);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'NumberOfDeposits', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] OFF;
2023-01-09 14:57:18.1558|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] ON;
INSERT INTO [Deposits] ([Id], [AccountId], [DepositSum], [Name])
VALUES (1, 1, 2000, N'Savings Deposit'),
(2, 1, 500, N'Fixed Deposit'),
(3, 2, 2200, N'Fixed Deposit'),
(4, 2, 1000, N'Recurring Deposit'),
(5, 3, 1200, N'Savings Deposit'),
(6, 3, 1600, N'Current Deposit');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] OFF;
2023-01-09 14:57:18.1703|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230105175606_SampleData', N'7.0.1');
2023-01-09 14:57:18.2005|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230108222712_AccountInfoDBRemoveNumberOfDeposits'.
2023-01-09 14:57:18.2763|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (58ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Accounts]') AND [c].[name] = N'NumberOfDeposits');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [Accounts] DROP CONSTRAINT [' + @var0 + '];');
ALTER TABLE [Accounts] DROP COLUMN [NumberOfDeposits];
2023-01-09 14:57:18.2798|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230108222712_AccountInfoDBRemoveNumberOfDeposits', N'7.0.1');
2023-01-09 14:57:18.7162|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\z004pj3h\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-01-09 14:57:20.1858|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:57658/ - -
2023-01-09 14:57:20.3852|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:57658/ - - - 404 0 - 183.0232ms
2023-01-09 14:57:29.2765|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 POST https://localhost:57658/api/accounts application/json 34
2023-01-09 14:57:29.2840|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.AccountsController.CreateAccount (Bank.API)'
2023-01-09 14:57:29.3440|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "CreateAccount", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult CreateAccount(Bank.API.Services.Models.AccountCreationDTO) on controller Bank.API.Controllers.AccountsController (Bank.API).
2023-01-09 14:57:30.6383|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (191ms) [Parameters=[@p0='?' (Size = 50), @p1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Accounts] ([Owner], [Sum])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2023-01-09 14:57:30.7672|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing CreatedAtRouteResult, writing value of type 'Bank.API.Services.Models.AccountDTO'.
2023-01-09 14:57:31.0121|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.AccountsController.CreateAccount (Bank.API) in 1631.4734ms
2023-01-09 14:57:31.0361|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.AccountsController.CreateAccount (Bank.API)'
2023-01-09 14:57:31.0927|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 POST https://localhost:57658/api/accounts application/json 34 - 201 66 application/json;+charset=utf-8 1785.4865ms
2023-01-09 14:57:35.4575|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 POST https://localhost:57658/api/accounts application/json 34
2023-01-09 14:57:35.4575|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.AccountsController.CreateAccount (Bank.API)'
2023-01-09 14:57:35.4731|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "CreateAccount", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult CreateAccount(Bank.API.Services.Models.AccountCreationDTO) on controller Bank.API.Controllers.AccountsController (Bank.API).
2023-01-09 14:57:35.5384|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 50), @p1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Accounts] ([Owner], [Sum])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2023-01-09 14:57:35.5384|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing CreatedAtRouteResult, writing value of type 'Bank.API.Services.Models.AccountDTO'.
2023-01-09 14:57:35.5462|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.AccountsController.CreateAccount (Bank.API) in 69.5995ms
2023-01-09 14:57:35.5462|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.AccountsController.CreateAccount (Bank.API)'
2023-01-09 14:57:35.5462|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 POST https://localhost:57658/api/accounts application/json 34 - 201 66 application/json;+charset=utf-8 105.3226ms
2023-01-09 14:59:47.3932|INFO|Bank.API.Program|Initializing application...
2023-01-09 14:59:55.0683|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (54ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-09 14:59:55.2087|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2023-01-09 14:59:55.2630|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (49ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [AccountInfoDB];
2023-01-09 14:59:55.6447|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (288ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [AccountInfoDB];
2023-01-09 14:59:55.7719|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (124ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2023-01-09 14:59:55.7816|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-09 14:59:55.9656|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2023-01-09 14:59:55.9699|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-09 14:59:56.0277|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (43ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-01-09 14:59:56.0441|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-01-09 14:59:56.0862|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230105161435_AccountInfoDBInitialMigration'.
2023-01-09 14:59:56.1948|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Accounts] (
    [Id] int NOT NULL IDENTITY,
    [Owner] nvarchar(50) NOT NULL,
    [Sum] int NOT NULL,
    CONSTRAINT [PK_Accounts] PRIMARY KEY ([Id])
);
2023-01-09 14:59:56.2063|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Deposits] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [DepositSum] int NOT NULL,
    [AccountId] int NOT NULL,
    CONSTRAINT [PK_Deposits] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Deposits_Accounts_AccountId] FOREIGN KEY ([AccountId]) REFERENCES [Accounts] ([Id]) ON DELETE CASCADE
);
2023-01-09 14:59:56.2176|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Deposits_AccountId] ON [Deposits] ([AccountId]);
2023-01-09 14:59:56.2371|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230105161435_AccountInfoDBInitialMigration', N'7.0.1');
2023-01-09 14:59:56.2643|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230105162733_AccountInfoDBAddNumberOfDeposits'.
2023-01-09 14:59:56.2913|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD [NumberOfDeposits] int NOT NULL DEFAULT 0;
2023-01-09 14:59:56.2955|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230105162733_AccountInfoDBAddNumberOfDeposits', N'7.0.1');
2023-01-09 14:59:56.3158|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230105175606_SampleData'.
2023-01-09 14:59:56.4428|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (41ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'NumberOfDeposits', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] ON;
INSERT INTO [Accounts] ([Id], [NumberOfDeposits], [Owner], [Sum])
VALUES (1, 0, N'Gabor Andreea', 2500),
(2, 0, N'Pavel Carmen', 3200),
(3, 0, N'Wolf Lorena', 2800);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'NumberOfDeposits', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] OFF;
2023-01-09 14:59:56.4600|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (14ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] ON;
INSERT INTO [Deposits] ([Id], [AccountId], [DepositSum], [Name])
VALUES (1, 1, 2000, N'Savings Deposit'),
(2, 1, 500, N'Fixed Deposit'),
(3, 2, 2200, N'Fixed Deposit'),
(4, 2, 1000, N'Recurring Deposit'),
(5, 3, 1200, N'Savings Deposit'),
(6, 3, 1600, N'Current Deposit');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] OFF;
2023-01-09 14:59:56.4600|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230105175606_SampleData', N'7.0.1');
2023-01-09 14:59:56.4666|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230108222712_AccountInfoDBRemoveNumberOfDeposits'.
2023-01-09 14:59:56.5528|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (71ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Accounts]') AND [c].[name] = N'NumberOfDeposits');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [Accounts] DROP CONSTRAINT [' + @var0 + '];');
ALTER TABLE [Accounts] DROP COLUMN [NumberOfDeposits];
2023-01-09 14:59:56.5528|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230108222712_AccountInfoDBRemoveNumberOfDeposits', N'7.0.1');
2023-01-09 14:59:56.5614|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230109125927_AccountInfoDBValidSum'.
2023-01-09 14:59:56.5614|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230109125927_AccountInfoDBValidSum', N'7.0.1');
2023-01-09 14:59:56.8896|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\z004pj3h\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-01-09 14:59:58.1832|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:57658/ - -
2023-01-09 14:59:58.3935|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:57658/ - - - 404 0 - 221.0201ms
2023-01-09 15:00:03.6162|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:57658/api/accounts application/json 34
2023-01-09 15:00:03.6336|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.AccountsController.GetAccounts (Bank.API)'
2023-01-09 15:00:03.6756|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetAccounts", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAccounts() on controller Bank.API.Controllers.AccountsController (Bank.API).
2023-01-09 15:00:04.6633|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[Owner], [a].[Sum]
FROM [Accounts] AS [a]
ORDER BY [a].[Owner]
2023-01-09 15:00:04.8117|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Bank.API.Services.Models.AccountWithoutDepositsDTO, Bank.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-01-09 15:00:05.0260|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.AccountsController.GetAccounts (Bank.API) in 1329.0425ms
2023-01-09 15:00:05.0470|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.AccountsController.GetAccounts (Bank.API)'
2023-01-09 15:00:05.0748|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:57658/api/accounts application/json 34 - 200 130 application/json;+charset=utf-8 1456.1080ms
2023-01-09 15:00:16.5965|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 POST https://localhost:57658/api/accounts application/json 34
2023-01-09 15:00:16.5965|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.AccountsController.CreateAccount (Bank.API)'
2023-01-09 15:00:16.6290|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "CreateAccount", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult CreateAccount(Bank.API.Services.Models.AccountCreationDTO) on controller Bank.API.Controllers.AccountsController (Bank.API).
2023-01-09 15:00:17.1334|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (62ms) [Parameters=[@p0='?' (Size = 50), @p1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Accounts] ([Owner], [Sum])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2023-01-09 15:00:17.1877|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing CreatedAtRouteResult, writing value of type 'Bank.API.Services.Models.AccountDTO'.
2023-01-09 15:00:17.2657|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.AccountsController.CreateAccount (Bank.API) in 633.3691ms
2023-01-09 15:00:17.2883|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.AccountsController.CreateAccount (Bank.API)'
2023-01-09 15:00:17.3137|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 POST https://localhost:57658/api/accounts application/json 34 - 201 66 application/json;+charset=utf-8 704.7006ms
2023-01-09 15:00:35.5683|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 POST https://localhost:57658/api/accounts application/json 55
2023-01-09 15:00:35.5683|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.AccountsController.CreateAccount (Bank.API)'
2023-01-09 15:00:35.5810|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "CreateAccount", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult CreateAccount(Bank.API.Services.Models.AccountCreationDTO) on controller Bank.API.Controllers.AccountsController (Bank.API).
2023-01-09 15:00:35.6131|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 50), @p1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Accounts] ([Owner], [Sum])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2023-01-09 15:00:35.6131|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing CreatedAtRouteResult, writing value of type 'Bank.API.Services.Models.AccountDTO'.
2023-01-09 15:00:35.6131|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.AccountsController.CreateAccount (Bank.API) in 35.5854ms
2023-01-09 15:00:35.6331|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.AccountsController.CreateAccount (Bank.API)'
2023-01-09 15:00:35.6584|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 POST https://localhost:57658/api/accounts application/json 55 - 201 68 application/json;+charset=utf-8 67.5127ms
2023-01-09 15:00:59.6311|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:57658/api/accounts application/json 55
2023-01-09 15:00:59.6311|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.AccountsController.GetAccounts (Bank.API)'
2023-01-09 15:00:59.6428|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetAccounts", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAccounts() on controller Bank.API.Controllers.AccountsController (Bank.API).
2023-01-09 15:00:59.6428|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[Owner], [a].[Sum]
FROM [Accounts] AS [a]
ORDER BY [a].[Owner]
2023-01-09 15:00:59.6560|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Bank.API.Services.Models.AccountWithoutDepositsDTO, Bank.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-01-09 15:00:59.6560|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.AccountsController.GetAccounts (Bank.API) in 13.4472ms
2023-01-09 15:00:59.6724|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.AccountsController.GetAccounts (Bank.API)'
2023-01-09 15:00:59.6724|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:57658/api/accounts application/json 55 - 200 196 application/json;+charset=utf-8 58.2735ms
2023-01-09 15:12:15.2049|INFO|Bank.API.Program|Initializing application...
2023-01-09 15:12:23.0904|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (47ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-09 15:12:23.4606|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (165ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2023-01-09 15:12:23.4847|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [AccountInfoDB];
2023-01-09 15:12:23.8319|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (236ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [AccountInfoDB];
2023-01-09 15:12:23.9315|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (97ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2023-01-09 15:12:23.9447|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-09 15:12:24.1508|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2023-01-09 15:12:24.1565|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-09 15:12:24.2163|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (42ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-01-09 15:12:24.2519|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (17ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-01-09 15:12:24.2983|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230105161435_AccountInfoDBInitialMigration'.
2023-01-09 15:12:24.4101|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Accounts] (
    [Id] int NOT NULL IDENTITY,
    [Owner] nvarchar(50) NOT NULL,
    [Sum] int NOT NULL,
    CONSTRAINT [PK_Accounts] PRIMARY KEY ([Id])
);
2023-01-09 15:12:24.4585|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (35ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Deposits] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [DepositSum] int NOT NULL,
    [AccountId] int NOT NULL,
    CONSTRAINT [PK_Deposits] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Deposits_Accounts_AccountId] FOREIGN KEY ([AccountId]) REFERENCES [Accounts] ([Id]) ON DELETE CASCADE
);
2023-01-09 15:12:24.4714|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Deposits_AccountId] ON [Deposits] ([AccountId]);
2023-01-09 15:12:24.4873|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230105161435_AccountInfoDBInitialMigration', N'7.0.1');
2023-01-09 15:12:24.5154|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230105162733_AccountInfoDBAddNumberOfDeposits'.
2023-01-09 15:12:24.5380|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD [NumberOfDeposits] int NOT NULL DEFAULT 0;
2023-01-09 15:12:24.5498|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230105162733_AccountInfoDBAddNumberOfDeposits', N'7.0.1');
2023-01-09 15:12:24.5716|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230105175606_SampleData'.
2023-01-09 15:12:24.7253|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (42ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'NumberOfDeposits', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] ON;
INSERT INTO [Accounts] ([Id], [NumberOfDeposits], [Owner], [Sum])
VALUES (1, 0, N'Gabor Andreea', 2500),
(2, 0, N'Pavel Carmen', 3200),
(3, 0, N'Wolf Lorena', 2800);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'NumberOfDeposits', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] OFF;
2023-01-09 15:12:24.7411|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (13ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] ON;
INSERT INTO [Deposits] ([Id], [AccountId], [DepositSum], [Name])
VALUES (1, 1, 2000, N'Savings Deposit'),
(2, 1, 500, N'Fixed Deposit'),
(3, 2, 2200, N'Fixed Deposit'),
(4, 2, 1000, N'Recurring Deposit'),
(5, 3, 1200, N'Savings Deposit'),
(6, 3, 1600, N'Current Deposit');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] OFF;
2023-01-09 15:12:24.7411|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230105175606_SampleData', N'7.0.1');
2023-01-09 15:12:24.7411|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230108222712_AccountInfoDBRemoveNumberOfDeposits'.
2023-01-09 15:12:24.8143|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (51ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Accounts]') AND [c].[name] = N'NumberOfDeposits');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [Accounts] DROP CONSTRAINT [' + @var0 + '];');
ALTER TABLE [Accounts] DROP COLUMN [NumberOfDeposits];
2023-01-09 15:12:24.8143|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230108222712_AccountInfoDBRemoveNumberOfDeposits', N'7.0.1');
2023-01-09 15:12:25.2940|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\z004pj3h\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-01-09 15:12:27.0353|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:57658/ - -
2023-01-09 15:12:27.2663|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:57658/ - - - 404 0 - 247.7856ms
2023-01-09 15:13:12.7769|INFO|Bank.API.Program|Initializing application...
2023-01-09 15:13:19.4938|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (42ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-09 15:13:19.6226|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2023-01-09 15:13:19.6447|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [AccountInfoDB];
2023-01-09 15:13:20.1318|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (367ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [AccountInfoDB];
2023-01-09 15:13:20.2507|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (114ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2023-01-09 15:13:20.2834|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-09 15:13:20.4760|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2023-01-09 15:13:20.4760|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-09 15:13:20.5295|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (32ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-01-09 15:13:20.5675|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (16ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-01-09 15:13:20.6104|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230105161435_AccountInfoDBInitialMigration'.
2023-01-09 15:13:20.6955|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Accounts] (
    [Id] int NOT NULL IDENTITY,
    [Owner] nvarchar(50) NOT NULL,
    [Sum] int NOT NULL,
    CONSTRAINT [PK_Accounts] PRIMARY KEY ([Id])
);
2023-01-09 15:13:20.6955|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Deposits] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [DepositSum] int NOT NULL,
    [AccountId] int NOT NULL,
    CONSTRAINT [PK_Deposits] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Deposits_Accounts_AccountId] FOREIGN KEY ([AccountId]) REFERENCES [Accounts] ([Id]) ON DELETE CASCADE
);
2023-01-09 15:13:20.7060|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Deposits_AccountId] ON [Deposits] ([AccountId]);
2023-01-09 15:13:20.7060|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230105161435_AccountInfoDBInitialMigration', N'7.0.1');
2023-01-09 15:13:20.7293|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230105162733_AccountInfoDBAddNumberOfDeposits'.
2023-01-09 15:13:20.7616|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD [NumberOfDeposits] int NOT NULL DEFAULT 0;
2023-01-09 15:13:20.7863|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (17ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230105162733_AccountInfoDBAddNumberOfDeposits', N'7.0.1');
2023-01-09 15:13:20.7863|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230105175606_SampleData'.
2023-01-09 15:13:20.9132|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (42ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'NumberOfDeposits', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] ON;
INSERT INTO [Accounts] ([Id], [NumberOfDeposits], [Owner], [Sum])
VALUES (1, 0, N'Gabor Andreea', 2500),
(2, 0, N'Pavel Carmen', 3200),
(3, 0, N'Wolf Lorena', 2800);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'NumberOfDeposits', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] OFF;
2023-01-09 15:13:20.9354|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] ON;
INSERT INTO [Deposits] ([Id], [AccountId], [DepositSum], [Name])
VALUES (1, 1, 2000, N'Savings Deposit'),
(2, 1, 500, N'Fixed Deposit'),
(3, 2, 2200, N'Fixed Deposit'),
(4, 2, 1000, N'Recurring Deposit'),
(5, 3, 1200, N'Savings Deposit'),
(6, 3, 1600, N'Current Deposit');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] OFF;
2023-01-09 15:13:20.9416|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230105175606_SampleData', N'7.0.1');
2023-01-09 15:13:20.9416|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230108222712_AccountInfoDBRemoveNumberOfDeposits'.
2023-01-09 15:13:21.0368|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (54ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Accounts]') AND [c].[name] = N'NumberOfDeposits');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [Accounts] DROP CONSTRAINT [' + @var0 + '];');
ALTER TABLE [Accounts] DROP COLUMN [NumberOfDeposits];
2023-01-09 15:13:21.0368|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230108222712_AccountInfoDBRemoveNumberOfDeposits', N'7.0.1');
2023-01-09 15:13:21.0368|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230109131302_AccountInfoDBValidNegativSum'.
2023-01-09 15:13:21.0595|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230109131302_AccountInfoDBValidNegativSum', N'7.0.1');
2023-01-09 15:13:21.3504|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\z004pj3h\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-01-09 15:13:23.0160|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:57658/ - -
2023-01-09 15:13:23.1934|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:57658/ - - - 404 0 - 162.8149ms
