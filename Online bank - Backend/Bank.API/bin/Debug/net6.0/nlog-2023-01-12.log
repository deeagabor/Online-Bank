2023-01-12 14:10:57.1520|INFO|Bank.API.Program|Initializing application...
2023-01-12 14:11:16.4371|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (65ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-12 14:11:16.7189|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (87ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2023-01-12 14:11:16.7534|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (31ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [AccountInfoDB];
2023-01-12 14:11:17.1583|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (294ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [AccountInfoDB];
2023-01-12 14:11:17.2627|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (89ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2023-01-12 14:11:17.2747|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-12 14:11:17.4504|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (17ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2023-01-12 14:11:17.4577|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-12 14:11:17.5158|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (42ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-01-12 14:11:17.5367|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-01-12 14:11:17.5919|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230109233627_AccountInfoDBInitialMigration'.
2023-01-12 14:11:17.7649|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Accounts] (
    [Id] int NOT NULL IDENTITY,
    [Owner] nvarchar(50) NOT NULL,
    [Sum] real NOT NULL,
    CONSTRAINT [PK_Accounts] PRIMARY KEY ([Id])
);
2023-01-12 14:11:17.7649|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Deposits] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [DepositSum] int NOT NULL,
    [AccountId] int NOT NULL,
    CONSTRAINT [PK_Deposits] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Deposits_Accounts_AccountId] FOREIGN KEY ([AccountId]) REFERENCES [Accounts] ([Id]) ON DELETE CASCADE
);
2023-01-12 14:11:17.8214|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (45ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] ON;
INSERT INTO [Accounts] ([Id], [Owner], [Sum])
VALUES (1, N'Gabor Andreea', CAST(2500 AS real)),
(2, N'Pavel Carmen', CAST(3200 AS real)),
(3, N'Wolf Lorena', CAST(2800 AS real));
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] OFF;
2023-01-12 14:11:17.8445|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] ON;
INSERT INTO [Deposits] ([Id], [AccountId], [DepositSum], [Name])
VALUES (1, 1, 2000, N'Savings Deposit'),
(2, 1, 500, N'Fixed Deposit'),
(3, 2, 2200, N'Fixed Deposit'),
(4, 2, 1000, N'Recurring Deposit'),
(5, 3, 1200, N'Savings Deposit'),
(6, 3, 1600, N'Current Deposit');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] OFF;
2023-01-12 14:11:17.8931|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (44ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Deposits_AccountId] ON [Deposits] ([AccountId]);
2023-01-12 14:11:17.8931|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230109233627_AccountInfoDBInitialMigration', N'7.0.1');
2023-01-12 14:11:17.9259|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230110232750_AccountInfoDBRangeValid'.
2023-01-12 14:11:18.0533|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (70ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Deposits]') AND [c].[name] = N'DepositSum');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [Deposits] DROP CONSTRAINT [' + @var0 + '];');
ALTER TABLE [Deposits] ALTER COLUMN [DepositSum] real NOT NULL;
2023-01-12 14:11:18.0533|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Deposits] SET [DepositSum] = CAST(2000 AS real)
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-01-12 14:11:18.0623|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Deposits] SET [DepositSum] = CAST(500 AS real)
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-01-12 14:11:18.0623|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Deposits] SET [DepositSum] = CAST(2200 AS real)
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-01-12 14:11:18.0623|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Deposits] SET [DepositSum] = CAST(1000 AS real)
WHERE [Id] = 4;
SELECT @@ROWCOUNT;
2023-01-12 14:11:18.0623|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Deposits] SET [DepositSum] = CAST(1200 AS real)
WHERE [Id] = 5;
SELECT @@ROWCOUNT;
2023-01-12 14:11:18.0909|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Deposits] SET [DepositSum] = CAST(1600 AS real)
WHERE [Id] = 6;
SELECT @@ROWCOUNT;
2023-01-12 14:11:18.0909|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230110232750_AccountInfoDBRangeValid', N'7.0.1');
2023-01-12 14:11:18.1203|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230112121030_AccountInfoDBPeriodAttribute'.
2023-01-12 14:11:18.1444|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Deposits] ADD [Period] int NOT NULL DEFAULT 0;
2023-01-12 14:11:18.1444|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Deposits] SET [Period] = 0
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-01-12 14:11:18.1642|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Deposits] SET [Period] = 0
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-01-12 14:11:18.1831|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Deposits] SET [Period] = 0
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-01-12 14:11:18.1887|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Deposits] SET [Period] = 0
WHERE [Id] = 4;
SELECT @@ROWCOUNT;
2023-01-12 14:11:18.1887|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Deposits] SET [Period] = 0
WHERE [Id] = 5;
SELECT @@ROWCOUNT;
2023-01-12 14:11:18.1887|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Deposits] SET [Period] = 0
WHERE [Id] = 6;
SELECT @@ROWCOUNT;
2023-01-12 14:11:18.2072|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230112121030_AccountInfoDBPeriodAttribute', N'7.0.1');
2023-01-12 14:11:18.9071|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\z004pj3h\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-01-12 14:11:20.7109|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:57658/ - -
2023-01-12 14:11:21.1484|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:57658/ - - - 404 0 - 309.5154ms
2023-01-12 14:16:14.6513|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:57658/api/accounts/deposits application/json 37
2023-01-12 14:16:14.6587|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.AccountsController.GetAccount (Bank.API)'
2023-01-12 14:16:14.7059|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetAccount", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAccount(Int32, Boolean) on controller Bank.API.Controllers.AccountsController (Bank.API).
2023-01-12 14:16:15.0563|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2023-01-12 14:16:15.3389|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.AccountsController.GetAccount (Bank.API) in 613.3394ms
2023-01-12 14:16:15.3606|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.AccountsController.GetAccount (Bank.API)'
2023-01-12 14:16:15.3606|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:57658/api/accounts/deposits application/json 37 - 400 246 application/problem+json;+charset=utf-8 716.8345ms
2023-01-12 14:21:38.1606|INFO|Bank.API.Program|Initializing application...
2023-01-12 14:21:45.8017|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (62ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-12 14:21:46.0978|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (97ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2023-01-12 14:21:46.1249|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [AccountInfoDB];
2023-01-12 14:21:46.5845|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (359ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [AccountInfoDB];
2023-01-12 14:21:46.6718|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (85ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2023-01-12 14:21:46.6718|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-12 14:21:46.8890|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (14ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2023-01-12 14:21:46.8890|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-12 14:21:46.9508|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (40ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-01-12 14:21:46.9685|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-01-12 14:21:47.0105|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230109233627_AccountInfoDBInitialMigration'.
2023-01-12 14:21:47.2279|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Accounts] (
    [Id] int NOT NULL IDENTITY,
    [Owner] nvarchar(50) NOT NULL,
    [Sum] real NOT NULL,
    CONSTRAINT [PK_Accounts] PRIMARY KEY ([Id])
);
2023-01-12 14:21:47.2347|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Deposits] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [DepositSum] int NOT NULL,
    [AccountId] int NOT NULL,
    CONSTRAINT [PK_Deposits] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Deposits_Accounts_AccountId] FOREIGN KEY ([AccountId]) REFERENCES [Accounts] ([Id]) ON DELETE CASCADE
);
2023-01-12 14:21:47.2820|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (44ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] ON;
INSERT INTO [Accounts] ([Id], [Owner], [Sum])
VALUES (1, N'Gabor Andreea', CAST(2500 AS real)),
(2, N'Pavel Carmen', CAST(3200 AS real)),
(3, N'Wolf Lorena', CAST(2800 AS real));
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] OFF;
2023-01-12 14:21:47.3099|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] ON;
INSERT INTO [Deposits] ([Id], [AccountId], [DepositSum], [Name])
VALUES (1, 1, 2000, N'Savings Deposit'),
(2, 1, 500, N'Fixed Deposit'),
(3, 2, 2200, N'Fixed Deposit'),
(4, 2, 1000, N'Recurring Deposit'),
(5, 3, 1200, N'Savings Deposit'),
(6, 3, 1600, N'Current Deposit');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] OFF;
2023-01-12 14:21:47.3099|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Deposits_AccountId] ON [Deposits] ([AccountId]);
2023-01-12 14:21:47.3099|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230109233627_AccountInfoDBInitialMigration', N'7.0.1');
2023-01-12 14:21:47.3449|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230110232750_AccountInfoDBRangeValid'.
2023-01-12 14:21:47.4861|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (82ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Deposits]') AND [c].[name] = N'DepositSum');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [Deposits] DROP CONSTRAINT [' + @var0 + '];');
ALTER TABLE [Deposits] ALTER COLUMN [DepositSum] real NOT NULL;
2023-01-12 14:21:47.5079|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (14ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Deposits] SET [DepositSum] = CAST(2000 AS real)
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-01-12 14:21:47.5079|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Deposits] SET [DepositSum] = CAST(500 AS real)
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-01-12 14:21:47.5170|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Deposits] SET [DepositSum] = CAST(2200 AS real)
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-01-12 14:21:47.5170|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Deposits] SET [DepositSum] = CAST(1000 AS real)
WHERE [Id] = 4;
SELECT @@ROWCOUNT;
2023-01-12 14:21:47.5170|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Deposits] SET [DepositSum] = CAST(1200 AS real)
WHERE [Id] = 5;
SELECT @@ROWCOUNT;
2023-01-12 14:21:47.5170|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Deposits] SET [DepositSum] = CAST(1600 AS real)
WHERE [Id] = 6;
SELECT @@ROWCOUNT;
2023-01-12 14:21:47.5319|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230110232750_AccountInfoDBRangeValid', N'7.0.1');
2023-01-12 14:21:47.5319|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230112122044_AccountInfoDBPeriodAttribute'.
2023-01-12 14:21:47.5563|ERROR|Microsoft.EntityFrameworkCore.Database.Command|Failed executing DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Deposits] SET [Period] = 1
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-01-12 14:21:47.6014|ERROR|Bank.API.Program|An error occurred while migrating the database!
2023-01-12 14:21:48.0013|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\z004pj3h\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-01-12 14:21:49.4399|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:57658/ - -
2023-01-12 14:21:49.6579|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:57658/ - - - 404 0 - 202.2732ms
2023-01-12 14:24:54.7422|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (769ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [AccountInfoDB];
2023-01-12 14:24:54.9423|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (149ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2023-01-12 14:24:54.9759|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-12 14:24:55.2724|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Accounts] (
    [Id] int NOT NULL IDENTITY,
    [Owner] nvarchar(50) NOT NULL,
    [Sum] real NOT NULL,
    CONSTRAINT [PK_Accounts] PRIMARY KEY ([Id])
);
2023-01-12 14:24:55.2724|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Deposits] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [Period] int NOT NULL,
    [DepositSum] real NOT NULL,
    [AccountId] int NOT NULL,
    CONSTRAINT [PK_Deposits] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Deposits_Accounts_AccountId] FOREIGN KEY ([AccountId]) REFERENCES [Accounts] ([Id]) ON DELETE CASCADE
);
2023-01-12 14:24:55.3195|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (42ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] ON;
INSERT INTO [Accounts] ([Id], [Owner], [Sum])
VALUES (1, N'Gabor Andreea', CAST(2500 AS real)),
(2, N'Pavel Carmen', CAST(3200 AS real)),
(3, N'Wolf Lorena', CAST(2800 AS real));
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] OFF;
2023-01-12 14:24:55.3411|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] ON;
INSERT INTO [Deposits] ([Id], [AccountId], [DepositSum], [Name], [Period])
VALUES (1, 1, CAST(2000 AS real), N'Savings Deposit', 1),
(2, 1, CAST(500 AS real), N'Fixed Deposit', 12),
(3, 2, CAST(2200 AS real), N'Fixed Deposit', 6),
(4, 2, CAST(1000 AS real), N'Recurring Deposit', 1),
(5, 3, CAST(1200 AS real), N'Savings Deposit', 12),
(6, 3, CAST(1600 AS real), N'Current Deposit', 6);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] OFF;
2023-01-12 14:24:55.3411|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Deposits_AccountId] ON [Deposits] ([AccountId]);
2023-01-12 14:25:08.8065|INFO|Bank.API.Program|Initializing application...
2023-01-12 14:25:14.5361|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (48ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-12 14:25:14.6904|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (104ms) [Parameters=[], CommandType='Text', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2023-01-12 14:25:14.6904|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-12 14:25:14.8292|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (15ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2023-01-12 14:25:14.8679|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (36ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [AccountInfoDB];
2023-01-12 14:25:15.1898|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (253ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [AccountInfoDB];
2023-01-12 14:25:15.2915|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (98ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2023-01-12 14:25:15.3028|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-12 14:25:15.4994|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2023-01-12 14:25:15.4994|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-12 14:25:15.5140|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-01-12 14:25:15.5140|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-01-12 14:25:15.5658|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230112122455_AccountInfoDBInitialMigration'.
2023-01-12 14:25:15.7693|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Accounts] (
    [Id] int NOT NULL IDENTITY,
    [Owner] nvarchar(50) NOT NULL,
    [Sum] real NOT NULL,
    CONSTRAINT [PK_Accounts] PRIMARY KEY ([Id])
);
2023-01-12 14:25:15.7931|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (18ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Deposits] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [Period] int NOT NULL,
    [DepositSum] real NOT NULL,
    [AccountId] int NOT NULL,
    CONSTRAINT [PK_Deposits] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Deposits_Accounts_AccountId] FOREIGN KEY ([AccountId]) REFERENCES [Accounts] ([Id]) ON DELETE CASCADE
);
2023-01-12 14:25:15.8677|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (64ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] ON;
INSERT INTO [Accounts] ([Id], [Owner], [Sum])
VALUES (1, N'Gabor Andreea', CAST(2500 AS real)),
(2, N'Pavel Carmen', CAST(3200 AS real)),
(3, N'Wolf Lorena', CAST(2800 AS real));
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] OFF;
2023-01-12 14:25:15.8957|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] ON;
INSERT INTO [Deposits] ([Id], [AccountId], [DepositSum], [Name], [Period])
VALUES (1, 1, CAST(2000 AS real), N'Savings Deposit', 1),
(2, 1, CAST(500 AS real), N'Fixed Deposit', 12),
(3, 2, CAST(2200 AS real), N'Fixed Deposit', 6),
(4, 2, CAST(1000 AS real), N'Recurring Deposit', 1),
(5, 3, CAST(1200 AS real), N'Savings Deposit', 12),
(6, 3, CAST(1600 AS real), N'Current Deposit', 6);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] OFF;
2023-01-12 14:25:15.9038|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Deposits_AccountId] ON [Deposits] ([AccountId]);
2023-01-12 14:25:15.9038|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230112122455_AccountInfoDBInitialMigration', N'7.0.1');
2023-01-12 14:25:16.2602|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\z004pj3h\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-01-12 14:25:17.8043|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:57658/ - -
2023-01-12 14:25:18.0278|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:57658/ - - - 404 0 - 212.9898ms
2023-01-12 14:26:01.0394|INFO|Bank.API.Program|Initializing application...
2023-01-12 14:26:06.2331|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (51ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-12 14:26:06.5408|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (125ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2023-01-12 14:26:06.5620|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [AccountInfoDB];
2023-01-12 14:26:06.9773|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (336ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [AccountInfoDB];
2023-01-12 14:26:07.0459|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (66ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2023-01-12 14:26:07.0459|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-12 14:26:07.2381|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2023-01-12 14:26:07.2381|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-12 14:26:07.2942|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (38ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-01-12 14:26:07.3362|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (17ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-01-12 14:26:07.4204|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230112122455_AccountInfoDBInitialMigration'.
2023-01-12 14:26:07.5854|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Accounts] (
    [Id] int NOT NULL IDENTITY,
    [Owner] nvarchar(50) NOT NULL,
    [Sum] real NOT NULL,
    CONSTRAINT [PK_Accounts] PRIMARY KEY ([Id])
);
2023-01-12 14:26:07.5919|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Deposits] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [Period] int NOT NULL,
    [DepositSum] real NOT NULL,
    [AccountId] int NOT NULL,
    CONSTRAINT [PK_Deposits] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Deposits_Accounts_AccountId] FOREIGN KEY ([AccountId]) REFERENCES [Accounts] ([Id]) ON DELETE CASCADE
);
2023-01-12 14:26:07.6390|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (29ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] ON;
INSERT INTO [Accounts] ([Id], [Owner], [Sum])
VALUES (1, N'Gabor Andreea', CAST(2500 AS real)),
(2, N'Pavel Carmen', CAST(3200 AS real)),
(3, N'Wolf Lorena', CAST(2800 AS real));
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] OFF;
2023-01-12 14:26:07.6645|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] ON;
INSERT INTO [Deposits] ([Id], [AccountId], [DepositSum], [Name], [Period])
VALUES (1, 1, CAST(2000 AS real), N'Savings Deposit', 1),
(2, 1, CAST(500 AS real), N'Fixed Deposit', 12),
(3, 2, CAST(2200 AS real), N'Fixed Deposit', 6),
(4, 2, CAST(1000 AS real), N'Recurring Deposit', 1),
(5, 3, CAST(1200 AS real), N'Savings Deposit', 12),
(6, 3, CAST(1600 AS real), N'Current Deposit', 6);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] OFF;
2023-01-12 14:26:07.6710|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Deposits_AccountId] ON [Deposits] ([AccountId]);
2023-01-12 14:26:07.6710|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230112122455_AccountInfoDBInitialMigration', N'7.0.1');
2023-01-12 14:26:07.9602|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\z004pj3h\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-01-12 14:26:09.3848|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:57658/ - -
2023-01-12 14:26:09.5488|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:57658/ - - - 404 0 - 162.3174ms
2023-01-12 14:26:43.6578|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:57658/api/accounts/deposits application/json 37
2023-01-12 14:26:43.6578|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.AccountsController.GetAccount (Bank.API)'
2023-01-12 14:26:43.7280|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetAccount", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAccount(Int32, Boolean) on controller Bank.API.Controllers.AccountsController (Bank.API).
2023-01-12 14:26:44.0351|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2023-01-12 14:26:44.3922|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.AccountsController.GetAccount (Bank.API) in 641.2494ms
2023-01-12 14:26:44.3922|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.AccountsController.GetAccount (Bank.API)'
2023-01-12 14:26:44.4105|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:57658/api/accounts/deposits application/json 37 - 400 246 application/problem+json;+charset=utf-8 745.3898ms
2023-01-12 14:27:21.5138|INFO|Bank.API.Program|Initializing application...
2023-01-12 14:27:27.9620|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (52ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-12 14:27:28.3689|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (137ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2023-01-12 14:27:28.3887|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (17ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [AccountInfoDB];
2023-01-12 14:27:28.9413|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (471ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [AccountInfoDB];
2023-01-12 14:27:29.0534|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (109ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2023-01-12 14:27:29.0629|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-12 14:27:29.2621|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2023-01-12 14:27:29.2867|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-12 14:27:29.3506|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (47ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-01-12 14:27:29.3716|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-01-12 14:27:29.4401|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230112122455_AccountInfoDBInitialMigration'.
2023-01-12 14:27:29.6124|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Accounts] (
    [Id] int NOT NULL IDENTITY,
    [Owner] nvarchar(50) NOT NULL,
    [Sum] real NOT NULL,
    CONSTRAINT [PK_Accounts] PRIMARY KEY ([Id])
);
2023-01-12 14:27:29.6124|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Deposits] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [Period] int NOT NULL,
    [DepositSum] real NOT NULL,
    [AccountId] int NOT NULL,
    CONSTRAINT [PK_Deposits] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Deposits_Accounts_AccountId] FOREIGN KEY ([AccountId]) REFERENCES [Accounts] ([Id]) ON DELETE CASCADE
);
2023-01-12 14:27:29.6788|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (56ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] ON;
INSERT INTO [Accounts] ([Id], [Owner], [Sum])
VALUES (1, N'Gabor Andreea', CAST(2500 AS real)),
(2, N'Pavel Carmen', CAST(3200 AS real)),
(3, N'Wolf Lorena', CAST(2800 AS real));
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] OFF;
2023-01-12 14:27:29.7286|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (45ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] ON;
INSERT INTO [Deposits] ([Id], [AccountId], [DepositSum], [Name], [Period])
VALUES (1, 1, CAST(2000 AS real), N'Savings Deposit', 1),
(2, 1, CAST(500 AS real), N'Fixed Deposit', 12),
(3, 2, CAST(2200 AS real), N'Fixed Deposit', 6),
(4, 2, CAST(1000 AS real), N'Recurring Deposit', 1),
(5, 3, CAST(1200 AS real), N'Savings Deposit', 12),
(6, 3, CAST(1600 AS real), N'Current Deposit', 6);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] OFF;
2023-01-12 14:27:29.7562|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Deposits_AccountId] ON [Deposits] ([AccountId]);
2023-01-12 14:27:29.7737|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (14ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230112122455_AccountInfoDBInitialMigration', N'7.0.1');
2023-01-12 14:27:30.2042|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\z004pj3h\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-01-12 14:27:31.6579|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:57658/ - -
2023-01-12 14:27:31.8430|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:57658/ - - - 404 0 - 185.8559ms
2023-01-12 14:28:46.9307|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:57658/api/accounts application/json 37
2023-01-12 14:28:46.9611|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.AccountsController.GetAccounts (Bank.API)'
2023-01-12 14:28:47.0306|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetAccounts", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAccounts() on controller Bank.API.Controllers.AccountsController (Bank.API).
2023-01-12 14:28:48.1162|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[Owner], [a].[Sum]
FROM [Accounts] AS [a]
ORDER BY [a].[Owner]
2023-01-12 14:28:48.2510|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Bank.API.Services.Models.AccountWithoutDepositsDTO, Bank.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-01-12 14:28:48.4730|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.AccountsController.GetAccounts (Bank.API) in 1422.1544ms
2023-01-12 14:28:48.4730|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.AccountsController.GetAccounts (Bank.API)'
2023-01-12 14:28:48.5180|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:57658/api/accounts application/json 37 - 200 136 application/json;+charset=utf-8 1584.4253ms
2023-01-12 14:28:59.1366|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:57658/api/accounts/1/deposits application/json 37
2023-01-12 14:28:59.1416|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.DepositsController.GetDeposits (Bank.API)'
2023-01-12 14:28:59.2141|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetDeposits", controller = "Deposits"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetDeposits(Int32) on controller Bank.API.Controllers.DepositsController (Bank.API).
2023-01-12 14:28:59.5622|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (122ms) [Parameters=[@__accountId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Accounts] AS [a]
        WHERE [a].[Id] = @__accountId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-01-12 14:28:59.5790|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__accountId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [d].[Id], [d].[AccountId], [d].[DepositSum], [d].[Name], [d].[Period]
FROM [Deposits] AS [d]
WHERE [d].[AccountId] = @__accountId_0
2023-01-12 14:28:59.6038|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Bank.API.Services.Models.DepositDTO, Bank.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-01-12 14:28:59.6157|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.DepositsController.GetDeposits (Bank.API) in 397.8291ms
2023-01-12 14:28:59.6270|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.DepositsController.GetDeposits (Bank.API)'
2023-01-12 14:28:59.6270|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:57658/api/accounts/1/deposits application/json 37 - 200 129 application/json;+charset=utf-8 604.8963ms
2023-01-12 14:29:48.3208|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 POST https://localhost:57658/api/accounts/1/deposits application/json 100
2023-01-12 14:29:48.3275|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.DepositsController.CreateDeposit (Bank.API)'
2023-01-12 14:29:48.3275|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "CreateDeposit", controller = "Deposits"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult CreateDeposit(Int32, Bank.API.Services.Models.DepositCreationDTO) on controller Bank.API.Controllers.DepositsController (Bank.API).
2023-01-12 14:29:48.4565|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2023-01-12 14:29:48.5180|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.DepositsController.CreateDeposit (Bank.API) in 182.4105ms
2023-01-12 14:29:48.5180|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.DepositsController.CreateDeposit (Bank.API)'
2023-01-12 14:29:48.5294|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 POST https://localhost:57658/api/accounts/1/deposits application/json 100 - 400 252 application/problem+json;+charset=utf-8 209.5708ms
2023-01-12 14:30:12.2274|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 POST https://localhost:57658/api/accounts/1/deposits application/json 78
2023-01-12 14:30:12.2577|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.DepositsController.CreateDeposit (Bank.API)'
2023-01-12 14:30:12.2577|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "CreateDeposit", controller = "Deposits"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult CreateDeposit(Int32, Bank.API.Services.Models.DepositCreationDTO) on controller Bank.API.Controllers.DepositsController (Bank.API).
2023-01-12 14:30:12.2663|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2023-01-12 14:30:12.2869|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.DepositsController.CreateDeposit (Bank.API) in 6.0857ms
2023-01-12 14:30:12.3073|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.DepositsController.CreateDeposit (Bank.API)'
2023-01-12 14:30:12.3104|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 POST https://localhost:57658/api/accounts/1/deposits application/json 78 - 400 252 application/problem+json;+charset=utf-8 88.2053ms
2023-01-12 15:19:47.6103|INFO|Bank.API.Program|Initializing application...
2023-01-12 15:19:57.6273|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (66ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-12 15:19:57.9114|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (101ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2023-01-12 15:19:57.9393|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [AccountInfoDB];
2023-01-12 15:19:58.4642|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (421ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [AccountInfoDB];
2023-01-12 15:19:58.6073|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (140ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2023-01-12 15:19:58.6210|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-12 15:19:58.9262|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (28ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2023-01-12 15:19:58.9527|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (16ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-12 15:19:59.0459|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (54ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-01-12 15:19:59.0675|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-01-12 15:19:59.1284|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230112122455_AccountInfoDBInitialMigration'.
2023-01-12 15:19:59.3009|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Accounts] (
    [Id] int NOT NULL IDENTITY,
    [Owner] nvarchar(50) NOT NULL,
    [Sum] real NOT NULL,
    CONSTRAINT [PK_Accounts] PRIMARY KEY ([Id])
);
2023-01-12 15:19:59.3122|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Deposits] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [Period] int NOT NULL,
    [DepositSum] real NOT NULL,
    [AccountId] int NOT NULL,
    CONSTRAINT [PK_Deposits] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Deposits_Accounts_AccountId] FOREIGN KEY ([AccountId]) REFERENCES [Accounts] ([Id]) ON DELETE CASCADE
);
2023-01-12 15:19:59.5521|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (237ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] ON;
INSERT INTO [Accounts] ([Id], [Owner], [Sum])
VALUES (1, N'Gabor Andreea', CAST(2500 AS real)),
(2, N'Pavel Carmen', CAST(3200 AS real)),
(3, N'Wolf Lorena', CAST(2800 AS real));
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] OFF;
2023-01-12 15:19:59.5847|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (17ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] ON;
INSERT INTO [Deposits] ([Id], [AccountId], [DepositSum], [Name], [Period])
VALUES (1, 1, CAST(2000 AS real), N'Savings Deposit', 1),
(2, 1, CAST(500 AS real), N'Fixed Deposit', 12),
(3, 2, CAST(2200 AS real), N'Fixed Deposit', 6),
(4, 2, CAST(1000 AS real), N'Recurring Deposit', 1),
(5, 3, CAST(1200 AS real), N'Savings Deposit', 12),
(6, 3, CAST(1600 AS real), N'Current Deposit', 6);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] OFF;
2023-01-12 15:19:59.5989|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Deposits_AccountId] ON [Deposits] ([AccountId]);
2023-01-12 15:19:59.5989|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230112122455_AccountInfoDBInitialMigration', N'7.0.1');
2023-01-12 15:20:00.1632|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\z004pj3h\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-01-12 15:20:03.0035|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:57658/ - -
2023-01-12 15:20:03.3812|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:57658/ - - - 404 0 - 351.6481ms
2023-01-12 15:20:22.4826|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:57658/api/accounts/ application/json 78
2023-01-12 15:20:22.4899|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.AccountsController.GetAccounts (Bank.API)'
2023-01-12 15:20:22.5338|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetAccounts", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAccounts() on controller Bank.API.Controllers.AccountsController (Bank.API).
2023-01-12 15:20:23.9883|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[Owner], [a].[Sum]
FROM [Accounts] AS [a]
ORDER BY [a].[Owner]
2023-01-12 15:20:24.1528|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Bank.API.Services.Models.AccountWithoutDepositsDTO, Bank.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-01-12 15:20:24.4434|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.AccountsController.GetAccounts (Bank.API) in 1883.6106ms
2023-01-12 15:20:24.4681|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.AccountsController.GetAccounts (Bank.API)'
2023-01-12 15:20:24.5055|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:57658/api/accounts/ application/json 78 - 200 136 application/json;+charset=utf-8 2010.6363ms
2023-01-12 15:20:36.2083|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:57658/api/accounts/includedeposits=true application/json 78
2023-01-12 15:20:36.2083|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.AccountsController.GetAccount (Bank.API)'
2023-01-12 15:20:36.2393|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetAccount", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAccount(Int32, Boolean) on controller Bank.API.Controllers.AccountsController (Bank.API).
2023-01-12 15:20:36.2639|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2023-01-12 15:20:36.3469|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.AccountsController.GetAccount (Bank.API) in 78.2239ms
2023-01-12 15:20:36.4024|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.AccountsController.GetAccount (Bank.API)'
2023-01-12 15:20:36.4357|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:57658/api/accounts/includedeposits=true application/json 78 - 400 258 application/problem+json;+charset=utf-8 197.4104ms
2023-01-12 15:20:52.1901|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:57658/api/accounts/1/includeDeposits=true application/json 78
2023-01-12 15:20:52.2031|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:57658/api/accounts/1/includeDeposits=true application/json 78 - 404 0 - 3.2163ms
2023-01-12 15:21:02.0183|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:57658/api/accounts/1/includedeposits=true application/json 78
2023-01-12 15:21:02.0384|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:57658/api/accounts/1/includedeposits=true application/json 78 - 404 0 - 7.6373ms
2023-01-12 15:21:31.6965|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:57658/api/accounts/1 & includedeposits=true application/json 78
2023-01-12 15:21:31.6965|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.AccountsController.GetAccount (Bank.API)'
2023-01-12 15:21:31.7080|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetAccount", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAccount(Int32, Boolean) on controller Bank.API.Controllers.AccountsController (Bank.API).
2023-01-12 15:21:31.7080|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2023-01-12 15:21:31.7080|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.AccountsController.GetAccount (Bank.API) in 7.3127ms
2023-01-12 15:21:31.7269|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.AccountsController.GetAccount (Bank.API)'
2023-01-12 15:21:31.7269|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:57658/api/accounts/1 & includedeposits=true application/json 78 - 400 262 application/problem+json;+charset=utf-8 33.6806ms
2023-01-12 15:21:37.5330|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:57658/api/accounts/1 && includedeposits=true application/json 78
2023-01-12 15:21:37.5508|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.AccountsController.GetAccount (Bank.API)'
2023-01-12 15:21:37.5569|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetAccount", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAccount(Int32, Boolean) on controller Bank.API.Controllers.AccountsController (Bank.API).
2023-01-12 15:21:37.5569|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2023-01-12 15:21:37.6166|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.AccountsController.GetAccount (Bank.API) in 6.2128ms
2023-01-12 15:21:37.9082|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.AccountsController.GetAccount (Bank.API)'
2023-01-12 15:21:37.9828|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:57658/api/accounts/1 && includedeposits=true application/json 78 - 400 263 application/problem+json;+charset=utf-8 384.1425ms
2023-01-12 15:23:13.7519|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:57658/api/accounts/1?includedeposits=true application/json 78
2023-01-12 15:23:13.7548|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.AccountsController.GetAccount (Bank.API)'
2023-01-12 15:23:13.7548|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetAccount", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAccount(Int32, Boolean) on controller Bank.API.Controllers.AccountsController (Bank.API).
2023-01-12 15:23:14.3215|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (118ms) [Parameters=[@__accountId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Owner], [t].[Sum], [d].[Id], [d].[AccountId], [d].[DepositSum], [d].[Name], [d].[Period]
FROM (
    SELECT TOP(1) [a].[Id], [a].[Owner], [a].[Sum]
    FROM [Accounts] AS [a]
    WHERE [a].[Id] = @__accountId_0
) AS [t]
LEFT JOIN [Deposits] AS [d] ON [t].[Id] = [d].[AccountId]
ORDER BY [t].[Id]
2023-01-12 15:23:14.4069|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing OkObjectResult, writing value of type 'Bank.API.Services.Models.AccountDTO'.
2023-01-12 15:23:14.4311|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.AccountsController.GetAccount (Bank.API) in 653.896ms
2023-01-12 15:23:14.4311|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.AccountsController.GetAccount (Bank.API)'
2023-01-12 15:23:14.5009|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:57658/api/accounts/1?includedeposits=true application/json 78 - 200 207 application/json;+charset=utf-8 690.7685ms
2023-01-12 15:24:04.7042|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:57658/api/accounts/1/deposits?period=1 application/json 78
2023-01-12 15:24:04.7819|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.DepositsController.GetDeposits (Bank.API)'
2023-01-12 15:24:04.7889|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetDeposits", controller = "Deposits"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetDeposits(Int32, Int32) on controller Bank.API.Controllers.DepositsController (Bank.API).
2023-01-12 15:24:04.8320|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__accountId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Accounts] AS [a]
        WHERE [a].[Id] = @__accountId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-01-12 15:24:04.8687|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[@__accountId_0='?' (DbType = Int32), @__period_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [d].[Id], [d].[AccountId], [d].[DepositSum], [d].[Name], [d].[Period]
FROM [Deposits] AS [d]
WHERE [d].[AccountId] = @__accountId_0 AND [d].[Period] = @__period_1
2023-01-12 15:24:04.9034|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Bank.API.Services.Models.DepositDTO, Bank.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-01-12 15:24:04.9034|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.DepositsController.GetDeposits (Bank.API) in 114.6589ms
2023-01-12 15:24:04.9388|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.DepositsController.GetDeposits (Bank.API)'
2023-01-12 15:24:04.9658|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:57658/api/accounts/1/deposits?period=1 application/json 78 - 200 66 application/json;+charset=utf-8 312.0963ms
2023-01-12 15:24:09.7684|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:57658/api/accounts/1/deposits?period=12 application/json 78
2023-01-12 15:24:09.7737|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.DepositsController.GetDeposits (Bank.API)'
2023-01-12 15:24:09.8055|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetDeposits", controller = "Deposits"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetDeposits(Int32, Int32) on controller Bank.API.Controllers.DepositsController (Bank.API).
2023-01-12 15:24:09.8179|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__accountId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Accounts] AS [a]
        WHERE [a].[Id] = @__accountId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-01-12 15:24:09.8179|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (10ms) [Parameters=[@__accountId_0='?' (DbType = Int32), @__period_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [d].[Id], [d].[AccountId], [d].[DepositSum], [d].[Name], [d].[Period]
FROM [Deposits] AS [d]
WHERE [d].[AccountId] = @__accountId_0 AND [d].[Period] = @__period_1
2023-01-12 15:24:09.8548|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Bank.API.Services.Models.DepositDTO, Bank.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-01-12 15:24:09.9217|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.DepositsController.GetDeposits (Bank.API) in 49.2982ms
2023-01-12 15:24:10.2857|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.DepositsController.GetDeposits (Bank.API)'
2023-01-12 15:24:10.3082|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:57658/api/accounts/1/deposits?period=12 application/json 78 - 200 64 application/json;+charset=utf-8 520.2907ms
2023-01-12 15:24:15.3084|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:57658/api/accounts/1/deposits?period=6 application/json 78
2023-01-12 15:24:15.3205|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.DepositsController.GetDeposits (Bank.API)'
2023-01-12 15:24:15.3205|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetDeposits", controller = "Deposits"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetDeposits(Int32, Int32) on controller Bank.API.Controllers.DepositsController (Bank.API).
2023-01-12 15:24:15.3205|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__accountId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Accounts] AS [a]
        WHERE [a].[Id] = @__accountId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-01-12 15:24:15.3353|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__accountId_0='?' (DbType = Int32), @__period_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [d].[Id], [d].[AccountId], [d].[DepositSum], [d].[Name], [d].[Period]
FROM [Deposits] AS [d]
WHERE [d].[AccountId] = @__accountId_0 AND [d].[Period] = @__period_1
2023-01-12 15:24:15.3353|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Bank.API.Services.Models.DepositDTO, Bank.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-01-12 15:24:15.3776|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.DepositsController.GetDeposits (Bank.API) in 14.591ms
2023-01-12 15:24:15.4231|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.DepositsController.GetDeposits (Bank.API)'
2023-01-12 15:24:15.5866|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:57658/api/accounts/1/deposits?period=6 application/json 78 - 200 2 application/json;+charset=utf-8 122.7705ms
2023-01-12 22:15:54.2489|INFO|Bank.API.Program|Initializing application...
2023-01-12 22:16:03.1581|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (50ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-12 22:16:03.4525|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (135ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2023-01-12 22:16:03.4793|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [AccountInfoDB];
2023-01-12 22:16:03.8315|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (277ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [AccountInfoDB];
2023-01-12 22:16:03.9218|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (87ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2023-01-12 22:16:03.9318|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-12 22:16:04.1189|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2023-01-12 22:16:04.1189|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-12 22:16:04.1762|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (37ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-01-12 22:16:04.1913|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-01-12 22:16:04.2461|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230112122455_AccountInfoDBInitialMigration'.
2023-01-12 22:16:04.3666|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Accounts] (
    [Id] int NOT NULL IDENTITY,
    [Owner] nvarchar(50) NOT NULL,
    [Sum] real NOT NULL,
    CONSTRAINT [PK_Accounts] PRIMARY KEY ([Id])
);
2023-01-12 22:16:04.3666|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Deposits] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [Period] int NOT NULL,
    [DepositSum] real NOT NULL,
    [AccountId] int NOT NULL,
    CONSTRAINT [PK_Deposits] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Deposits_Accounts_AccountId] FOREIGN KEY ([AccountId]) REFERENCES [Accounts] ([Id]) ON DELETE CASCADE
);
2023-01-12 22:16:04.4225|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (46ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] ON;
INSERT INTO [Accounts] ([Id], [Owner], [Sum])
VALUES (1, N'Gabor Andreea', CAST(2500 AS real)),
(2, N'Pavel Carmen', CAST(3200 AS real)),
(3, N'Wolf Lorena', CAST(2800 AS real));
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] OFF;
2023-01-12 22:16:04.4668|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (38ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] ON;
INSERT INTO [Deposits] ([Id], [AccountId], [DepositSum], [Name], [Period])
VALUES (1, 1, CAST(2000 AS real), N'Savings Deposit', 1),
(2, 1, CAST(500 AS real), N'Fixed Deposit', 12),
(3, 2, CAST(2200 AS real), N'Fixed Deposit', 6),
(4, 2, CAST(1000 AS real), N'Recurring Deposit', 1),
(5, 3, CAST(1200 AS real), N'Savings Deposit', 12),
(6, 3, CAST(1600 AS real), N'Current Deposit', 6);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] OFF;
2023-01-12 22:16:04.4668|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Deposits_AccountId] ON [Deposits] ([AccountId]);
2023-01-12 22:16:04.4806|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230112122455_AccountInfoDBInitialMigration', N'7.0.1');
2023-01-12 22:16:04.9100|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\z004pj3h\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-01-12 22:16:06.5027|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:57658/ - -
2023-01-12 22:16:06.6667|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:57658/ - - - 404 0 - 150.8838ms
2023-01-12 22:22:03.3534|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:57658/api/accounts/1/deposits?period=6 application/json 78
2023-01-12 22:22:03.3534|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.DepositsController.GetDeposits (Bank.API)'
2023-01-12 22:22:03.4115|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetDeposits", controller = "Deposits"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetDeposits(Int32, Int32) on controller Bank.API.Controllers.DepositsController (Bank.API).
2023-01-12 22:22:04.7156|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (109ms) [Parameters=[@__accountId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Accounts] AS [a]
        WHERE [a].[Id] = @__accountId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-01-12 22:22:04.8237|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[@__accountId_0='?' (DbType = Int32), @__period_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [d].[Id], [d].[AccountId], [d].[DepositSum], [d].[Name], [d].[Period]
FROM [Deposits] AS [d]
WHERE [d].[AccountId] = @__accountId_0 AND [d].[Period] = @__period_1
2023-01-12 22:22:04.8727|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Bank.API.Services.Models.DepositDTO, Bank.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-01-12 22:22:05.0860|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.DepositsController.GetDeposits (Bank.API) in 1657.7141ms
2023-01-12 22:22:05.0860|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.DepositsController.GetDeposits (Bank.API)'
2023-01-12 22:22:05.1117|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:57658/api/accounts/1/deposits?period=6 application/json 78 - 200 2 application/json;+charset=utf-8 1757.8936ms
2023-01-12 22:22:09.7756|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:57658/api/accounts/1/deposits?period=12 application/json 78
2023-01-12 22:22:09.7756|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.DepositsController.GetDeposits (Bank.API)'
2023-01-12 22:22:09.7756|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetDeposits", controller = "Deposits"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetDeposits(Int32, Int32) on controller Bank.API.Controllers.DepositsController (Bank.API).
2023-01-12 22:22:09.8480|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@__accountId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Accounts] AS [a]
        WHERE [a].[Id] = @__accountId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-01-12 22:22:09.8525|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@__accountId_0='?' (DbType = Int32), @__period_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [d].[Id], [d].[AccountId], [d].[DepositSum], [d].[Name], [d].[Period]
FROM [Deposits] AS [d]
WHERE [d].[AccountId] = @__accountId_0 AND [d].[Period] = @__period_1
2023-01-12 22:22:09.9399|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Bank.API.Services.Models.DepositDTO, Bank.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-01-12 22:22:10.0090|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.DepositsController.GetDeposits (Bank.API) in 217.6315ms
2023-01-12 22:22:10.0626|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.DepositsController.GetDeposits (Bank.API)'
2023-01-12 22:22:10.0831|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:57658/api/accounts/1/deposits?period=12 application/json 78 - 200 64 application/json;+charset=utf-8 291.7924ms
2023-01-12 22:38:31.6400|INFO|Bank.API.Program|Initializing application...
2023-01-12 22:38:41.2542|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (66ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-12 22:38:41.4536|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2023-01-12 22:38:41.5027|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (45ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [AccountInfoDB];
2023-01-12 22:38:41.8911|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (291ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [AccountInfoDB];
2023-01-12 22:38:41.9740|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (80ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2023-01-12 22:38:41.9839|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-12 22:38:42.1691|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2023-01-12 22:38:42.1691|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-12 22:38:42.2341|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (45ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-01-12 22:38:42.2558|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-01-12 22:38:42.3112|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230112122455_AccountInfoDBInitialMigration'.
2023-01-12 22:38:42.4582|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Accounts] (
    [Id] int NOT NULL IDENTITY,
    [Owner] nvarchar(50) NOT NULL,
    [Sum] real NOT NULL,
    CONSTRAINT [PK_Accounts] PRIMARY KEY ([Id])
);
2023-01-12 22:38:42.4650|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Deposits] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [Period] int NOT NULL,
    [DepositSum] real NOT NULL,
    [AccountId] int NOT NULL,
    CONSTRAINT [PK_Deposits] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Deposits_Accounts_AccountId] FOREIGN KEY ([AccountId]) REFERENCES [Accounts] ([Id]) ON DELETE CASCADE
);
2023-01-12 22:38:42.5106|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (42ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] ON;
INSERT INTO [Accounts] ([Id], [Owner], [Sum])
VALUES (1, N'Gabor Andreea', CAST(2500 AS real)),
(2, N'Pavel Carmen', CAST(3200 AS real)),
(3, N'Wolf Lorena', CAST(2800 AS real));
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] OFF;
2023-01-12 22:38:42.5382|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] ON;
INSERT INTO [Deposits] ([Id], [AccountId], [DepositSum], [Name], [Period])
VALUES (1, 1, CAST(2000 AS real), N'Savings Deposit', 1),
(2, 1, CAST(500 AS real), N'Fixed Deposit', 12),
(3, 2, CAST(2200 AS real), N'Fixed Deposit', 6),
(4, 2, CAST(1000 AS real), N'Recurring Deposit', 1),
(5, 3, CAST(1200 AS real), N'Savings Deposit', 12),
(6, 3, CAST(1600 AS real), N'Current Deposit', 6);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] OFF;
2023-01-12 22:38:42.5461|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Deposits_AccountId] ON [Deposits] ([AccountId]);
2023-01-12 22:38:42.5461|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230112122455_AccountInfoDBInitialMigration', N'7.0.1');
2023-01-12 22:38:42.9819|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\z004pj3h\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-01-12 22:38:44.4740|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:57658/ - -
2023-01-12 22:38:44.6315|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:57658/ - - - 404 0 - 158.6758ms
2023-01-12 22:42:30.0548|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:57658/api/accounts/1 application/json 78
2023-01-12 22:42:30.0548|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.AccountsController.GetAccount (Bank.API)'
2023-01-12 22:42:30.1101|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetAccount", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAccount(Int32, Boolean) on controller Bank.API.Controllers.AccountsController (Bank.API).
2023-01-12 22:42:31.3856|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (221ms) [Parameters=[@__accountId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Owner], [a].[Sum]
FROM [Accounts] AS [a]
WHERE [a].[Id] = @__accountId_0
2023-01-12 22:42:31.5811|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing OkObjectResult, writing value of type 'Bank.API.Services.Models.AccountWithoutDepositsDTO'.
2023-01-12 22:42:31.9038|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.AccountsController.GetAccount (Bank.API) in 1778.1312ms
2023-01-12 22:42:31.9038|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.AccountsController.GetAccount (Bank.API)'
2023-01-12 22:42:31.9307|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:57658/api/accounts/1 application/json 78 - 200 45 application/json;+charset=utf-8 1875.8558ms
2023-01-12 22:42:42.8848|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:57658/api/accounts/1?includedeposits=true application/json 78
2023-01-12 22:42:42.8848|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.AccountsController.GetAccount (Bank.API)'
2023-01-12 22:42:42.8848|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetAccount", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAccount(Int32, Boolean) on controller Bank.API.Controllers.AccountsController (Bank.API).
2023-01-12 22:42:43.2604|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[@__accountId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT [t].[Id], [t].[Owner], [t].[Sum], [d].[Id], [d].[AccountId], [d].[DepositSum], [d].[Name], [d].[Period]
FROM (
    SELECT TOP(1) [a].[Id], [a].[Owner], [a].[Sum]
    FROM [Accounts] AS [a]
    WHERE [a].[Id] = @__accountId_0
) AS [t]
LEFT JOIN [Deposits] AS [d] ON [t].[Id] = [d].[AccountId]
ORDER BY [t].[Id]
2023-01-12 22:42:43.3136|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing OkObjectResult, writing value of type 'Bank.API.Services.Models.AccountDTO'.
2023-01-12 22:42:43.3416|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.AccountsController.GetAccount (Bank.API) in 443.1713ms
2023-01-12 22:42:43.3636|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.AccountsController.GetAccount (Bank.API)'
2023-01-12 22:42:43.4114|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:57658/api/accounts/1?includedeposits=true application/json 78 - 200 207 application/json;+charset=utf-8 481.9038ms
