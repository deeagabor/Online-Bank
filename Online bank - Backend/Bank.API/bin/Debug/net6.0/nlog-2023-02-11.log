2023-02-11 00:06:15.1560|INFO|Bank.API.Program|Initializing application...
2023-02-11 00:06:24.7847|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (66ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-02-11 00:06:24.9248|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2023-02-11 00:06:24.9642|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (36ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [AccountInfoDB];
2023-02-11 00:06:25.3319|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (276ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [AccountInfoDB];
2023-02-11 00:06:25.4234|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (89ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2023-02-11 00:06:25.4323|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-02-11 00:06:25.6214|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2023-02-11 00:06:25.6214|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-02-11 00:06:25.6701|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (33ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-02-11 00:06:25.6879|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-02-11 00:06:25.7406|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230112122455_AccountInfoDBInitialMigration'.
2023-02-11 00:06:25.8888|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Accounts] (
    [Id] int NOT NULL IDENTITY,
    [Owner] nvarchar(50) NOT NULL,
    [Sum] real NOT NULL,
    CONSTRAINT [PK_Accounts] PRIMARY KEY ([Id])
);
2023-02-11 00:06:25.8888|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Deposits] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [Period] int NOT NULL,
    [DepositSum] real NOT NULL,
    [AccountId] int NOT NULL,
    CONSTRAINT [PK_Deposits] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Deposits_Accounts_AccountId] FOREIGN KEY ([AccountId]) REFERENCES [Accounts] ([Id]) ON DELETE CASCADE
);
2023-02-11 00:06:25.9326|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (36ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] ON;
INSERT INTO [Accounts] ([Id], [Owner], [Sum])
VALUES (1, N'Gabor Andreea', CAST(2500 AS real)),
(2, N'Pavel Carmen', CAST(3200 AS real)),
(3, N'Wolf Lorena', CAST(2800 AS real));
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] OFF;
2023-02-11 00:06:25.9529|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (12ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] ON;
INSERT INTO [Deposits] ([Id], [AccountId], [DepositSum], [Name], [Period])
VALUES (1, 1, CAST(2000 AS real), N'Savings Deposit', 1),
(2, 1, CAST(500 AS real), N'Fixed Deposit', 12),
(3, 2, CAST(2200 AS real), N'Fixed Deposit', 6),
(4, 2, CAST(1000 AS real), N'Recurring Deposit', 1),
(5, 3, CAST(1200 AS real), N'Savings Deposit', 12),
(6, 3, CAST(1600 AS real), N'Current Deposit', 6);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] OFF;
2023-02-11 00:06:25.9529|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Deposits_AccountId] ON [Deposits] ([AccountId]);
2023-02-11 00:06:25.9529|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230112122455_AccountInfoDBInitialMigration', N'7.0.2');
2023-02-11 00:06:25.9933|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206140911_AccountInfoDBAddUsers'.
2023-02-11 00:06:26.0454|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD [UserId] int NULL;
2023-02-11 00:06:26.0454|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [Email] nvarchar(max) NOT NULL,
    [Username] nvarchar(50) NOT NULL,
    [Password] nvarchar(50) NOT NULL,
    [Admin] bit NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id])
);
2023-02-11 00:06:26.0554|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = NULL
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 00:06:26.0554|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = NULL
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 00:06:26.0554|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = NULL
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 00:06:26.0801|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (17ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Admin', N'Email', N'Name', N'Password', N'Username') AND [object_id] = OBJECT_ID(N'[Users]'))
    SET IDENTITY_INSERT [Users] ON;
INSERT INTO [Users] ([Id], [Admin], [Email], [Name], [Password], [Username])
VALUES (1, CAST(0 AS bit), N'ioanagabor@gmail.com', N'Ioana Gabor', N'1234', N'ioanagabor'),
(2, CAST(0 AS bit), N'carmen2411@gmail.com', N'Pavel Carmen', N'1234', N'pavelcarme'),
(3, CAST(1 AS bit), N'andreeagabor@gmail.com', N'Deea Gabor', N'1234', N'deeagabor');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Admin', N'Email', N'Name', N'Password', N'Username') AND [object_id] = OBJECT_ID(N'[Users]'))
    SET IDENTITY_INSERT [Users] OFF;
2023-02-11 00:06:26.0801|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Accounts_UserId] ON [Accounts] ([UserId]);
2023-02-11 00:06:26.0913|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD CONSTRAINT [FK_Accounts_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]);
2023-02-11 00:06:26.0913|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206140911_AccountInfoDBAddUsers', N'7.0.2');
2023-02-11 00:06:26.0913|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206151030_AccountInfoDBAddUserIdForAccounts'.
2023-02-11 00:06:26.1347|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] DROP CONSTRAINT [FK_Accounts_Users_UserId];
2023-02-11 00:06:26.2355|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (98ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DROP INDEX [IX_Accounts_UserId] ON [Accounts];
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Accounts]') AND [c].[name] = N'UserId');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [Accounts] DROP CONSTRAINT [' + @var0 + '];');
UPDATE [Accounts] SET [UserId] = 0 WHERE [UserId] IS NULL;
ALTER TABLE [Accounts] ALTER COLUMN [UserId] int NOT NULL;
ALTER TABLE [Accounts] ADD DEFAULT 0 FOR [UserId];
CREATE INDEX [IX_Accounts_UserId] ON [Accounts] ([UserId]);
2023-02-11 00:06:26.2404|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 1
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 00:06:26.2404|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 2
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 00:06:26.2404|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 3
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 00:06:26.2404|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD CONSTRAINT [FK_Accounts_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE;
2023-02-11 00:06:26.2404|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206151030_AccountInfoDBAddUserIdForAccounts', N'7.0.2');
2023-02-11 00:06:26.2722|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206151654_AccountInfoDBEditDatabase'.
2023-02-11 00:06:26.3051|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [Owner] = N'Gabor Ioana'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 00:06:26.3051|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [Owner] = N'Gabor Andreea'
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 00:06:26.3051|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Name] = N'Gabor Ioana'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 00:06:26.3155|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Name] = N'Gabor Andreea'
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 00:06:26.3155|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206151654_AccountInfoDBEditDatabase', N'7.0.2');
2023-02-11 00:06:26.3155|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206232605_AccountInfoDBNewEditDatabase'.
2023-02-11 00:06:26.3390|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Username] = N'pavelcarmen'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 00:06:26.3390|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206232605_AccountInfoDBNewEditDatabase', N'7.0.2');
2023-02-11 00:06:26.3447|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230207153732_AccountInfoDBAddNewAccounts'.
2023-02-11 00:06:26.3729|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [Owner] = N'Pavel Carmen', [Sum] = CAST(200 AS real), [UserId] = 2
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 00:06:26.3919|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (16ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum', N'UserId') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] ON;
INSERT INTO [Accounts] ([Id], [Owner], [Sum], [UserId])
VALUES (4, N'Gabor Ioana', CAST(2800 AS real), 2);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum', N'UserId') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] OFF;
2023-02-11 00:06:26.4554|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (43ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] ON;
INSERT INTO [Deposits] ([Id], [AccountId], [DepositSum], [Name], [Period])
VALUES (7, 4, CAST(100 AS real), N'Recurring Deposit', 6),
(8, 4, CAST(12 AS real), N'Savings Deposit', 12);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] OFF;
2023-02-11 00:06:26.4604|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230207153732_AccountInfoDBAddNewAccounts', N'7.0.2');
2023-02-11 00:06:26.4604|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230207153902_AccountInfoDBAddNewAccounts2'.
2023-02-11 00:06:26.4880|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 1
WHERE [Id] = 4;
SELECT @@ROWCOUNT;
2023-02-11 00:06:26.4911|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230207153902_AccountInfoDBAddNewAccounts2', N'7.0.2');
2023-02-11 00:06:26.4911|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230207174051_AccountInfoDBAddAttributes'.
2023-02-11 00:06:26.5142|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'12345678'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 00:06:26.5142|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'12345678'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 00:06:26.5142|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'12345678'
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 00:06:26.5142|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230207174051_AccountInfoDBAddAttributes', N'7.0.2');
2023-02-11 00:06:26.9156|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\z004pj3h\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-02-11 00:06:28.2780|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:57658/ - -
2023-02-11 00:06:28.4875|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:57658/ - - - 404 0 - 209.8217ms
2023-02-11 00:06:48.5257|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 POST https://localhost:57658/api/users application/json 139
2023-02-11 00:06:48.5257|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.UsersController.CreateUser (Bank.API)'
2023-02-11 00:06:48.6109|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "CreateUser", controller = "Users"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult CreateUser(Bank.API.Data.Models.UserCreationDTO) on controller Bank.API.Controllers.UsersController (Bank.API).
2023-02-11 00:06:49.8565|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (111ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 4000), @p2='?' (Size = 50), @p3='?' (Size = 4000), @p4='?' (Size = 50)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Admin], [Email], [Name], [Password], [Username])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2023-02-11 00:06:49.9521|ERROR|Microsoft.EntityFrameworkCore.Update|An exception occurred in the database while saving changes for context type 'Bank.API.Data.AccountInfoContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): String or binary data would be truncated in table 'AccountInfoDB.dbo.Users', column 'Password'. Truncated value: '$2a$10$gZ0YN/YVMLEcKu6kczdsVOiJLW8SJhIzNwYwX6gwygW'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSet(Int32 startCommandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:04c86838-9f70-48b7-a646-1d71026f861b
Error Number:2628,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)|Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): String or binary data would be truncated in table 'AccountInfoDB.dbo.Users', column 'Password'. Truncated value: '$2a$10$gZ0YN/YVMLEcKu6kczdsVOiJLW8SJhIzNwYwX6gwygW'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSet(Int32 startCommandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:04c86838-9f70-48b7-a646-1d71026f861b
Error Number:2628,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2023-02-11 00:06:50.1111|FATAL|Bank.API.Controllers.UsersController|Exception while creating an user!
2023-02-11 00:06:50.1389|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'System.String'.
2023-02-11 00:06:50.1607|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.UsersController.CreateUser (Bank.API) in 1530.7724ms
2023-02-11 00:06:50.1649|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.UsersController.CreateUser (Bank.API)'
2023-02-11 00:06:50.1870|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 POST https://localhost:57658/api/users application/json 139 - 500 - text/plain;+charset=utf-8 1663.5117ms
2023-02-11 00:18:37.3966|INFO|Bank.API.Program|Initializing application...
2023-02-11 00:18:44.7578|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (78ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-02-11 00:18:47.9632|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3,016ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2023-02-11 00:18:48.0006|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (34ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [AccountInfoDB];
2023-02-11 00:18:48.4579|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (339ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [AccountInfoDB];
2023-02-11 00:18:48.5677|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (107ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2023-02-11 00:18:48.5776|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-02-11 00:18:48.7081|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2023-02-11 00:18:48.7128|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-02-11 00:18:48.7814|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (57ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-02-11 00:18:48.7991|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-02-11 00:18:48.8524|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230112122455_AccountInfoDBInitialMigration'.
2023-02-11 00:18:49.0190|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Accounts] (
    [Id] int NOT NULL IDENTITY,
    [Owner] nvarchar(50) NOT NULL,
    [Sum] real NOT NULL,
    CONSTRAINT [PK_Accounts] PRIMARY KEY ([Id])
);
2023-02-11 00:18:49.0190|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Deposits] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [Period] int NOT NULL,
    [DepositSum] real NOT NULL,
    [AccountId] int NOT NULL,
    CONSTRAINT [PK_Deposits] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Deposits_Accounts_AccountId] FOREIGN KEY ([AccountId]) REFERENCES [Accounts] ([Id]) ON DELETE CASCADE
);
2023-02-11 00:18:49.1232|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (95ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] ON;
INSERT INTO [Accounts] ([Id], [Owner], [Sum])
VALUES (1, N'Gabor Andreea', CAST(2500 AS real)),
(2, N'Pavel Carmen', CAST(3200 AS real)),
(3, N'Wolf Lorena', CAST(2800 AS real));
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] OFF;
2023-02-11 00:18:49.1383|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (13ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] ON;
INSERT INTO [Deposits] ([Id], [AccountId], [DepositSum], [Name], [Period])
VALUES (1, 1, CAST(2000 AS real), N'Savings Deposit', 1),
(2, 1, CAST(500 AS real), N'Fixed Deposit', 12),
(3, 2, CAST(2200 AS real), N'Fixed Deposit', 6),
(4, 2, CAST(1000 AS real), N'Recurring Deposit', 1),
(5, 3, CAST(1200 AS real), N'Savings Deposit', 12),
(6, 3, CAST(1600 AS real), N'Current Deposit', 6);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] OFF;
2023-02-11 00:18:49.1477|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Deposits_AccountId] ON [Deposits] ([AccountId]);
2023-02-11 00:18:49.1477|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230112122455_AccountInfoDBInitialMigration', N'7.0.2');
2023-02-11 00:18:49.1863|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206140911_AccountInfoDBAddUsers'.
2023-02-11 00:18:49.2481|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD [UserId] int NULL;
2023-02-11 00:18:49.2528|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [Email] nvarchar(max) NOT NULL,
    [Username] nvarchar(50) NOT NULL,
    [Password] nvarchar(50) NOT NULL,
    [Admin] bit NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id])
);
2023-02-11 00:18:49.2528|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = NULL
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 00:18:49.2528|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = NULL
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 00:18:49.2630|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = NULL
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 00:18:49.2788|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (13ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Admin', N'Email', N'Name', N'Password', N'Username') AND [object_id] = OBJECT_ID(N'[Users]'))
    SET IDENTITY_INSERT [Users] ON;
INSERT INTO [Users] ([Id], [Admin], [Email], [Name], [Password], [Username])
VALUES (1, CAST(0 AS bit), N'ioanagabor@gmail.com', N'Ioana Gabor', N'1234', N'ioanagabor'),
(2, CAST(0 AS bit), N'carmen2411@gmail.com', N'Pavel Carmen', N'1234', N'pavelcarme'),
(3, CAST(1 AS bit), N'andreeagabor@gmail.com', N'Deea Gabor', N'1234', N'deeagabor');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Admin', N'Email', N'Name', N'Password', N'Username') AND [object_id] = OBJECT_ID(N'[Users]'))
    SET IDENTITY_INSERT [Users] OFF;
2023-02-11 00:18:49.2788|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Accounts_UserId] ON [Accounts] ([UserId]);
2023-02-11 00:18:49.2937|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD CONSTRAINT [FK_Accounts_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]);
2023-02-11 00:18:49.2937|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206140911_AccountInfoDBAddUsers', N'7.0.2');
2023-02-11 00:18:49.2937|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206151030_AccountInfoDBAddUserIdForAccounts'.
2023-02-11 00:18:49.3395|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] DROP CONSTRAINT [FK_Accounts_Users_UserId];
2023-02-11 00:18:49.4246|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (83ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DROP INDEX [IX_Accounts_UserId] ON [Accounts];
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Accounts]') AND [c].[name] = N'UserId');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [Accounts] DROP CONSTRAINT [' + @var0 + '];');
UPDATE [Accounts] SET [UserId] = 0 WHERE [UserId] IS NULL;
ALTER TABLE [Accounts] ALTER COLUMN [UserId] int NOT NULL;
ALTER TABLE [Accounts] ADD DEFAULT 0 FOR [UserId];
CREATE INDEX [IX_Accounts_UserId] ON [Accounts] ([UserId]);
2023-02-11 00:18:49.4246|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 1
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 00:18:49.4317|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 2
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 00:18:49.4317|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 3
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 00:18:49.4317|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD CONSTRAINT [FK_Accounts_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE;
2023-02-11 00:18:49.4317|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206151030_AccountInfoDBAddUserIdForAccounts', N'7.0.2');
2023-02-11 00:18:49.4317|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206151654_AccountInfoDBEditDatabase'.
2023-02-11 00:18:49.4604|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [Owner] = N'Gabor Ioana'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 00:18:49.4630|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [Owner] = N'Gabor Andreea'
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 00:18:49.4630|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Name] = N'Gabor Ioana'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 00:18:49.4630|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Name] = N'Gabor Andreea'
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 00:18:49.4630|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206151654_AccountInfoDBEditDatabase', N'7.0.2');
2023-02-11 00:18:49.4630|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206232605_AccountInfoDBNewEditDatabase'.
2023-02-11 00:18:49.4966|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Username] = N'pavelcarmen'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 00:18:49.4966|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206232605_AccountInfoDBNewEditDatabase', N'7.0.2');
2023-02-11 00:18:49.4966|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230207153732_AccountInfoDBAddNewAccounts'.
2023-02-11 00:18:49.5244|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [Owner] = N'Pavel Carmen', [Sum] = CAST(200 AS real), [UserId] = 2
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 00:18:49.5418|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (15ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum', N'UserId') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] ON;
INSERT INTO [Accounts] ([Id], [Owner], [Sum], [UserId])
VALUES (4, N'Gabor Ioana', CAST(2800 AS real), 2);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum', N'UserId') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] OFF;
2023-02-11 00:18:49.5750|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (31ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] ON;
INSERT INTO [Deposits] ([Id], [AccountId], [DepositSum], [Name], [Period])
VALUES (7, 4, CAST(100 AS real), N'Recurring Deposit', 6),
(8, 4, CAST(12 AS real), N'Savings Deposit', 12);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] OFF;
2023-02-11 00:18:49.5750|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230207153732_AccountInfoDBAddNewAccounts', N'7.0.2');
2023-02-11 00:18:49.5750|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230207153902_AccountInfoDBAddNewAccounts2'.
2023-02-11 00:18:49.6036|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 1
WHERE [Id] = 4;
SELECT @@ROWCOUNT;
2023-02-11 00:18:49.6036|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230207153902_AccountInfoDBAddNewAccounts2', N'7.0.2');
2023-02-11 00:18:49.6036|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230207174051_AccountInfoDBAddAttributes'.
2023-02-11 00:18:49.6259|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'12345678'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 00:18:49.6259|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'12345678'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 00:18:49.6259|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'12345678'
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 00:18:49.6340|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230207174051_AccountInfoDBAddAttributes', N'7.0.2');
2023-02-11 00:18:49.6340|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230210221808_AccountInfoDBModifyAttributes'.
2023-02-11 00:18:49.7027|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @var1 sysname;
SELECT @var1 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Users]') AND [c].[name] = N'Password');
IF @var1 IS NOT NULL EXEC(N'ALTER TABLE [Users] DROP CONSTRAINT [' + @var1 + '];');
ALTER TABLE [Users] ALTER COLUMN [Password] nvarchar(100) NOT NULL;
2023-02-11 00:18:49.7027|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'ef797c8118f02dfb649607dd5d3f8c7623048c9c063d532cc95c5ed7a898a64f'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 00:18:49.7115|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230210221808_AccountInfoDBModifyAttributes', N'7.0.2');
2023-02-11 00:18:49.9852|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\z004pj3h\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-02-11 00:18:57.8790|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:57658/ - -
2023-02-11 00:18:58.1393|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:57658/ - - - 404 0 - 215.1428ms
2023-02-11 00:19:57.4855|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 POST https://localhost:57658/api/users application/json 139
2023-02-11 00:19:57.4951|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.UsersController.CreateUser (Bank.API)'
2023-02-11 00:19:57.5480|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "CreateUser", controller = "Users"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult CreateUser(Bank.API.Data.Models.UserCreationDTO) on controller Bank.API.Controllers.UsersController (Bank.API).
2023-02-11 00:19:58.6955|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (60ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 4000), @p2='?' (Size = 50), @p3='?' (Size = 100), @p4='?' (Size = 50)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Admin], [Email], [Name], [Password], [Username])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2023-02-11 00:19:58.8155|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing CreatedAtRouteResult, writing value of type 'Bank.API.Data.Models.UserDTO'.
2023-02-11 00:19:59.0366|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.UsersController.CreateUser (Bank.API) in 1464.3465ms
2023-02-11 00:19:59.0393|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.UsersController.CreateUser (Bank.API)'
2023-02-11 00:19:59.0660|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 POST https://localhost:57658/api/users application/json 139 - 201 171 application/json;+charset=utf-8 1580.0986ms
2023-02-11 00:25:33.7526|INFO|Bank.API.Program|Initializing application...
2023-02-11 00:25:42.5946|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (79ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-02-11 00:25:45.7757|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3,036ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2023-02-11 00:25:45.8266|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (48ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [AccountInfoDB];
2023-02-11 00:25:46.3966|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (439ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [AccountInfoDB];
2023-02-11 00:25:46.4930|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (94ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2023-02-11 00:25:46.4930|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-02-11 00:25:46.6723|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2023-02-11 00:25:46.6723|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-02-11 00:25:46.7202|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (32ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-02-11 00:25:46.7334|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-02-11 00:25:46.7704|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230112122455_AccountInfoDBInitialMigration'.
2023-02-11 00:25:46.9211|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Accounts] (
    [Id] int NOT NULL IDENTITY,
    [Owner] nvarchar(50) NOT NULL,
    [Sum] real NOT NULL,
    CONSTRAINT [PK_Accounts] PRIMARY KEY ([Id])
);
2023-02-11 00:25:46.9211|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Deposits] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [Period] int NOT NULL,
    [DepositSum] real NOT NULL,
    [AccountId] int NOT NULL,
    CONSTRAINT [PK_Deposits] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Deposits_Accounts_AccountId] FOREIGN KEY ([AccountId]) REFERENCES [Accounts] ([Id]) ON DELETE CASCADE
);
2023-02-11 00:25:46.9675|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (39ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] ON;
INSERT INTO [Accounts] ([Id], [Owner], [Sum])
VALUES (1, N'Gabor Andreea', CAST(2500 AS real)),
(2, N'Pavel Carmen', CAST(3200 AS real)),
(3, N'Wolf Lorena', CAST(2800 AS real));
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] OFF;
2023-02-11 00:25:46.9863|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (16ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] ON;
INSERT INTO [Deposits] ([Id], [AccountId], [DepositSum], [Name], [Period])
VALUES (1, 1, CAST(2000 AS real), N'Savings Deposit', 1),
(2, 1, CAST(500 AS real), N'Fixed Deposit', 12),
(3, 2, CAST(2200 AS real), N'Fixed Deposit', 6),
(4, 2, CAST(1000 AS real), N'Recurring Deposit', 1),
(5, 3, CAST(1200 AS real), N'Savings Deposit', 12),
(6, 3, CAST(1600 AS real), N'Current Deposit', 6);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] OFF;
2023-02-11 00:25:46.9937|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Deposits_AccountId] ON [Deposits] ([AccountId]);
2023-02-11 00:25:46.9937|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230112122455_AccountInfoDBInitialMigration', N'7.0.2');
2023-02-11 00:25:47.0275|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206140911_AccountInfoDBAddUsers'.
2023-02-11 00:25:47.1259|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD [UserId] int NULL;
2023-02-11 00:25:47.1259|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [Email] nvarchar(max) NOT NULL,
    [Username] nvarchar(50) NOT NULL,
    [Password] nvarchar(50) NOT NULL,
    [Admin] bit NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id])
);
2023-02-11 00:25:47.1364|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = NULL
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 00:25:47.1364|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = NULL
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 00:25:47.1364|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = NULL
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 00:25:47.1636|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (18ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Admin', N'Email', N'Name', N'Password', N'Username') AND [object_id] = OBJECT_ID(N'[Users]'))
    SET IDENTITY_INSERT [Users] ON;
INSERT INTO [Users] ([Id], [Admin], [Email], [Name], [Password], [Username])
VALUES (1, CAST(0 AS bit), N'ioanagabor@gmail.com', N'Ioana Gabor', N'1234', N'ioanagabor'),
(2, CAST(0 AS bit), N'carmen2411@gmail.com', N'Pavel Carmen', N'1234', N'pavelcarme'),
(3, CAST(1 AS bit), N'andreeagabor@gmail.com', N'Deea Gabor', N'1234', N'deeagabor');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Admin', N'Email', N'Name', N'Password', N'Username') AND [object_id] = OBJECT_ID(N'[Users]'))
    SET IDENTITY_INSERT [Users] OFF;
2023-02-11 00:25:47.1636|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Accounts_UserId] ON [Accounts] ([UserId]);
2023-02-11 00:25:47.1636|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD CONSTRAINT [FK_Accounts_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]);
2023-02-11 00:25:47.1636|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206140911_AccountInfoDBAddUsers', N'7.0.2');
2023-02-11 00:25:47.1817|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206151030_AccountInfoDBAddUserIdForAccounts'.
2023-02-11 00:25:47.2304|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] DROP CONSTRAINT [FK_Accounts_Users_UserId];
2023-02-11 00:25:47.3216|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (89ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DROP INDEX [IX_Accounts_UserId] ON [Accounts];
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Accounts]') AND [c].[name] = N'UserId');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [Accounts] DROP CONSTRAINT [' + @var0 + '];');
UPDATE [Accounts] SET [UserId] = 0 WHERE [UserId] IS NULL;
ALTER TABLE [Accounts] ALTER COLUMN [UserId] int NOT NULL;
ALTER TABLE [Accounts] ADD DEFAULT 0 FOR [UserId];
CREATE INDEX [IX_Accounts_UserId] ON [Accounts] ([UserId]);
2023-02-11 00:25:47.3216|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 1
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 00:25:47.3216|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 2
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 00:25:47.3216|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 3
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 00:25:47.3370|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD CONSTRAINT [FK_Accounts_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE;
2023-02-11 00:25:47.3370|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206151030_AccountInfoDBAddUserIdForAccounts', N'7.0.2');
2023-02-11 00:25:47.3370|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206151654_AccountInfoDBEditDatabase'.
2023-02-11 00:25:47.3602|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [Owner] = N'Gabor Ioana'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 00:25:47.3602|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [Owner] = N'Gabor Andreea'
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 00:25:47.3671|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Name] = N'Gabor Ioana'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 00:25:47.3671|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Name] = N'Gabor Andreea'
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 00:25:47.3671|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206151654_AccountInfoDBEditDatabase', N'7.0.2');
2023-02-11 00:25:47.3671|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206232605_AccountInfoDBNewEditDatabase'.
2023-02-11 00:25:47.3940|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Username] = N'pavelcarmen'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 00:25:47.3940|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206232605_AccountInfoDBNewEditDatabase', N'7.0.2');
2023-02-11 00:25:47.3999|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230207153732_AccountInfoDBAddNewAccounts'.
2023-02-11 00:25:47.4222|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [Owner] = N'Pavel Carmen', [Sum] = CAST(200 AS real), [UserId] = 2
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 00:25:47.4350|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum', N'UserId') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] ON;
INSERT INTO [Accounts] ([Id], [Owner], [Sum], [UserId])
VALUES (4, N'Gabor Ioana', CAST(2800 AS real), 2);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum', N'UserId') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] OFF;
2023-02-11 00:25:47.4559|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (18ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] ON;
INSERT INTO [Deposits] ([Id], [AccountId], [DepositSum], [Name], [Period])
VALUES (7, 4, CAST(100 AS real), N'Recurring Deposit', 6),
(8, 4, CAST(12 AS real), N'Savings Deposit', 12);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] OFF;
2023-02-11 00:25:47.4559|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230207153732_AccountInfoDBAddNewAccounts', N'7.0.2');
2023-02-11 00:25:47.4649|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230207153902_AccountInfoDBAddNewAccounts2'.
2023-02-11 00:25:47.4926|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 1
WHERE [Id] = 4;
SELECT @@ROWCOUNT;
2023-02-11 00:25:47.4926|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230207153902_AccountInfoDBAddNewAccounts2', N'7.0.2');
2023-02-11 00:25:47.4926|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230207174051_AccountInfoDBAddAttributes'.
2023-02-11 00:25:47.5209|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'12345678'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 00:25:47.5238|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'12345678'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 00:25:47.5238|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'12345678'
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 00:25:47.5238|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230207174051_AccountInfoDBAddAttributes', N'7.0.2');
2023-02-11 00:25:47.5238|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230210221808_AccountInfoDBModifyAttributes'.
2023-02-11 00:25:47.5701|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (15ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @var1 sysname;
SELECT @var1 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Users]') AND [c].[name] = N'Password');
IF @var1 IS NOT NULL EXEC(N'ALTER TABLE [Users] DROP CONSTRAINT [' + @var1 + '];');
ALTER TABLE [Users] ALTER COLUMN [Password] nvarchar(100) NOT NULL;
2023-02-11 00:25:47.5701|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'ef797c8118f02dfb649607dd5d3f8c7623048c9c063d532cc95c5ed7a898a64f'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 00:25:47.5701|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230210221808_AccountInfoDBModifyAttributes', N'7.0.2');
2023-02-11 00:25:47.5701|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230210222506_AccountInfoDBModifyAttributesForLogin'.
2023-02-11 00:25:47.6005|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230210222506_AccountInfoDBModifyAttributesForLogin', N'7.0.2');
2023-02-11 00:25:48.0195|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\z004pj3h\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-02-11 00:25:49.7280|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:57658/ - -
2023-02-11 00:25:49.9109|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:57658/ - - - 404 0 - 189.0657ms
2023-02-11 00:26:34.7899|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:57658/api/users application/json 139
2023-02-11 00:26:34.7899|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.UsersController.GetUsers (Bank.API)'
2023-02-11 00:26:34.8450|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetUsers", controller = "Users"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUsers() on controller Bank.API.Controllers.UsersController (Bank.API).
2023-02-11 00:26:35.5561|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [u].[Id], [u].[Admin], [u].[Email], [u].[Name], [u].[Password], [u].[Username]
FROM [Users] AS [u]
2023-02-11 00:26:35.6901|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Bank.API.Data.Models.UserWithoutAccountsDTO, Bank.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-02-11 00:26:35.9424|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.UsersController.GetUsers (Bank.API) in 1083.0996ms
2023-02-11 00:26:35.9424|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.UsersController.GetUsers (Bank.API)'
2023-02-11 00:26:35.9669|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:57658/api/users application/json 139 - 200 424 application/json;+charset=utf-8 1176.7549ms
2023-02-11 00:26:44.3107|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 POST https://localhost:57658/api/users application/json 139
2023-02-11 00:26:44.3107|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.UsersController.CreateUser (Bank.API)'
2023-02-11 00:26:44.3369|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "CreateUser", controller = "Users"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult CreateUser(Bank.API.Data.Models.UserCreationDTO) on controller Bank.API.Controllers.UsersController (Bank.API).
2023-02-11 00:26:45.0530|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (98ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 4000), @p2='?' (Size = 50), @p3='?' (Size = 100), @p4='?' (Size = 50)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Admin], [Email], [Name], [Password], [Username])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2023-02-11 00:26:45.1018|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing CreatedAtRouteResult, writing value of type 'Bank.API.Data.Models.UserDTO'.
2023-02-11 00:26:45.1433|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.UsersController.CreateUser (Bank.API) in 802.3866ms
2023-02-11 00:26:45.1433|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.UsersController.CreateUser (Bank.API)'
2023-02-11 00:26:45.1495|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 POST https://localhost:57658/api/users application/json 139 - 201 171 application/json;+charset=utf-8 840.8700ms
2023-02-11 00:29:12.5861|INFO|Bank.API.Program|Initializing application...
2023-02-11 00:29:19.5724|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (42ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-02-11 00:29:19.7993|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (62ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2023-02-11 00:29:19.8190|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (17ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [AccountInfoDB];
2023-02-11 00:29:20.2417|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (313ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [AccountInfoDB];
2023-02-11 00:29:20.3541|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (110ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2023-02-11 00:29:20.3541|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-02-11 00:29:20.5638|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2023-02-11 00:29:20.5638|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-02-11 00:29:20.6365|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (52ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-02-11 00:29:20.6506|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-02-11 00:29:20.7128|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230112122455_AccountInfoDBInitialMigration'.
2023-02-11 00:29:20.8300|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Accounts] (
    [Id] int NOT NULL IDENTITY,
    [Owner] nvarchar(50) NOT NULL,
    [Sum] real NOT NULL,
    CONSTRAINT [PK_Accounts] PRIMARY KEY ([Id])
);
2023-02-11 00:29:20.8370|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Deposits] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [Period] int NOT NULL,
    [DepositSum] real NOT NULL,
    [AccountId] int NOT NULL,
    CONSTRAINT [PK_Deposits] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Deposits_Accounts_AccountId] FOREIGN KEY ([AccountId]) REFERENCES [Accounts] ([Id]) ON DELETE CASCADE
);
2023-02-11 00:29:20.9149|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (75ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] ON;
INSERT INTO [Accounts] ([Id], [Owner], [Sum])
VALUES (1, N'Gabor Andreea', CAST(2500 AS real)),
(2, N'Pavel Carmen', CAST(3200 AS real)),
(3, N'Wolf Lorena', CAST(2800 AS real));
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] OFF;
2023-02-11 00:29:20.9545|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (32ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] ON;
INSERT INTO [Deposits] ([Id], [AccountId], [DepositSum], [Name], [Period])
VALUES (1, 1, CAST(2000 AS real), N'Savings Deposit', 1),
(2, 1, CAST(500 AS real), N'Fixed Deposit', 12),
(3, 2, CAST(2200 AS real), N'Fixed Deposit', 6),
(4, 2, CAST(1000 AS real), N'Recurring Deposit', 1),
(5, 3, CAST(1200 AS real), N'Savings Deposit', 12),
(6, 3, CAST(1600 AS real), N'Current Deposit', 6);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] OFF;
2023-02-11 00:29:20.9629|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Deposits_AccountId] ON [Deposits] ([AccountId]);
2023-02-11 00:29:20.9629|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230112122455_AccountInfoDBInitialMigration', N'7.0.2');
2023-02-11 00:29:20.9951|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206140911_AccountInfoDBAddUsers'.
2023-02-11 00:29:21.0602|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD [UserId] int NULL;
2023-02-11 00:29:21.0602|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [Email] nvarchar(max) NOT NULL,
    [Username] nvarchar(50) NOT NULL,
    [Password] nvarchar(50) NOT NULL,
    [Admin] bit NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id])
);
2023-02-11 00:29:21.0602|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = NULL
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 00:29:21.0717|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = NULL
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 00:29:21.0717|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = NULL
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 00:29:21.1128|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (33ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Admin', N'Email', N'Name', N'Password', N'Username') AND [object_id] = OBJECT_ID(N'[Users]'))
    SET IDENTITY_INSERT [Users] ON;
INSERT INTO [Users] ([Id], [Admin], [Email], [Name], [Password], [Username])
VALUES (1, CAST(0 AS bit), N'ioanagabor@gmail.com', N'Ioana Gabor', N'1234', N'ioanagabor'),
(2, CAST(0 AS bit), N'carmen2411@gmail.com', N'Pavel Carmen', N'1234', N'pavelcarme'),
(3, CAST(1 AS bit), N'andreeagabor@gmail.com', N'Deea Gabor', N'1234', N'deeagabor');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Admin', N'Email', N'Name', N'Password', N'Username') AND [object_id] = OBJECT_ID(N'[Users]'))
    SET IDENTITY_INSERT [Users] OFF;
2023-02-11 00:29:21.1184|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Accounts_UserId] ON [Accounts] ([UserId]);
2023-02-11 00:29:21.1184|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD CONSTRAINT [FK_Accounts_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]);
2023-02-11 00:29:21.1184|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206140911_AccountInfoDBAddUsers', N'7.0.2');
2023-02-11 00:29:21.1326|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206151030_AccountInfoDBAddUserIdForAccounts'.
2023-02-11 00:29:21.1781|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] DROP CONSTRAINT [FK_Accounts_Users_UserId];
2023-02-11 00:29:21.2597|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (79ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DROP INDEX [IX_Accounts_UserId] ON [Accounts];
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Accounts]') AND [c].[name] = N'UserId');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [Accounts] DROP CONSTRAINT [' + @var0 + '];');
UPDATE [Accounts] SET [UserId] = 0 WHERE [UserId] IS NULL;
ALTER TABLE [Accounts] ALTER COLUMN [UserId] int NOT NULL;
ALTER TABLE [Accounts] ADD DEFAULT 0 FOR [UserId];
CREATE INDEX [IX_Accounts_UserId] ON [Accounts] ([UserId]);
2023-02-11 00:29:21.2597|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 1
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 00:29:21.2597|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 2
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 00:29:21.2597|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 3
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 00:29:21.2739|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD CONSTRAINT [FK_Accounts_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE;
2023-02-11 00:29:21.2739|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206151030_AccountInfoDBAddUserIdForAccounts', N'7.0.2');
2023-02-11 00:29:21.2739|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206151654_AccountInfoDBEditDatabase'.
2023-02-11 00:29:21.3075|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [Owner] = N'Gabor Ioana'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 00:29:21.3075|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [Owner] = N'Gabor Andreea'
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 00:29:21.3075|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Name] = N'Gabor Ioana'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 00:29:21.3238|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Name] = N'Gabor Andreea'
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 00:29:21.3238|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206151654_AccountInfoDBEditDatabase', N'7.0.2');
2023-02-11 00:29:21.3238|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206232605_AccountInfoDBNewEditDatabase'.
2023-02-11 00:29:21.3599|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Username] = N'pavelcarmen'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 00:29:21.3599|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206232605_AccountInfoDBNewEditDatabase', N'7.0.2');
2023-02-11 00:29:21.3670|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230207153732_AccountInfoDBAddNewAccounts'.
2023-02-11 00:29:21.3986|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [Owner] = N'Pavel Carmen', [Sum] = CAST(200 AS real), [UserId] = 2
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 00:29:21.4353|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (31ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum', N'UserId') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] ON;
INSERT INTO [Accounts] ([Id], [Owner], [Sum], [UserId])
VALUES (4, N'Gabor Ioana', CAST(2800 AS real), 2);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum', N'UserId') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] OFF;
2023-02-11 00:29:21.5075|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (65ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] ON;
INSERT INTO [Deposits] ([Id], [AccountId], [DepositSum], [Name], [Period])
VALUES (7, 4, CAST(100 AS real), N'Recurring Deposit', 6),
(8, 4, CAST(12 AS real), N'Savings Deposit', 12);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] OFF;
2023-02-11 00:29:21.5146|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230207153732_AccountInfoDBAddNewAccounts', N'7.0.2');
2023-02-11 00:29:21.5642|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230207153902_AccountInfoDBAddNewAccounts2'.
2023-02-11 00:29:21.5903|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 1
WHERE [Id] = 4;
SELECT @@ROWCOUNT;
2023-02-11 00:29:21.5903|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230207153902_AccountInfoDBAddNewAccounts2', N'7.0.2');
2023-02-11 00:29:21.5903|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230207174051_AccountInfoDBAddAttributes'.
2023-02-11 00:29:21.6231|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'12345678'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 00:29:21.6231|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'12345678'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 00:29:21.6231|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'12345678'
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 00:29:21.6231|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230207174051_AccountInfoDBAddAttributes', N'7.0.2');
2023-02-11 00:29:21.6357|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230210221808_AccountInfoDBModifyAttributes'.
2023-02-11 00:29:21.6884|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (29ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @var1 sysname;
SELECT @var1 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Users]') AND [c].[name] = N'Password');
IF @var1 IS NOT NULL EXEC(N'ALTER TABLE [Users] DROP CONSTRAINT [' + @var1 + '];');
ALTER TABLE [Users] ALTER COLUMN [Password] nvarchar(100) NOT NULL;
2023-02-11 00:29:21.6946|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'ef797c8118f02dfb649607dd5d3f8c7623048c9c063d532cc95c5ed7a898a64f'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 00:29:21.6946|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230210221808_AccountInfoDBModifyAttributes', N'7.0.2');
2023-02-11 00:29:21.6946|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230210222506_AccountInfoDBModifyAttributesForLogin'.
2023-02-11 00:29:21.7254|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230210222506_AccountInfoDBModifyAttributesForLogin', N'7.0.2');
2023-02-11 00:29:22.0389|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\z004pj3h\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-02-11 00:29:23.4895|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:57658/ - -
2023-02-11 00:29:23.7389|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:57658/ - - - 404 0 - 237.3640ms
2023-02-11 00:29:48.9535|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:57658/api/users application/json 139
2023-02-11 00:29:48.9636|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.UsersController.GetUsers (Bank.API)'
2023-02-11 00:29:49.0017|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetUsers", controller = "Users"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUsers() on controller Bank.API.Controllers.UsersController (Bank.API).
2023-02-11 00:29:49.8300|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [u].[Id], [u].[Admin], [u].[Email], [u].[Name], [u].[Password], [u].[Username]
FROM [Users] AS [u]
2023-02-11 00:29:49.9836|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Bank.API.Data.Models.UserWithoutAccountsDTO, Bank.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-02-11 00:29:50.1987|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.UsersController.GetUsers (Bank.API) in 1175.9389ms
2023-02-11 00:29:50.1987|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.UsersController.GetUsers (Bank.API)'
2023-02-11 00:29:50.2557|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:57658/api/users application/json 139 - 200 424 application/json;+charset=utf-8 1281.0979ms
2023-02-11 00:29:58.6715|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 POST https://localhost:57658/api/users application/json 139
2023-02-11 00:29:58.6715|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.UsersController.CreateUser (Bank.API)'
2023-02-11 00:29:58.6940|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "CreateUser", controller = "Users"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult CreateUser(Bank.API.Data.Models.UserCreationDTO) on controller Bank.API.Controllers.UsersController (Bank.API).
2023-02-11 00:29:59.4800|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (105ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 4000), @p2='?' (Size = 50), @p3='?' (Size = 100), @p4='?' (Size = 50)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Admin], [Email], [Name], [Password], [Username])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2023-02-11 00:29:59.5521|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing CreatedAtRouteResult, writing value of type 'Bank.API.Data.Models.UserDTO'.
2023-02-11 00:29:59.6348|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.UsersController.CreateUser (Bank.API) in 937.8315ms
2023-02-11 00:29:59.6348|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.UsersController.CreateUser (Bank.API)'
2023-02-11 00:29:59.6348|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 POST https://localhost:57658/api/users application/json 139 - 201 171 application/json;+charset=utf-8 968.3419ms
2023-02-11 00:30:37.6789|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 POST https://localhost:57658/api/users/login application/json 61
2023-02-11 00:30:37.6827|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint '405 HTTP Method Not Supported'
2023-02-11 00:30:37.6827|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint '405 HTTP Method Not Supported'
2023-02-11 00:30:37.6827|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 POST https://localhost:57658/api/users/login application/json 61 - 405 0 - 13.1258ms
2023-02-11 00:43:12.4182|INFO|Bank.API.Program|Initializing application...
2023-02-11 00:43:21.7906|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (43ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-02-11 00:43:21.9438|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2023-02-11 00:43:21.9736|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (28ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [AccountInfoDB];
2023-02-11 00:43:22.3058|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (222ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [AccountInfoDB];
2023-02-11 00:43:22.3962|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (88ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2023-02-11 00:43:22.4097|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-02-11 00:43:22.5471|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2023-02-11 00:43:22.5471|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-02-11 00:43:22.5932|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (31ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-02-11 00:43:22.6235|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (13ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-02-11 00:43:22.6704|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230112122455_AccountInfoDBInitialMigration'.
2023-02-11 00:43:22.7900|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Accounts] (
    [Id] int NOT NULL IDENTITY,
    [Owner] nvarchar(50) NOT NULL,
    [Sum] real NOT NULL,
    CONSTRAINT [PK_Accounts] PRIMARY KEY ([Id])
);
2023-02-11 00:43:22.7966|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Deposits] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [Period] int NOT NULL,
    [DepositSum] real NOT NULL,
    [AccountId] int NOT NULL,
    CONSTRAINT [PK_Deposits] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Deposits_Accounts_AccountId] FOREIGN KEY ([AccountId]) REFERENCES [Accounts] ([Id]) ON DELETE CASCADE
);
2023-02-11 00:43:22.8552|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (55ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] ON;
INSERT INTO [Accounts] ([Id], [Owner], [Sum])
VALUES (1, N'Gabor Andreea', CAST(2500 AS real)),
(2, N'Pavel Carmen', CAST(3200 AS real)),
(3, N'Wolf Lorena', CAST(2800 AS real));
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] OFF;
2023-02-11 00:43:22.8713|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (13ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] ON;
INSERT INTO [Deposits] ([Id], [AccountId], [DepositSum], [Name], [Period])
VALUES (1, 1, CAST(2000 AS real), N'Savings Deposit', 1),
(2, 1, CAST(500 AS real), N'Fixed Deposit', 12),
(3, 2, CAST(2200 AS real), N'Fixed Deposit', 6),
(4, 2, CAST(1000 AS real), N'Recurring Deposit', 1),
(5, 3, CAST(1200 AS real), N'Savings Deposit', 12),
(6, 3, CAST(1600 AS real), N'Current Deposit', 6);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] OFF;
2023-02-11 00:43:22.8713|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Deposits_AccountId] ON [Deposits] ([AccountId]);
2023-02-11 00:43:22.8713|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230112122455_AccountInfoDBInitialMigration', N'7.0.2');
2023-02-11 00:43:22.9012|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206140911_AccountInfoDBAddUsers'.
2023-02-11 00:43:22.9533|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD [UserId] int NULL;
2023-02-11 00:43:22.9533|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [Email] nvarchar(max) NOT NULL,
    [Username] nvarchar(50) NOT NULL,
    [Password] nvarchar(50) NOT NULL,
    [Admin] bit NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id])
);
2023-02-11 00:43:22.9533|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = NULL
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 00:43:22.9647|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = NULL
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 00:43:22.9647|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = NULL
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 00:43:22.9864|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (16ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Admin', N'Email', N'Name', N'Password', N'Username') AND [object_id] = OBJECT_ID(N'[Users]'))
    SET IDENTITY_INSERT [Users] ON;
INSERT INTO [Users] ([Id], [Admin], [Email], [Name], [Password], [Username])
VALUES (1, CAST(0 AS bit), N'ioanagabor@gmail.com', N'Ioana Gabor', N'1234', N'ioanagabor'),
(2, CAST(0 AS bit), N'carmen2411@gmail.com', N'Pavel Carmen', N'1234', N'pavelcarme'),
(3, CAST(1 AS bit), N'andreeagabor@gmail.com', N'Deea Gabor', N'1234', N'deeagabor');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Admin', N'Email', N'Name', N'Password', N'Username') AND [object_id] = OBJECT_ID(N'[Users]'))
    SET IDENTITY_INSERT [Users] OFF;
2023-02-11 00:43:22.9864|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Accounts_UserId] ON [Accounts] ([UserId]);
2023-02-11 00:43:22.9993|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD CONSTRAINT [FK_Accounts_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]);
2023-02-11 00:43:22.9993|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206140911_AccountInfoDBAddUsers', N'7.0.2');
2023-02-11 00:43:23.0157|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206151030_AccountInfoDBAddUserIdForAccounts'.
2023-02-11 00:43:23.0798|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] DROP CONSTRAINT [FK_Accounts_Users_UserId];
2023-02-11 00:43:23.2281|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (146ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DROP INDEX [IX_Accounts_UserId] ON [Accounts];
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Accounts]') AND [c].[name] = N'UserId');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [Accounts] DROP CONSTRAINT [' + @var0 + '];');
UPDATE [Accounts] SET [UserId] = 0 WHERE [UserId] IS NULL;
ALTER TABLE [Accounts] ALTER COLUMN [UserId] int NOT NULL;
ALTER TABLE [Accounts] ADD DEFAULT 0 FOR [UserId];
CREATE INDEX [IX_Accounts_UserId] ON [Accounts] ([UserId]);
2023-02-11 00:43:23.2281|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 1
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 00:43:23.2281|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 2
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 00:43:23.2281|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 3
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 00:43:23.2438|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD CONSTRAINT [FK_Accounts_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE;
2023-02-11 00:43:23.2438|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206151030_AccountInfoDBAddUserIdForAccounts', N'7.0.2');
2023-02-11 00:43:23.2438|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206151654_AccountInfoDBEditDatabase'.
2023-02-11 00:43:23.2678|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [Owner] = N'Gabor Ioana'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 00:43:23.2678|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [Owner] = N'Gabor Andreea'
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 00:43:23.2678|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Name] = N'Gabor Ioana'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 00:43:23.2678|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Name] = N'Gabor Andreea'
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 00:43:23.2678|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206151654_AccountInfoDBEditDatabase', N'7.0.2');
2023-02-11 00:43:23.2678|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206232605_AccountInfoDBNewEditDatabase'.
2023-02-11 00:43:23.3038|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Username] = N'pavelcarmen'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 00:43:23.3038|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206232605_AccountInfoDBNewEditDatabase', N'7.0.2');
2023-02-11 00:43:23.3038|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230207153732_AccountInfoDBAddNewAccounts'.
2023-02-11 00:43:23.3406|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [Owner] = N'Pavel Carmen', [Sum] = CAST(200 AS real), [UserId] = 2
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 00:43:23.3618|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (17ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum', N'UserId') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] ON;
INSERT INTO [Accounts] ([Id], [Owner], [Sum], [UserId])
VALUES (4, N'Gabor Ioana', CAST(2800 AS real), 2);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum', N'UserId') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] OFF;
2023-02-11 00:43:23.3833|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] ON;
INSERT INTO [Deposits] ([Id], [AccountId], [DepositSum], [Name], [Period])
VALUES (7, 4, CAST(100 AS real), N'Recurring Deposit', 6),
(8, 4, CAST(12 AS real), N'Savings Deposit', 12);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] OFF;
2023-02-11 00:43:23.3833|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230207153732_AccountInfoDBAddNewAccounts', N'7.0.2');
2023-02-11 00:43:23.3833|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230207153902_AccountInfoDBAddNewAccounts2'.
2023-02-11 00:43:23.4151|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 1
WHERE [Id] = 4;
SELECT @@ROWCOUNT;
2023-02-11 00:43:23.4434|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230207153902_AccountInfoDBAddNewAccounts2', N'7.0.2');
2023-02-11 00:43:23.4474|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230207174051_AccountInfoDBAddAttributes'.
2023-02-11 00:43:23.4701|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'12345678'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 00:43:23.4701|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'12345678'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 00:43:23.4701|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'12345678'
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 00:43:23.4787|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230207174051_AccountInfoDBAddAttributes', N'7.0.2');
2023-02-11 00:43:23.4787|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230210221808_AccountInfoDBModifyAttributes'.
2023-02-11 00:43:23.5232|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @var1 sysname;
SELECT @var1 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Users]') AND [c].[name] = N'Password');
IF @var1 IS NOT NULL EXEC(N'ALTER TABLE [Users] DROP CONSTRAINT [' + @var1 + '];');
ALTER TABLE [Users] ALTER COLUMN [Password] nvarchar(100) NOT NULL;
2023-02-11 00:43:23.5232|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'ef797c8118f02dfb649607dd5d3f8c7623048c9c063d532cc95c5ed7a898a64f'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 00:43:23.5232|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230210221808_AccountInfoDBModifyAttributes', N'7.0.2');
2023-02-11 00:43:23.5232|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230210222506_AccountInfoDBModifyAttributesForLogin'.
2023-02-11 00:43:23.5476|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230210222506_AccountInfoDBModifyAttributesForLogin', N'7.0.2');
2023-02-11 00:43:23.8855|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\z004pj3h\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-02-11 00:43:25.7764|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:57658/ - -
2023-02-11 00:43:25.9787|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:57658/ - - - 404 0 - 220.9685ms
2023-02-11 00:43:39.7676|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:57658/api/users application/json 61
2023-02-11 00:43:39.7769|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.UsersController.GetUsers (Bank.API)'
2023-02-11 00:43:39.8179|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetUsers", controller = "Users"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUsers() on controller Bank.API.Controllers.UsersController (Bank.API).
2023-02-11 00:43:40.5382|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [u].[Id], [u].[Admin], [u].[Email], [u].[Name], [u].[Password], [u].[Username]
FROM [Users] AS [u]
2023-02-11 00:43:40.6604|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Bank.API.Data.Models.UserWithoutAccountsDTO, Bank.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-02-11 00:43:40.9031|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.UsersController.GetUsers (Bank.API) in 1066.0129ms
2023-02-11 00:43:40.9031|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.UsersController.GetUsers (Bank.API)'
2023-02-11 00:43:40.9285|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:57658/api/users application/json 61 - 200 424 application/json;+charset=utf-8 1161.1819ms
2023-02-11 00:43:55.2155|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 POST https://localhost:57658/api/users application/json 139
2023-02-11 00:43:55.2155|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.UsersController.CreateUser (Bank.API)'
2023-02-11 00:43:55.2481|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "CreateUser", controller = "Users"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult CreateUser(Bank.API.Data.Models.UserCreationDTO) on controller Bank.API.Controllers.UsersController (Bank.API).
2023-02-11 00:43:55.9619|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (98ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 4000), @p2='?' (Size = 50), @p3='?' (Size = 100), @p4='?' (Size = 50)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Admin], [Email], [Name], [Password], [Username])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2023-02-11 00:43:56.0131|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing CreatedAtRouteResult, writing value of type 'Bank.API.Data.Models.UserDTO'.
2023-02-11 00:43:56.0678|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.UsersController.CreateUser (Bank.API) in 815.6994ms
2023-02-11 00:43:56.0710|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.UsersController.CreateUser (Bank.API)'
2023-02-11 00:43:56.1029|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 POST https://localhost:57658/api/users application/json 139 - 201 171 application/json;+charset=utf-8 858.9071ms
2023-02-11 00:44:06.3114|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:57658/api/users/4 application/json 139
2023-02-11 00:44:06.3114|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.UsersController.GetUser (Bank.API)'
2023-02-11 00:44:06.3214|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetUser", controller = "Users"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUser(Int32, Boolean) on controller Bank.API.Controllers.UsersController (Bank.API).
2023-02-11 00:44:06.6970|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Admin], [u].[Email], [u].[Name], [u].[Password], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Id] = @__userId_0
2023-02-11 00:44:06.6970|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Admin], [u].[Email], [u].[Name], [u].[Password], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Id] = @__userId_0
2023-02-11 00:44:06.6970|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing OkObjectResult, writing value of type 'Bank.API.Data.Models.UserWithoutAccountsDTO'.
2023-02-11 00:44:06.7123|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.UsersController.GetUser (Bank.API) in 388.2535ms
2023-02-11 00:44:06.7123|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.UsersController.GetUser (Bank.API)'
2023-02-11 00:44:06.7123|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:57658/api/users/4 application/json 139 - 200 157 application/json;+charset=utf-8 416.9909ms
2023-02-11 00:44:27.2068|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 POST https://localhost:57658/api/login application/json 61
2023-02-11 00:44:27.2068|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.LoginController.Login (Bank.API)'
2023-02-11 00:44:27.2131|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Login", controller = "Login"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(Bank.API.Data.Models.LoginRequest) on controller Bank.API.Controllers.LoginController (Bank.API).
2023-02-11 00:44:27.3290|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[@__request_Username_0='?' (Size = 50), @__request_Password_1='?' (Size = 100)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Admin], [u].[Email], [u].[Name], [u].[Password], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__request_Username_0 AND [u].[Password] = @__request_Password_1
2023-02-11 00:44:27.3421|INFO|Bank.API.Controllers.LoginController|User wasn't found!
2023-02-11 00:44:27.3421|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2023-02-11 00:44:27.3818|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.LoginController.Login (Bank.API) in 161.7091ms
2023-02-11 00:44:27.3902|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.LoginController.Login (Bank.API)'
2023-02-11 00:44:27.3902|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 POST https://localhost:57658/api/login application/json 61 - 404 161 application/problem+json;+charset=utf-8 186.3801ms
2023-02-11 00:44:38.3396|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 POST https://localhost:57658/api/login application/json 61
2023-02-11 00:44:38.3396|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.LoginController.Login (Bank.API)'
2023-02-11 00:44:38.3396|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Login", controller = "Login"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(Bank.API.Data.Models.LoginRequest) on controller Bank.API.Controllers.LoginController (Bank.API).
2023-02-11 00:44:38.4605|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@__request_Username_0='?' (Size = 50), @__request_Password_1='?' (Size = 100)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Admin], [u].[Email], [u].[Name], [u].[Password], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__request_Username_0 AND [u].[Password] = @__request_Password_1
2023-02-11 00:44:38.4627|INFO|Bank.API.Controllers.LoginController|User wasn't found!
2023-02-11 00:44:38.4627|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2023-02-11 00:44:38.4627|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.LoginController.Login (Bank.API) in 121.2898ms
2023-02-11 00:44:38.4627|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.LoginController.Login (Bank.API)'
2023-02-11 00:44:38.4627|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 POST https://localhost:57658/api/login application/json 61 - 404 161 application/problem+json;+charset=utf-8 136.7803ms
2023-02-11 00:57:56.8882|INFO|Bank.API.Program|Initializing application...
2023-02-11 00:58:05.5642|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (64ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-02-11 00:58:08.7665|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3,057ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2023-02-11 00:58:08.8128|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (38ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [AccountInfoDB];
2023-02-11 00:58:09.2035|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (272ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [AccountInfoDB];
2023-02-11 00:58:09.3027|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (95ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2023-02-11 00:58:09.3118|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-02-11 00:58:09.4521|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2023-02-11 00:58:09.4521|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-02-11 00:58:09.5246|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (53ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-02-11 00:58:09.5441|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-02-11 00:58:09.5929|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230112122455_AccountInfoDBInitialMigration'.
2023-02-11 00:58:09.7298|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Accounts] (
    [Id] int NOT NULL IDENTITY,
    [Owner] nvarchar(50) NOT NULL,
    [Sum] real NOT NULL,
    CONSTRAINT [PK_Accounts] PRIMARY KEY ([Id])
);
2023-02-11 00:58:09.7298|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Deposits] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [Period] int NOT NULL,
    [DepositSum] real NOT NULL,
    [AccountId] int NOT NULL,
    CONSTRAINT [PK_Deposits] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Deposits_Accounts_AccountId] FOREIGN KEY ([AccountId]) REFERENCES [Accounts] ([Id]) ON DELETE CASCADE
);
2023-02-11 00:58:09.7661|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (28ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] ON;
INSERT INTO [Accounts] ([Id], [Owner], [Sum])
VALUES (1, N'Gabor Andreea', CAST(2500 AS real)),
(2, N'Pavel Carmen', CAST(3200 AS real)),
(3, N'Wolf Lorena', CAST(2800 AS real));
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] OFF;
2023-02-11 00:58:09.7810|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (13ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] ON;
INSERT INTO [Deposits] ([Id], [AccountId], [DepositSum], [Name], [Period])
VALUES (1, 1, CAST(2000 AS real), N'Savings Deposit', 1),
(2, 1, CAST(500 AS real), N'Fixed Deposit', 12),
(3, 2, CAST(2200 AS real), N'Fixed Deposit', 6),
(4, 2, CAST(1000 AS real), N'Recurring Deposit', 1),
(5, 3, CAST(1200 AS real), N'Savings Deposit', 12),
(6, 3, CAST(1600 AS real), N'Current Deposit', 6);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] OFF;
2023-02-11 00:58:09.7810|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Deposits_AccountId] ON [Deposits] ([AccountId]);
2023-02-11 00:58:09.7810|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230112122455_AccountInfoDBInitialMigration', N'7.0.2');
2023-02-11 00:58:09.8069|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206140911_AccountInfoDBAddUsers'.
2023-02-11 00:58:09.8462|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD [UserId] int NULL;
2023-02-11 00:58:09.8462|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [Email] nvarchar(max) NOT NULL,
    [Username] nvarchar(50) NOT NULL,
    [Password] nvarchar(50) NOT NULL,
    [Admin] bit NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id])
);
2023-02-11 00:58:09.8462|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = NULL
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 00:58:09.8462|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = NULL
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 00:58:09.8604|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = NULL
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 00:58:09.8748|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Admin', N'Email', N'Name', N'Password', N'Username') AND [object_id] = OBJECT_ID(N'[Users]'))
    SET IDENTITY_INSERT [Users] ON;
INSERT INTO [Users] ([Id], [Admin], [Email], [Name], [Password], [Username])
VALUES (1, CAST(0 AS bit), N'ioanagabor@gmail.com', N'Ioana Gabor', N'1234', N'ioanagabor'),
(2, CAST(0 AS bit), N'carmen2411@gmail.com', N'Pavel Carmen', N'1234', N'pavelcarme'),
(3, CAST(1 AS bit), N'andreeagabor@gmail.com', N'Deea Gabor', N'1234', N'deeagabor');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Admin', N'Email', N'Name', N'Password', N'Username') AND [object_id] = OBJECT_ID(N'[Users]'))
    SET IDENTITY_INSERT [Users] OFF;
2023-02-11 00:58:09.8909|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Accounts_UserId] ON [Accounts] ([UserId]);
2023-02-11 00:58:09.9169|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (15ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD CONSTRAINT [FK_Accounts_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]);
2023-02-11 00:58:09.9169|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206140911_AccountInfoDBAddUsers', N'7.0.2');
2023-02-11 00:58:09.9169|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206151030_AccountInfoDBAddUserIdForAccounts'.
2023-02-11 00:58:09.9860|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] DROP CONSTRAINT [FK_Accounts_Users_UserId];
2023-02-11 00:58:10.0626|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (74ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DROP INDEX [IX_Accounts_UserId] ON [Accounts];
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Accounts]') AND [c].[name] = N'UserId');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [Accounts] DROP CONSTRAINT [' + @var0 + '];');
UPDATE [Accounts] SET [UserId] = 0 WHERE [UserId] IS NULL;
ALTER TABLE [Accounts] ALTER COLUMN [UserId] int NOT NULL;
ALTER TABLE [Accounts] ADD DEFAULT 0 FOR [UserId];
CREATE INDEX [IX_Accounts_UserId] ON [Accounts] ([UserId]);
2023-02-11 00:58:10.0626|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 1
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 00:58:10.0626|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 2
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 00:58:10.0733|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 3
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 00:58:10.0733|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD CONSTRAINT [FK_Accounts_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE;
2023-02-11 00:58:10.0733|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206151030_AccountInfoDBAddUserIdForAccounts', N'7.0.2');
2023-02-11 00:58:10.0733|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206151654_AccountInfoDBEditDatabase'.
2023-02-11 00:58:10.1068|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [Owner] = N'Gabor Ioana'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 00:58:10.1068|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [Owner] = N'Gabor Andreea'
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 00:58:10.1200|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Name] = N'Gabor Ioana'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 00:58:10.1200|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Name] = N'Gabor Andreea'
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 00:58:10.1200|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206151654_AccountInfoDBEditDatabase', N'7.0.2');
2023-02-11 00:58:10.1355|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206232605_AccountInfoDBNewEditDatabase'.
2023-02-11 00:58:10.1556|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Username] = N'pavelcarmen'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 00:58:10.1556|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206232605_AccountInfoDBNewEditDatabase', N'7.0.2');
2023-02-11 00:58:10.1556|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230207153732_AccountInfoDBAddNewAccounts'.
2023-02-11 00:58:10.1925|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [Owner] = N'Pavel Carmen', [Sum] = CAST(200 AS real), [UserId] = 2
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 00:58:10.1925|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum', N'UserId') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] ON;
INSERT INTO [Accounts] ([Id], [Owner], [Sum], [UserId])
VALUES (4, N'Gabor Ioana', CAST(2800 AS real), 2);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum', N'UserId') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] OFF;
2023-02-11 00:58:10.2208|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (13ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] ON;
INSERT INTO [Deposits] ([Id], [AccountId], [DepositSum], [Name], [Period])
VALUES (7, 4, CAST(100 AS real), N'Recurring Deposit', 6),
(8, 4, CAST(12 AS real), N'Savings Deposit', 12);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] OFF;
2023-02-11 00:58:10.2208|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230207153732_AccountInfoDBAddNewAccounts', N'7.0.2');
2023-02-11 00:58:10.2267|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230207153902_AccountInfoDBAddNewAccounts2'.
2023-02-11 00:58:10.2437|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 1
WHERE [Id] = 4;
SELECT @@ROWCOUNT;
2023-02-11 00:58:10.2437|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230207153902_AccountInfoDBAddNewAccounts2', N'7.0.2');
2023-02-11 00:58:10.2437|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230207174051_AccountInfoDBAddAttributes'.
2023-02-11 00:58:10.2679|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'12345678'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 00:58:10.2679|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'12345678'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 00:58:10.2739|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'12345678'
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 00:58:10.2739|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230207174051_AccountInfoDBAddAttributes', N'7.0.2');
2023-02-11 00:58:10.2739|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230210221808_AccountInfoDBModifyAttributes'.
2023-02-11 00:58:10.3245|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (27ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @var1 sysname;
SELECT @var1 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Users]') AND [c].[name] = N'Password');
IF @var1 IS NOT NULL EXEC(N'ALTER TABLE [Users] DROP CONSTRAINT [' + @var1 + '];');
ALTER TABLE [Users] ALTER COLUMN [Password] nvarchar(100) NOT NULL;
2023-02-11 00:58:10.3245|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'ef797c8118f02dfb649607dd5d3f8c7623048c9c063d532cc95c5ed7a898a64f'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 00:58:10.3245|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230210221808_AccountInfoDBModifyAttributes', N'7.0.2');
2023-02-11 00:58:10.3396|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230210222506_AccountInfoDBModifyAttributesForLogin'.
2023-02-11 00:58:10.3603|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230210222506_AccountInfoDBModifyAttributesForLogin', N'7.0.2');
2023-02-11 00:58:10.7556|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\z004pj3h\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-02-11 00:58:12.1602|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:57658/ - -
2023-02-11 00:58:12.3783|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:57658/ - - - 404 0 - 170.1290ms
2023-02-11 00:58:46.1686|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:57658/api/users application/json 61
2023-02-11 00:58:46.1686|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.UsersController.GetUsers (Bank.API)'
2023-02-11 00:58:46.2181|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetUsers", controller = "Users"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUsers() on controller Bank.API.Controllers.UsersController (Bank.API).
2023-02-11 00:58:47.0218|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [u].[Id], [u].[Admin], [u].[Email], [u].[Name], [u].[Password], [u].[Username]
FROM [Users] AS [u]
2023-02-11 00:58:47.1395|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Bank.API.Data.Models.UserWithoutAccountsDTO, Bank.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-02-11 00:58:47.3416|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.UsersController.GetUsers (Bank.API) in 1107.0667ms
2023-02-11 00:58:47.3416|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.UsersController.GetUsers (Bank.API)'
2023-02-11 00:58:47.3658|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:57658/api/users application/json 61 - 200 424 application/json;+charset=utf-8 1197.0010ms
2023-02-11 00:58:55.5666|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 POST https://localhost:57658/api/users application/json 139
2023-02-11 00:58:55.5666|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.UsersController.CreateUser (Bank.API)'
2023-02-11 00:58:55.5909|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "CreateUser", controller = "Users"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult CreateUser(Bank.API.Data.Models.UserCreationDTO) on controller Bank.API.Controllers.UsersController (Bank.API).
2023-02-11 00:58:56.2495|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (122ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 4000), @p2='?' (Size = 50), @p3='?' (Size = 100), @p4='?' (Size = 50)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Admin], [Email], [Name], [Password], [Username])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2023-02-11 00:58:56.3338|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing CreatedAtRouteResult, writing value of type 'Bank.API.Data.Models.UserDTO'.
2023-02-11 00:58:56.3808|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.UsersController.CreateUser (Bank.API) in 787.4144ms
2023-02-11 00:58:56.3841|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.UsersController.CreateUser (Bank.API)'
2023-02-11 00:58:56.3841|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 POST https://localhost:57658/api/users application/json 139 - 201 171 application/json;+charset=utf-8 821.4667ms
2023-02-11 00:59:04.3647|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:57658/api/users/4 application/json 139
2023-02-11 00:59:04.3647|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.UsersController.GetUser (Bank.API)'
2023-02-11 00:59:04.3734|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetUser", controller = "Users"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUser(Int32, Boolean) on controller Bank.API.Controllers.UsersController (Bank.API).
2023-02-11 00:59:04.7083|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Admin], [u].[Email], [u].[Name], [u].[Password], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Id] = @__userId_0
2023-02-11 00:59:04.7147|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Admin], [u].[Email], [u].[Name], [u].[Password], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Id] = @__userId_0
2023-02-11 00:59:04.7147|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing OkObjectResult, writing value of type 'Bank.API.Data.Models.UserWithoutAccountsDTO'.
2023-02-11 00:59:04.7147|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.UsersController.GetUser (Bank.API) in 345.9961ms
2023-02-11 00:59:04.7147|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.UsersController.GetUser (Bank.API)'
2023-02-11 00:59:04.7295|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:57658/api/users/4 application/json 139 - 200 157 application/json;+charset=utf-8 364.2635ms
2023-02-11 00:59:23.9611|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 POST https://localhost:57658/api/login application/json 63
2023-02-11 00:59:23.9657|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.LoginController.Login (Bank.API)'
2023-02-11 00:59:23.9657|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Login", controller = "Login"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(Bank.API.Data.Models.LoginRequest) on controller Bank.API.Controllers.LoginController (Bank.API).
2023-02-11 00:59:24.2012|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (31ms) [Parameters=[@__request_Username_0='?' (Size = 50), @__request_Password_1='?' (Size = 100)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Admin], [u].[Email], [u].[Name], [u].[Password], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__request_Username_0 AND [u].[Password] = @__request_Password_1
2023-02-11 00:59:24.2270|INFO|Bank.API.Controllers.LoginController|User wasn't found!
2023-02-11 00:59:24.2270|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2023-02-11 00:59:24.2651|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.LoginController.Login (Bank.API) in 286.7226ms
2023-02-11 00:59:24.2651|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.LoginController.Login (Bank.API)'
2023-02-11 00:59:24.2651|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 POST https://localhost:57658/api/login application/json 63 - 404 161 application/problem+json;+charset=utf-8 314.2562ms
2023-02-11 01:16:44.0548|INFO|Bank.API.Program|Initializing application...
2023-02-11 01:16:53.2403|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (75ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-02-11 01:16:53.5834|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (132ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2023-02-11 01:16:53.6110|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [AccountInfoDB];
2023-02-11 01:16:54.0457|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (325ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [AccountInfoDB];
2023-02-11 01:16:54.1218|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (73ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2023-02-11 01:16:54.1411|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-02-11 01:16:54.2896|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2023-02-11 01:16:54.2896|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-02-11 01:16:54.3469|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (41ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-02-11 01:16:54.3626|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-02-11 01:16:54.4248|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230112122455_AccountInfoDBInitialMigration'.
2023-02-11 01:16:54.6393|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Accounts] (
    [Id] int NOT NULL IDENTITY,
    [Owner] nvarchar(50) NOT NULL,
    [Sum] real NOT NULL,
    CONSTRAINT [PK_Accounts] PRIMARY KEY ([Id])
);
2023-02-11 01:16:54.6533|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Deposits] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [Period] int NOT NULL,
    [DepositSum] real NOT NULL,
    [AccountId] int NOT NULL,
    CONSTRAINT [PK_Deposits] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Deposits_Accounts_AccountId] FOREIGN KEY ([AccountId]) REFERENCES [Accounts] ([Id]) ON DELETE CASCADE
);
2023-02-11 01:16:54.7202|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (64ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] ON;
INSERT INTO [Accounts] ([Id], [Owner], [Sum])
VALUES (1, N'Gabor Andreea', CAST(2500 AS real)),
(2, N'Pavel Carmen', CAST(3200 AS real)),
(3, N'Wolf Lorena', CAST(2800 AS real));
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] OFF;
2023-02-11 01:16:54.7547|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (29ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] ON;
INSERT INTO [Deposits] ([Id], [AccountId], [DepositSum], [Name], [Period])
VALUES (1, 1, CAST(2000 AS real), N'Savings Deposit', 1),
(2, 1, CAST(500 AS real), N'Fixed Deposit', 12),
(3, 2, CAST(2200 AS real), N'Fixed Deposit', 6),
(4, 2, CAST(1000 AS real), N'Recurring Deposit', 1),
(5, 3, CAST(1200 AS real), N'Savings Deposit', 12),
(6, 3, CAST(1600 AS real), N'Current Deposit', 6);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] OFF;
2023-02-11 01:16:54.7674|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Deposits_AccountId] ON [Deposits] ([AccountId]);
2023-02-11 01:16:54.7761|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230112122455_AccountInfoDBInitialMigration', N'7.0.2');
2023-02-11 01:16:54.8075|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206140911_AccountInfoDBAddUsers'.
2023-02-11 01:16:54.8506|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD [UserId] int NULL;
2023-02-11 01:16:54.8540|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [Email] nvarchar(max) NOT NULL,
    [Username] nvarchar(50) NOT NULL,
    [Password] nvarchar(50) NOT NULL,
    [Admin] bit NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id])
);
2023-02-11 01:16:54.8540|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = NULL
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 01:16:54.8540|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = NULL
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 01:16:54.8540|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = NULL
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 01:16:54.8540|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Admin', N'Email', N'Name', N'Password', N'Username') AND [object_id] = OBJECT_ID(N'[Users]'))
    SET IDENTITY_INSERT [Users] ON;
INSERT INTO [Users] ([Id], [Admin], [Email], [Name], [Password], [Username])
VALUES (1, CAST(0 AS bit), N'ioanagabor@gmail.com', N'Ioana Gabor', N'1234', N'ioanagabor'),
(2, CAST(0 AS bit), N'carmen2411@gmail.com', N'Pavel Carmen', N'1234', N'pavelcarme'),
(3, CAST(1 AS bit), N'andreeagabor@gmail.com', N'Deea Gabor', N'1234', N'deeagabor');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Admin', N'Email', N'Name', N'Password', N'Username') AND [object_id] = OBJECT_ID(N'[Users]'))
    SET IDENTITY_INSERT [Users] OFF;
2023-02-11 01:16:54.8815|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Accounts_UserId] ON [Accounts] ([UserId]);
2023-02-11 01:16:54.8815|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD CONSTRAINT [FK_Accounts_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]);
2023-02-11 01:16:54.8815|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206140911_AccountInfoDBAddUsers', N'7.0.2');
2023-02-11 01:16:54.8815|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206151030_AccountInfoDBAddUserIdForAccounts'.
2023-02-11 01:16:54.9517|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] DROP CONSTRAINT [FK_Accounts_Users_UserId];
2023-02-11 01:16:55.2932|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (337ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DROP INDEX [IX_Accounts_UserId] ON [Accounts];
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Accounts]') AND [c].[name] = N'UserId');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [Accounts] DROP CONSTRAINT [' + @var0 + '];');
UPDATE [Accounts] SET [UserId] = 0 WHERE [UserId] IS NULL;
ALTER TABLE [Accounts] ALTER COLUMN [UserId] int NOT NULL;
ALTER TABLE [Accounts] ADD DEFAULT 0 FOR [UserId];
CREATE INDEX [IX_Accounts_UserId] ON [Accounts] ([UserId]);
2023-02-11 01:16:55.2932|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 1
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 01:16:55.3055|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 2
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 01:16:55.3055|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 3
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 01:16:55.3055|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD CONSTRAINT [FK_Accounts_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE;
2023-02-11 01:16:55.3240|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206151030_AccountInfoDBAddUserIdForAccounts', N'7.0.2');
2023-02-11 01:16:55.3240|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206151654_AccountInfoDBEditDatabase'.
2023-02-11 01:16:55.3545|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [Owner] = N'Gabor Ioana'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 01:16:55.3545|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [Owner] = N'Gabor Andreea'
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 01:16:55.3545|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Name] = N'Gabor Ioana'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 01:16:55.3545|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Name] = N'Gabor Andreea'
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 01:16:55.3545|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206151654_AccountInfoDBEditDatabase', N'7.0.2');
2023-02-11 01:16:55.3712|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206232605_AccountInfoDBNewEditDatabase'.
2023-02-11 01:16:55.4003|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Username] = N'pavelcarmen'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 01:16:55.4030|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206232605_AccountInfoDBNewEditDatabase', N'7.0.2');
2023-02-11 01:16:55.4030|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230207153732_AccountInfoDBAddNewAccounts'.
2023-02-11 01:16:55.4376|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [Owner] = N'Pavel Carmen', [Sum] = CAST(200 AS real), [UserId] = 2
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 01:16:55.4559|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (16ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum', N'UserId') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] ON;
INSERT INTO [Accounts] ([Id], [Owner], [Sum], [UserId])
VALUES (4, N'Gabor Ioana', CAST(2800 AS real), 2);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum', N'UserId') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] OFF;
2023-02-11 01:16:55.4726|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (14ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] ON;
INSERT INTO [Deposits] ([Id], [AccountId], [DepositSum], [Name], [Period])
VALUES (7, 4, CAST(100 AS real), N'Recurring Deposit', 6),
(8, 4, CAST(12 AS real), N'Savings Deposit', 12);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] OFF;
2023-02-11 01:16:55.4726|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230207153732_AccountInfoDBAddNewAccounts', N'7.0.2');
2023-02-11 01:16:55.4788|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230207153902_AccountInfoDBAddNewAccounts2'.
2023-02-11 01:16:55.5037|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 1
WHERE [Id] = 4;
SELECT @@ROWCOUNT;
2023-02-11 01:16:55.5037|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230207153902_AccountInfoDBAddNewAccounts2', N'7.0.2');
2023-02-11 01:16:55.5037|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230207174051_AccountInfoDBAddAttributes'.
2023-02-11 01:16:55.5326|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'12345678'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 01:16:55.5326|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'12345678'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 01:16:55.5326|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'12345678'
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 01:16:55.5326|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230207174051_AccountInfoDBAddAttributes', N'7.0.2');
2023-02-11 01:16:55.5431|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230210221808_AccountInfoDBModifyAttributes'.
2023-02-11 01:16:55.5904|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @var1 sysname;
SELECT @var1 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Users]') AND [c].[name] = N'Password');
IF @var1 IS NOT NULL EXEC(N'ALTER TABLE [Users] DROP CONSTRAINT [' + @var1 + '];');
ALTER TABLE [Users] ALTER COLUMN [Password] nvarchar(100) NOT NULL;
2023-02-11 01:16:55.6124|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'ef797c8118f02dfb649607dd5d3f8c7623048c9c063d532cc95c5ed7a898a64f'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 01:16:55.6398|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230210221808_AccountInfoDBModifyAttributes', N'7.0.2');
2023-02-11 01:16:55.6535|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230210222506_AccountInfoDBModifyAttributesForLogin'.
2023-02-11 01:16:55.6732|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230210222506_AccountInfoDBModifyAttributesForLogin', N'7.0.2');
2023-02-11 01:16:56.1337|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\z004pj3h\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-02-11 01:16:57.8918|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:57658/ - -
2023-02-11 01:16:58.1563|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:57658/ - - - 404 0 - 226.8791ms
2023-02-11 01:17:14.3346|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 POST https://localhost:57658/api/users application/json 139
2023-02-11 01:17:14.3438|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.UsersController.CreateUser (Bank.API)'
2023-02-11 01:17:14.3857|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "CreateUser", controller = "Users"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult CreateUser(Bank.API.Data.Models.UserCreationDTO) on controller Bank.API.Controllers.UsersController (Bank.API).
2023-02-11 01:17:15.4904|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (98ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 4000), @p2='?' (Size = 50), @p3='?' (Size = 100), @p4='?' (Size = 50)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Admin], [Email], [Name], [Password], [Username])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2023-02-11 01:17:15.5795|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing CreatedAtRouteResult, writing value of type 'Bank.API.Data.Models.UserDTO'.
2023-02-11 01:17:15.7070|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.UsersController.CreateUser (Bank.API) in 1302.5666ms
2023-02-11 01:17:15.7070|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.UsersController.CreateUser (Bank.API)'
2023-02-11 01:17:15.7844|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 POST https://localhost:57658/api/users application/json 139 - 201 171 application/json;+charset=utf-8 1402.0641ms
2023-02-11 01:17:39.6608|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 POST https://localhost:57658/api/login application/json 61
2023-02-11 01:17:39.6661|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.LoginController.Login (Bank.API)'
2023-02-11 01:17:39.6661|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Login", controller = "Login"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(Bank.API.Data.Models.LoginRequest) on controller Bank.API.Controllers.LoginController (Bank.API).
2023-02-11 01:17:40.4702|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[@__request_Username_0='?' (Size = 50), @__request_Password_1='?' (Size = 100)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Admin], [u].[Email], [u].[Name], [u].[Password], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__request_Username_0 AND [u].[Password] = @__request_Password_1
2023-02-11 01:17:40.4825|INFO|Bank.API.Controllers.LoginController|User wasn't found!
2023-02-11 01:17:40.4825|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2023-02-11 01:17:40.5191|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.LoginController.Login (Bank.API) in 844.7476ms
2023-02-11 01:17:40.5191|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.LoginController.Login (Bank.API)'
2023-02-11 01:17:40.5265|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 POST https://localhost:57658/api/login application/json 61 - 404 161 application/problem+json;+charset=utf-8 864.3564ms
2023-02-11 01:20:25.8091|INFO|Bank.API.Program|Initializing application...
2023-02-11 01:20:48.9688|INFO|Bank.API.Program|Initializing application...
2023-02-11 01:21:00.5418|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (61ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-02-11 01:21:00.6852|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2023-02-11 01:21:00.7243|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (36ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [AccountInfoDB];
2023-02-11 01:21:01.2176|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (351ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [AccountInfoDB];
2023-02-11 01:21:01.2975|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (78ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2023-02-11 01:21:01.3071|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-02-11 01:21:01.5287|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2023-02-11 01:21:01.5287|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-02-11 01:21:01.5953|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (52ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-02-11 01:21:01.6094|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-02-11 01:21:01.6499|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230112122455_AccountInfoDBInitialMigration'.
2023-02-11 01:21:01.8204|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Accounts] (
    [Id] int NOT NULL IDENTITY,
    [Owner] nvarchar(50) NOT NULL,
    [Sum] real NOT NULL,
    CONSTRAINT [PK_Accounts] PRIMARY KEY ([Id])
);
2023-02-11 01:21:01.8302|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Deposits] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [Period] int NOT NULL,
    [DepositSum] real NOT NULL,
    [AccountId] int NOT NULL,
    CONSTRAINT [PK_Deposits] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Deposits_Accounts_AccountId] FOREIGN KEY ([AccountId]) REFERENCES [Accounts] ([Id]) ON DELETE CASCADE
);
2023-02-11 01:21:01.8839|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (49ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] ON;
INSERT INTO [Accounts] ([Id], [Owner], [Sum])
VALUES (1, N'Gabor Andreea', CAST(2500 AS real)),
(2, N'Pavel Carmen', CAST(3200 AS real)),
(3, N'Wolf Lorena', CAST(2800 AS real));
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] OFF;
2023-02-11 01:21:01.9089|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] ON;
INSERT INTO [Deposits] ([Id], [AccountId], [DepositSum], [Name], [Period])
VALUES (1, 1, CAST(2000 AS real), N'Savings Deposit', 1),
(2, 1, CAST(500 AS real), N'Fixed Deposit', 12),
(3, 2, CAST(2200 AS real), N'Fixed Deposit', 6),
(4, 2, CAST(1000 AS real), N'Recurring Deposit', 1),
(5, 3, CAST(1200 AS real), N'Savings Deposit', 12),
(6, 3, CAST(1600 AS real), N'Current Deposit', 6);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] OFF;
2023-02-11 01:21:01.9192|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Deposits_AccountId] ON [Deposits] ([AccountId]);
2023-02-11 01:21:01.9192|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230112122455_AccountInfoDBInitialMigration', N'7.0.2');
2023-02-11 01:21:01.9548|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206140911_AccountInfoDBAddUsers'.
2023-02-11 01:21:02.0322|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD [UserId] int NULL;
2023-02-11 01:21:02.0487|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [Email] nvarchar(max) NOT NULL,
    [Username] nvarchar(50) NOT NULL,
    [Password] nvarchar(50) NOT NULL,
    [Admin] bit NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id])
);
2023-02-11 01:21:02.0576|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = NULL
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 01:21:02.0576|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = NULL
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 01:21:02.0576|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = NULL
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 01:21:02.0986|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Admin', N'Email', N'Name', N'Password', N'Username') AND [object_id] = OBJECT_ID(N'[Users]'))
    SET IDENTITY_INSERT [Users] ON;
INSERT INTO [Users] ([Id], [Admin], [Email], [Name], [Password], [Username])
VALUES (1, CAST(0 AS bit), N'ioanagabor@gmail.com', N'Ioana Gabor', N'1234', N'ioanagabor'),
(2, CAST(0 AS bit), N'carmen2411@gmail.com', N'Pavel Carmen', N'1234', N'pavelcarme'),
(3, CAST(1 AS bit), N'andreeagabor@gmail.com', N'Deea Gabor', N'1234', N'deeagabor');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Admin', N'Email', N'Name', N'Password', N'Username') AND [object_id] = OBJECT_ID(N'[Users]'))
    SET IDENTITY_INSERT [Users] OFF;
2023-02-11 01:21:02.1060|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Accounts_UserId] ON [Accounts] ([UserId]);
2023-02-11 01:21:02.1060|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD CONSTRAINT [FK_Accounts_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]);
2023-02-11 01:21:02.1060|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206140911_AccountInfoDBAddUsers', N'7.0.2');
2023-02-11 01:21:02.1060|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206151030_AccountInfoDBAddUserIdForAccounts'.
2023-02-11 01:21:02.2256|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] DROP CONSTRAINT [FK_Accounts_Users_UserId];
2023-02-11 01:21:02.3104|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (82ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DROP INDEX [IX_Accounts_UserId] ON [Accounts];
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Accounts]') AND [c].[name] = N'UserId');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [Accounts] DROP CONSTRAINT [' + @var0 + '];');
UPDATE [Accounts] SET [UserId] = 0 WHERE [UserId] IS NULL;
ALTER TABLE [Accounts] ALTER COLUMN [UserId] int NOT NULL;
ALTER TABLE [Accounts] ADD DEFAULT 0 FOR [UserId];
CREATE INDEX [IX_Accounts_UserId] ON [Accounts] ([UserId]);
2023-02-11 01:21:02.3104|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 1
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 01:21:02.3104|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 2
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 01:21:02.3243|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 3
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 01:21:02.3243|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD CONSTRAINT [FK_Accounts_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE;
2023-02-11 01:21:02.3243|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206151030_AccountInfoDBAddUserIdForAccounts', N'7.0.2');
2023-02-11 01:21:02.3370|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206151654_AccountInfoDBEditDatabase'.
2023-02-11 01:21:02.3606|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [Owner] = N'Gabor Ioana'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 01:21:02.3606|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [Owner] = N'Gabor Andreea'
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 01:21:02.3694|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Name] = N'Gabor Ioana'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 01:21:02.4022|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Name] = N'Gabor Andreea'
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 01:21:02.4158|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206151654_AccountInfoDBEditDatabase', N'7.0.2');
2023-02-11 01:21:02.4158|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206232605_AccountInfoDBNewEditDatabase'.
2023-02-11 01:21:02.4546|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Username] = N'pavelcarmen'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 01:21:02.4546|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206232605_AccountInfoDBNewEditDatabase', N'7.0.2');
2023-02-11 01:21:02.4630|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230207153732_AccountInfoDBAddNewAccounts'.
2023-02-11 01:21:02.4897|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [Owner] = N'Pavel Carmen', [Sum] = CAST(200 AS real), [UserId] = 2
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 01:21:02.5092|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (15ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum', N'UserId') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] ON;
INSERT INTO [Accounts] ([Id], [Owner], [Sum], [UserId])
VALUES (4, N'Gabor Ioana', CAST(2800 AS real), 2);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum', N'UserId') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] OFF;
2023-02-11 01:21:02.5298|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (18ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] ON;
INSERT INTO [Deposits] ([Id], [AccountId], [DepositSum], [Name], [Period])
VALUES (7, 4, CAST(100 AS real), N'Recurring Deposit', 6),
(8, 4, CAST(12 AS real), N'Savings Deposit', 12);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] OFF;
2023-02-11 01:21:02.5298|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230207153732_AccountInfoDBAddNewAccounts', N'7.0.2');
2023-02-11 01:21:02.5298|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230207153902_AccountInfoDBAddNewAccounts2'.
2023-02-11 01:21:02.5738|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 1
WHERE [Id] = 4;
SELECT @@ROWCOUNT;
2023-02-11 01:21:02.6435|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (33ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230207153902_AccountInfoDBAddNewAccounts2', N'7.0.2');
2023-02-11 01:21:02.6864|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230207174051_AccountInfoDBAddAttributes'.
2023-02-11 01:21:02.7104|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'12345678'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 01:21:02.7134|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'12345678'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 01:21:02.7134|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'12345678'
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 01:21:02.7134|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230207174051_AccountInfoDBAddAttributes', N'7.0.2');
2023-02-11 01:21:02.7134|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230210221808_AccountInfoDBModifyAttributes'.
2023-02-11 01:21:02.7728|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @var1 sysname;
SELECT @var1 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Users]') AND [c].[name] = N'Password');
IF @var1 IS NOT NULL EXEC(N'ALTER TABLE [Users] DROP CONSTRAINT [' + @var1 + '];');
ALTER TABLE [Users] ALTER COLUMN [Password] nvarchar(100) NOT NULL;
2023-02-11 01:21:02.7790|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'ef797c8118f02dfb649607dd5d3f8c7623048c9c063d532cc95c5ed7a898a64f'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 01:21:02.7790|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230210221808_AccountInfoDBModifyAttributes', N'7.0.2');
2023-02-11 01:21:02.7790|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230210222506_AccountInfoDBModifyAttributesForLogin'.
2023-02-11 01:21:02.8099|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230210222506_AccountInfoDBModifyAttributesForLogin', N'7.0.2');
2023-02-11 01:21:03.2529|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\z004pj3h\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-02-11 01:21:05.1926|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:57658/ - -
2023-02-11 01:21:05.4863|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:57658/ - - - 404 0 - 306.1819ms
2023-02-11 01:21:06.6537|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:57658/api/users application/json 61
2023-02-11 01:21:06.6681|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.UsersController.GetUsers (Bank.API)'
2023-02-11 01:21:06.7424|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetUsers", controller = "Users"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetUsers() on controller Bank.API.Controllers.UsersController (Bank.API).
2023-02-11 01:21:07.7790|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [u].[Id], [u].[Admin], [u].[Email], [u].[Name], [u].[Password], [u].[Username]
FROM [Users] AS [u]
2023-02-11 01:21:08.0384|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Bank.API.Data.Models.UserWithoutAccountsDTO, Bank.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-02-11 01:21:08.3427|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.UsersController.GetUsers (Bank.API) in 1576.0074ms
2023-02-11 01:21:08.3427|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.UsersController.GetUsers (Bank.API)'
2023-02-11 01:21:08.3774|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:57658/api/users application/json 61 - 200 424 application/json;+charset=utf-8 1723.4830ms
2023-02-11 01:21:19.6812|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 POST https://localhost:57658/api/users application/json 139
2023-02-11 01:21:19.6812|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.UsersController.CreateUser (Bank.API)'
2023-02-11 01:21:19.7091|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "CreateUser", controller = "Users"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult CreateUser(Bank.API.Data.Models.UserCreationDTO) on controller Bank.API.Controllers.UsersController (Bank.API).
2023-02-11 01:21:20.5423|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (167ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 4000), @p2='?' (Size = 50), @p3='?' (Size = 100), @p4='?' (Size = 50)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Admin], [Email], [Name], [Password], [Username])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2023-02-11 01:21:20.6226|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing CreatedAtRouteResult, writing value of type 'Bank.API.Data.Models.UserDTO'.
2023-02-11 01:21:20.6687|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.UsersController.CreateUser (Bank.API) in 956.7659ms
2023-02-11 01:21:20.6687|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.UsersController.CreateUser (Bank.API)'
2023-02-11 01:21:20.6687|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 POST https://localhost:57658/api/users application/json 139 - 201 171 application/json;+charset=utf-8 993.4656ms
2023-02-11 01:21:38.2491|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:57658/Pk0WoREWhayDAxHL7v.59Xg6bwF3HTQN3PDh0EMcJ6Mf3mgRdK - -
2023-02-11 01:21:38.2491|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:57658/Pk0WoREWhayDAxHL7v.59Xg6bwF3HTQN3PDh0EMcJ6Mf3mgRdK - - - 404 0 - 72.7083ms
2023-02-11 01:21:52.7068|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 POST https://localhost:57658/api/users application/json 139
2023-02-11 01:21:52.7068|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.UsersController.CreateUser (Bank.API)'
2023-02-11 01:21:52.7133|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "CreateUser", controller = "Users"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult CreateUser(Bank.API.Data.Models.UserCreationDTO) on controller Bank.API.Controllers.UsersController (Bank.API).
2023-02-11 01:21:52.8370|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 4000), @p2='?' (Size = 50), @p3='?' (Size = 100), @p4='?' (Size = 50)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Admin], [Email], [Name], [Password], [Username])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2023-02-11 01:21:52.8394|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing CreatedAtRouteResult, writing value of type 'Bank.API.Data.Models.UserDTO'.
2023-02-11 01:21:52.8394|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.UsersController.CreateUser (Bank.API) in 126.6613ms
2023-02-11 01:21:52.8394|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.UsersController.CreateUser (Bank.API)'
2023-02-11 01:21:52.8394|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 POST https://localhost:57658/api/users application/json 139 - 201 171 application/json;+charset=utf-8 144.2938ms
2023-02-11 01:21:54.9971|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 POST https://localhost:57658/api/users application/json 139
2023-02-11 01:21:54.9971|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.UsersController.CreateUser (Bank.API)'
2023-02-11 01:21:54.9971|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "CreateUser", controller = "Users"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult CreateUser(Bank.API.Data.Models.UserCreationDTO) on controller Bank.API.Controllers.UsersController (Bank.API).
2023-02-11 01:21:55.1028|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 4000), @p2='?' (Size = 50), @p3='?' (Size = 100), @p4='?' (Size = 50)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Admin], [Email], [Name], [Password], [Username])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2023-02-11 01:21:55.1028|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing CreatedAtRouteResult, writing value of type 'Bank.API.Data.Models.UserDTO'.
2023-02-11 01:21:55.1028|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.UsersController.CreateUser (Bank.API) in 102.6594ms
2023-02-11 01:21:55.1028|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.UsersController.CreateUser (Bank.API)'
2023-02-11 01:21:55.1028|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 POST https://localhost:57658/api/users application/json 139 - 201 171 application/json;+charset=utf-8 116.7129ms
2023-02-11 01:21:56.9616|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 POST https://localhost:57658/api/users application/json 139
2023-02-11 01:21:56.9755|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.UsersController.CreateUser (Bank.API)'
2023-02-11 01:21:56.9813|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "CreateUser", controller = "Users"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult CreateUser(Bank.API.Data.Models.UserCreationDTO) on controller Bank.API.Controllers.UsersController (Bank.API).
2023-02-11 01:21:57.0879|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 4000), @p2='?' (Size = 50), @p3='?' (Size = 100), @p4='?' (Size = 50)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Admin], [Email], [Name], [Password], [Username])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2023-02-11 01:21:57.0879|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing CreatedAtRouteResult, writing value of type 'Bank.API.Data.Models.UserDTO'.
2023-02-11 01:21:57.0879|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.UsersController.CreateUser (Bank.API) in 110.0916ms
2023-02-11 01:21:57.0879|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.UsersController.CreateUser (Bank.API)'
2023-02-11 01:21:57.0879|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 POST https://localhost:57658/api/users application/json 139 - 201 171 application/json;+charset=utf-8 155.4900ms
2023-02-11 01:22:20.6199|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 POST https://localhost:57658/api/users application/json 139
2023-02-11 01:22:20.6199|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.UsersController.CreateUser (Bank.API)'
2023-02-11 01:22:20.6199|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "CreateUser", controller = "Users"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult CreateUser(Bank.API.Data.Models.UserCreationDTO) on controller Bank.API.Controllers.UsersController (Bank.API).
2023-02-11 01:22:20.7462|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 4000), @p2='?' (Size = 50), @p3='?' (Size = 100), @p4='?' (Size = 50)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Admin], [Email], [Name], [Password], [Username])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2023-02-11 01:22:20.7462|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing CreatedAtRouteResult, writing value of type 'Bank.API.Data.Models.UserDTO'.
2023-02-11 01:22:20.7462|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.UsersController.CreateUser (Bank.API) in 123.9559ms
2023-02-11 01:22:20.7462|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.UsersController.CreateUser (Bank.API)'
2023-02-11 01:22:20.7462|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 POST https://localhost:57658/api/users application/json 139 - 201 171 application/json;+charset=utf-8 143.6383ms
2023-02-11 01:22:22.7771|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 POST https://localhost:57658/api/users application/json 139
2023-02-11 01:22:22.7840|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.UsersController.CreateUser (Bank.API)'
2023-02-11 01:22:22.8010|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "CreateUser", controller = "Users"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult CreateUser(Bank.API.Data.Models.UserCreationDTO) on controller Bank.API.Controllers.UsersController (Bank.API).
2023-02-11 01:22:22.9627|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 4000), @p2='?' (Size = 50), @p3='?' (Size = 100), @p4='?' (Size = 50)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Admin], [Email], [Name], [Password], [Username])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2023-02-11 01:22:22.9627|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing CreatedAtRouteResult, writing value of type 'Bank.API.Data.Models.UserDTO'.
2023-02-11 01:22:22.9627|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.UsersController.CreateUser (Bank.API) in 165.0353ms
2023-02-11 01:22:22.9627|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.UsersController.CreateUser (Bank.API)'
2023-02-11 01:22:22.9627|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 POST https://localhost:57658/api/users application/json 139 - 201 171 application/json;+charset=utf-8 201.6311ms
2023-02-11 01:30:03.3883|INFO|Bank.API.Program|Initializing application...
2023-02-11 01:30:12.4241|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (73ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-02-11 01:30:12.7355|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (117ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2023-02-11 01:30:12.7577|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [AccountInfoDB];
2023-02-11 01:30:13.3774|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (457ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [AccountInfoDB];
2023-02-11 01:30:13.4474|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (68ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2023-02-11 01:30:13.4474|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-02-11 01:30:13.6675|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2023-02-11 01:30:13.6675|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-02-11 01:30:13.7199|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (34ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-02-11 01:30:13.7390|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-02-11 01:30:13.7981|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230112122455_AccountInfoDBInitialMigration'.
2023-02-11 01:30:13.9211|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Accounts] (
    [Id] int NOT NULL IDENTITY,
    [Owner] nvarchar(50) NOT NULL,
    [Sum] real NOT NULL,
    CONSTRAINT [PK_Accounts] PRIMARY KEY ([Id])
);
2023-02-11 01:30:13.9360|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Deposits] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [Period] int NOT NULL,
    [DepositSum] real NOT NULL,
    [AccountId] int NOT NULL,
    CONSTRAINT [PK_Deposits] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Deposits_Accounts_AccountId] FOREIGN KEY ([AccountId]) REFERENCES [Accounts] ([Id]) ON DELETE CASCADE
);
2023-02-11 01:30:14.0278|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (89ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] ON;
INSERT INTO [Accounts] ([Id], [Owner], [Sum])
VALUES (1, N'Gabor Andreea', CAST(2500 AS real)),
(2, N'Pavel Carmen', CAST(3200 AS real)),
(3, N'Wolf Lorena', CAST(2800 AS real));
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] OFF;
2023-02-11 01:30:14.0543|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] ON;
INSERT INTO [Deposits] ([Id], [AccountId], [DepositSum], [Name], [Period])
VALUES (1, 1, CAST(2000 AS real), N'Savings Deposit', 1),
(2, 1, CAST(500 AS real), N'Fixed Deposit', 12),
(3, 2, CAST(2200 AS real), N'Fixed Deposit', 6),
(4, 2, CAST(1000 AS real), N'Recurring Deposit', 1),
(5, 3, CAST(1200 AS real), N'Savings Deposit', 12),
(6, 3, CAST(1600 AS real), N'Current Deposit', 6);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] OFF;
2023-02-11 01:30:14.0617|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Deposits_AccountId] ON [Deposits] ([AccountId]);
2023-02-11 01:30:14.0617|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230112122455_AccountInfoDBInitialMigration', N'7.0.2');
2023-02-11 01:30:14.0918|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206140911_AccountInfoDBAddUsers'.
2023-02-11 01:30:14.1665|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD [UserId] int NULL;
2023-02-11 01:30:14.1758|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [Email] nvarchar(max) NOT NULL,
    [Username] nvarchar(50) NOT NULL,
    [Password] nvarchar(50) NOT NULL,
    [Admin] bit NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id])
);
2023-02-11 01:30:14.2048|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = NULL
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 01:30:14.2157|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = NULL
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 01:30:14.2157|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = NULL
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 01:30:14.2451|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Admin', N'Email', N'Name', N'Password', N'Username') AND [object_id] = OBJECT_ID(N'[Users]'))
    SET IDENTITY_INSERT [Users] ON;
INSERT INTO [Users] ([Id], [Admin], [Email], [Name], [Password], [Username])
VALUES (1, CAST(0 AS bit), N'ioanagabor@gmail.com', N'Ioana Gabor', N'1234', N'ioanagabor'),
(2, CAST(0 AS bit), N'carmen2411@gmail.com', N'Pavel Carmen', N'1234', N'pavelcarme'),
(3, CAST(1 AS bit), N'andreeagabor@gmail.com', N'Deea Gabor', N'1234', N'deeagabor');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Admin', N'Email', N'Name', N'Password', N'Username') AND [object_id] = OBJECT_ID(N'[Users]'))
    SET IDENTITY_INSERT [Users] OFF;
2023-02-11 01:30:14.2451|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Accounts_UserId] ON [Accounts] ([UserId]);
2023-02-11 01:30:14.2451|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD CONSTRAINT [FK_Accounts_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]);
2023-02-11 01:30:14.2601|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206140911_AccountInfoDBAddUsers', N'7.0.2');
2023-02-11 01:30:14.2601|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206151030_AccountInfoDBAddUserIdForAccounts'.
2023-02-11 01:30:14.3141|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] DROP CONSTRAINT [FK_Accounts_Users_UserId];
2023-02-11 01:30:14.3751|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (59ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DROP INDEX [IX_Accounts_UserId] ON [Accounts];
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Accounts]') AND [c].[name] = N'UserId');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [Accounts] DROP CONSTRAINT [' + @var0 + '];');
UPDATE [Accounts] SET [UserId] = 0 WHERE [UserId] IS NULL;
ALTER TABLE [Accounts] ALTER COLUMN [UserId] int NOT NULL;
ALTER TABLE [Accounts] ADD DEFAULT 0 FOR [UserId];
CREATE INDEX [IX_Accounts_UserId] ON [Accounts] ([UserId]);
2023-02-11 01:30:14.3824|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 1
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 01:30:14.3881|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 2
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 01:30:14.3881|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 3
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 01:30:14.4124|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD CONSTRAINT [FK_Accounts_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE;
2023-02-11 01:30:14.4158|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206151030_AccountInfoDBAddUserIdForAccounts', N'7.0.2');
2023-02-11 01:30:14.4158|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206151654_AccountInfoDBEditDatabase'.
2023-02-11 01:30:14.4427|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [Owner] = N'Gabor Ioana'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 01:30:14.4501|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [Owner] = N'Gabor Andreea'
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 01:30:14.4501|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Name] = N'Gabor Ioana'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 01:30:14.4501|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Name] = N'Gabor Andreea'
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 01:30:14.4501|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206151654_AccountInfoDBEditDatabase', N'7.0.2');
2023-02-11 01:30:14.4501|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206232605_AccountInfoDBNewEditDatabase'.
2023-02-11 01:30:14.4944|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Username] = N'pavelcarmen'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 01:30:14.4944|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206232605_AccountInfoDBNewEditDatabase', N'7.0.2');
2023-02-11 01:30:14.4944|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230207153732_AccountInfoDBAddNewAccounts'.
2023-02-11 01:30:14.5292|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [Owner] = N'Pavel Carmen', [Sum] = CAST(200 AS real), [UserId] = 2
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 01:30:14.5480|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (16ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum', N'UserId') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] ON;
INSERT INTO [Accounts] ([Id], [Owner], [Sum], [UserId])
VALUES (4, N'Gabor Ioana', CAST(2800 AS real), 2);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum', N'UserId') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] OFF;
2023-02-11 01:30:14.5704|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] ON;
INSERT INTO [Deposits] ([Id], [AccountId], [DepositSum], [Name], [Period])
VALUES (7, 4, CAST(100 AS real), N'Recurring Deposit', 6),
(8, 4, CAST(12 AS real), N'Savings Deposit', 12);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] OFF;
2023-02-11 01:30:14.5704|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230207153732_AccountInfoDBAddNewAccounts', N'7.0.2');
2023-02-11 01:30:14.5704|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230207153902_AccountInfoDBAddNewAccounts2'.
2023-02-11 01:30:14.6116|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 1
WHERE [Id] = 4;
SELECT @@ROWCOUNT;
2023-02-11 01:30:14.6116|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230207153902_AccountInfoDBAddNewAccounts2', N'7.0.2');
2023-02-11 01:30:14.6116|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230207174051_AccountInfoDBAddAttributes'.
2023-02-11 01:30:14.6456|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'12345678'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 01:30:14.6456|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'12345678'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 01:30:14.6513|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'12345678'
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 01:30:14.6513|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230207174051_AccountInfoDBAddAttributes', N'7.0.2');
2023-02-11 01:30:14.6513|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230210221808_AccountInfoDBModifyAttributes'.
2023-02-11 01:30:14.7035|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @var1 sysname;
SELECT @var1 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Users]') AND [c].[name] = N'Password');
IF @var1 IS NOT NULL EXEC(N'ALTER TABLE [Users] DROP CONSTRAINT [' + @var1 + '];');
ALTER TABLE [Users] ALTER COLUMN [Password] nvarchar(100) NOT NULL;
2023-02-11 01:30:14.7035|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'ef797c8118f02dfb649607dd5d3f8c7623048c9c063d532cc95c5ed7a898a64f'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 01:30:14.7116|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230210221808_AccountInfoDBModifyAttributes', N'7.0.2');
2023-02-11 01:30:14.7116|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230210222506_AccountInfoDBModifyAttributesForLogin'.
2023-02-11 01:30:14.7373|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230210222506_AccountInfoDBModifyAttributesForLogin', N'7.0.2');
2023-02-11 01:30:15.0898|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\z004pj3h\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-02-11 01:30:16.8727|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:57658/ - -
2023-02-11 01:30:17.0532|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:57658/ - - - 404 0 - 187.5822ms
2023-02-11 01:31:43.0816|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 POST https://localhost:57658/api/users application/json 139
2023-02-11 01:31:43.0922|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.UsersController.CreateUser (Bank.API)'
2023-02-11 01:31:43.1766|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "CreateUser", controller = "Users"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult CreateUser(Bank.API.Data.Models.UserCreationDTO) on controller Bank.API.Controllers.UsersController (Bank.API).
2023-02-11 01:31:44.4472|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (120ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 4000), @p2='?' (Size = 50), @p3='?' (Size = 100), @p4='?' (Size = 50)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Admin], [Email], [Name], [Password], [Username])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2023-02-11 01:31:44.5423|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing CreatedAtRouteResult, writing value of type 'Bank.API.Data.Models.UserDTO'.
2023-02-11 01:31:44.7506|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.UsersController.CreateUser (Bank.API) in 1549.6767ms
2023-02-11 01:31:44.7506|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.UsersController.CreateUser (Bank.API)'
2023-02-11 01:31:44.8068|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 POST https://localhost:57658/api/users application/json 139 - 201 171 application/json;+charset=utf-8 1714.1581ms
2023-02-11 01:32:07.6254|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 POST https://localhost:57658/api/login application/json 61
2023-02-11 01:32:07.6254|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.LoginController.Login (Bank.API)'
2023-02-11 01:32:07.6380|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Login", controller = "Login"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(Bank.API.Data.Models.LoginRequest) on controller Bank.API.Controllers.LoginController (Bank.API).
2023-02-11 01:32:08.2425|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [u].[Id], [u].[Admin], [u].[Email], [u].[Name], [u].[Password], [u].[Username]
FROM [Users] AS [u]
2023-02-11 01:32:08.3826|INFO|Bank.API.Controllers.LoginController|User wasn't found!
2023-02-11 01:32:08.3860|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2023-02-11 01:32:08.4191|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.LoginController.Login (Bank.API) in 778.6925ms
2023-02-11 01:32:08.4191|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.LoginController.Login (Bank.API)'
2023-02-11 01:32:08.4191|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 POST https://localhost:57658/api/login application/json 61 - 404 161 application/problem+json;+charset=utf-8 799.0041ms
2023-02-11 01:41:27.0845|INFO|Bank.API.Program|Initializing application...
2023-02-11 01:41:35.4338|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (60ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-02-11 01:41:35.6786|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (98ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2023-02-11 01:41:35.7006|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [AccountInfoDB];
2023-02-11 01:41:36.1664|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (327ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [AccountInfoDB];
2023-02-11 01:41:36.2760|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (107ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2023-02-11 01:41:36.3709|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-02-11 01:41:36.5266|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2023-02-11 01:41:36.5314|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-02-11 01:41:36.5751|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (33ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-02-11 01:41:36.5895|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-02-11 01:41:36.6461|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230112122455_AccountInfoDBInitialMigration'.
2023-02-11 01:41:36.7633|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Accounts] (
    [Id] int NOT NULL IDENTITY,
    [Owner] nvarchar(50) NOT NULL,
    [Sum] real NOT NULL,
    CONSTRAINT [PK_Accounts] PRIMARY KEY ([Id])
);
2023-02-11 01:41:36.7701|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Deposits] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [Period] int NOT NULL,
    [DepositSum] real NOT NULL,
    [AccountId] int NOT NULL,
    CONSTRAINT [PK_Deposits] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Deposits_Accounts_AccountId] FOREIGN KEY ([AccountId]) REFERENCES [Accounts] ([Id]) ON DELETE CASCADE
);
2023-02-11 01:41:36.8048|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (32ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] ON;
INSERT INTO [Accounts] ([Id], [Owner], [Sum])
VALUES (1, N'Gabor Andreea', CAST(2500 AS real)),
(2, N'Pavel Carmen', CAST(3200 AS real)),
(3, N'Wolf Lorena', CAST(2800 AS real));
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] OFF;
2023-02-11 01:41:36.8262|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] ON;
INSERT INTO [Deposits] ([Id], [AccountId], [DepositSum], [Name], [Period])
VALUES (1, 1, CAST(2000 AS real), N'Savings Deposit', 1),
(2, 1, CAST(500 AS real), N'Fixed Deposit', 12),
(3, 2, CAST(2200 AS real), N'Fixed Deposit', 6),
(4, 2, CAST(1000 AS real), N'Recurring Deposit', 1),
(5, 3, CAST(1200 AS real), N'Savings Deposit', 12),
(6, 3, CAST(1600 AS real), N'Current Deposit', 6);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] OFF;
2023-02-11 01:41:36.8262|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Deposits_AccountId] ON [Deposits] ([AccountId]);
2023-02-11 01:41:36.8428|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230112122455_AccountInfoDBInitialMigration', N'7.0.2');
2023-02-11 01:41:36.8651|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206140911_AccountInfoDBAddUsers'.
2023-02-11 01:41:36.9127|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD [UserId] int NULL;
2023-02-11 01:41:36.9127|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [Email] nvarchar(max) NOT NULL,
    [Username] nvarchar(50) NOT NULL,
    [Password] nvarchar(50) NOT NULL,
    [Admin] bit NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id])
);
2023-02-11 01:41:36.9127|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = NULL
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 01:41:36.9127|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = NULL
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 01:41:36.9127|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = NULL
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 01:41:36.9390|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Admin', N'Email', N'Name', N'Password', N'Username') AND [object_id] = OBJECT_ID(N'[Users]'))
    SET IDENTITY_INSERT [Users] ON;
INSERT INTO [Users] ([Id], [Admin], [Email], [Name], [Password], [Username])
VALUES (1, CAST(0 AS bit), N'ioanagabor@gmail.com', N'Ioana Gabor', N'1234', N'ioanagabor'),
(2, CAST(0 AS bit), N'carmen2411@gmail.com', N'Pavel Carmen', N'1234', N'pavelcarme'),
(3, CAST(1 AS bit), N'andreeagabor@gmail.com', N'Deea Gabor', N'1234', N'deeagabor');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Admin', N'Email', N'Name', N'Password', N'Username') AND [object_id] = OBJECT_ID(N'[Users]'))
    SET IDENTITY_INSERT [Users] OFF;
2023-02-11 01:41:36.9390|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Accounts_UserId] ON [Accounts] ([UserId]);
2023-02-11 01:41:36.9390|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD CONSTRAINT [FK_Accounts_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]);
2023-02-11 01:41:36.9529|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206140911_AccountInfoDBAddUsers', N'7.0.2');
2023-02-11 01:41:36.9529|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206151030_AccountInfoDBAddUserIdForAccounts'.
2023-02-11 01:41:37.0166|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] DROP CONSTRAINT [FK_Accounts_Users_UserId];
2023-02-11 01:41:37.1428|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (124ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DROP INDEX [IX_Accounts_UserId] ON [Accounts];
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Accounts]') AND [c].[name] = N'UserId');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [Accounts] DROP CONSTRAINT [' + @var0 + '];');
UPDATE [Accounts] SET [UserId] = 0 WHERE [UserId] IS NULL;
ALTER TABLE [Accounts] ALTER COLUMN [UserId] int NOT NULL;
ALTER TABLE [Accounts] ADD DEFAULT 0 FOR [UserId];
CREATE INDEX [IX_Accounts_UserId] ON [Accounts] ([UserId]);
2023-02-11 01:41:37.1428|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 1
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 01:41:37.1522|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 2
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 01:41:37.1522|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 3
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 01:41:37.1522|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD CONSTRAINT [FK_Accounts_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE;
2023-02-11 01:41:37.1522|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206151030_AccountInfoDBAddUserIdForAccounts', N'7.0.2');
2023-02-11 01:41:37.1705|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206151654_AccountInfoDBEditDatabase'.
2023-02-11 01:41:37.1930|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [Owner] = N'Gabor Ioana'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 01:41:37.1966|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [Owner] = N'Gabor Andreea'
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 01:41:37.1966|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Name] = N'Gabor Ioana'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 01:41:37.1966|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Name] = N'Gabor Andreea'
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 01:41:37.1966|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206151654_AccountInfoDBEditDatabase', N'7.0.2');
2023-02-11 01:41:37.1966|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206232605_AccountInfoDBNewEditDatabase'.
2023-02-11 01:41:37.2427|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Username] = N'pavelcarmen'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 01:41:37.2460|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206232605_AccountInfoDBNewEditDatabase', N'7.0.2');
2023-02-11 01:41:37.2460|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230207153732_AccountInfoDBAddNewAccounts'.
2023-02-11 01:41:37.2772|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [Owner] = N'Pavel Carmen', [Sum] = CAST(200 AS real), [UserId] = 2
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 01:41:37.2928|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (13ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum', N'UserId') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] ON;
INSERT INTO [Accounts] ([Id], [Owner], [Sum], [UserId])
VALUES (4, N'Gabor Ioana', CAST(2800 AS real), 2);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum', N'UserId') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] OFF;
2023-02-11 01:41:37.3121|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (17ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] ON;
INSERT INTO [Deposits] ([Id], [AccountId], [DepositSum], [Name], [Period])
VALUES (7, 4, CAST(100 AS real), N'Recurring Deposit', 6),
(8, 4, CAST(12 AS real), N'Savings Deposit', 12);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] OFF;
2023-02-11 01:41:37.3121|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230207153732_AccountInfoDBAddNewAccounts', N'7.0.2');
2023-02-11 01:41:37.3121|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230207153902_AccountInfoDBAddNewAccounts2'.
2023-02-11 01:41:37.3388|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 1
WHERE [Id] = 4;
SELECT @@ROWCOUNT;
2023-02-11 01:41:37.3388|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230207153902_AccountInfoDBAddNewAccounts2', N'7.0.2');
2023-02-11 01:41:37.3388|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230207174051_AccountInfoDBAddAttributes'.
2023-02-11 01:41:37.3655|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'12345678'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 01:41:37.3655|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'12345678'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 01:41:37.3655|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'12345678'
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 01:41:37.3655|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230207174051_AccountInfoDBAddAttributes', N'7.0.2');
2023-02-11 01:41:37.3655|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230210221808_AccountInfoDBModifyAttributes'.
2023-02-11 01:41:37.4161|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @var1 sysname;
SELECT @var1 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Users]') AND [c].[name] = N'Password');
IF @var1 IS NOT NULL EXEC(N'ALTER TABLE [Users] DROP CONSTRAINT [' + @var1 + '];');
ALTER TABLE [Users] ALTER COLUMN [Password] nvarchar(100) NOT NULL;
2023-02-11 01:41:37.4241|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'ef797c8118f02dfb649607dd5d3f8c7623048c9c063d532cc95c5ed7a898a64f'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 01:41:37.4241|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230210221808_AccountInfoDBModifyAttributes', N'7.0.2');
2023-02-11 01:41:37.4347|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230210222506_AccountInfoDBModifyAttributesForLogin'.
2023-02-11 01:41:37.4668|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230210222506_AccountInfoDBModifyAttributesForLogin', N'7.0.2');
2023-02-11 01:41:37.9771|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\z004pj3h\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-02-11 01:41:40.3859|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:57658/ - -
2023-02-11 01:41:40.5908|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:57658/ - - - 404 0 - 204.9648ms
2023-02-11 01:42:08.7392|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 POST https://localhost:57658/api/users application/json 139
2023-02-11 01:42:08.7494|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.UsersController.CreateUser (Bank.API)'
2023-02-11 01:42:08.8046|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "CreateUser", controller = "Users"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult CreateUser(Bank.API.Data.Models.UserCreationDTO) on controller Bank.API.Controllers.UsersController (Bank.API).
2023-02-11 01:42:10.0879|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (112ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 4000), @p2='?' (Size = 50), @p3='?' (Size = 100), @p4='?' (Size = 50)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Admin], [Email], [Name], [Password], [Username])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2023-02-11 01:42:10.1882|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing CreatedAtRouteResult, writing value of type 'Bank.API.Data.Models.UserDTO'.
2023-02-11 01:42:10.3836|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.UsersController.CreateUser (Bank.API) in 1561.5422ms
2023-02-11 01:42:10.3856|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.UsersController.CreateUser (Bank.API)'
2023-02-11 01:42:10.4072|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 POST https://localhost:57658/api/users application/json 139 - 201 171 application/json;+charset=utf-8 1667.0769ms
2023-02-11 01:42:37.9986|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 POST https://localhost:57658/api/login application/json 61
2023-02-11 01:42:38.0136|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.LoginController.Login (Bank.API)'
2023-02-11 01:42:38.0136|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Login", controller = "Login"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(Bank.API.Data.Models.LoginRequest) on controller Bank.API.Controllers.LoginController (Bank.API).
2023-02-11 01:42:38.6384|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [u].[Id], [u].[Admin], [u].[Email], [u].[Name], [u].[Password], [u].[Username]
FROM [Users] AS [u]
2023-02-11 01:42:38.7645|INFO|Bank.API.Controllers.LoginController|User wasn't found!
2023-02-11 01:42:38.7645|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2023-02-11 01:42:38.7929|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.LoginController.Login (Bank.API) in 769.3888ms
2023-02-11 01:42:38.7929|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.LoginController.Login (Bank.API)'
2023-02-11 01:42:38.7929|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 POST https://localhost:57658/api/login application/json 61 - 404 161 application/problem+json;+charset=utf-8 892.2452ms
2023-02-11 01:44:20.6588|INFO|Bank.API.Program|Initializing application...
2023-02-11 01:44:27.7592|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (55ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-02-11 01:44:27.8781|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2023-02-11 01:44:27.8970|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (17ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [AccountInfoDB];
2023-02-11 01:44:28.3223|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (303ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [AccountInfoDB];
2023-02-11 01:44:28.4355|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (111ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2023-02-11 01:44:28.4355|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-02-11 01:44:28.6327|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2023-02-11 01:44:28.6327|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-02-11 01:44:28.6947|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (44ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-02-11 01:44:28.7096|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-02-11 01:44:28.7535|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230112122455_AccountInfoDBInitialMigration'.
2023-02-11 01:44:28.8872|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Accounts] (
    [Id] int NOT NULL IDENTITY,
    [Owner] nvarchar(50) NOT NULL,
    [Sum] real NOT NULL,
    CONSTRAINT [PK_Accounts] PRIMARY KEY ([Id])
);
2023-02-11 01:44:28.8872|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Deposits] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [Period] int NOT NULL,
    [DepositSum] real NOT NULL,
    [AccountId] int NOT NULL,
    CONSTRAINT [PK_Deposits] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Deposits_Accounts_AccountId] FOREIGN KEY ([AccountId]) REFERENCES [Accounts] ([Id]) ON DELETE CASCADE
);
2023-02-11 01:44:28.9231|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (28ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] ON;
INSERT INTO [Accounts] ([Id], [Owner], [Sum])
VALUES (1, N'Gabor Andreea', CAST(2500 AS real)),
(2, N'Pavel Carmen', CAST(3200 AS real)),
(3, N'Wolf Lorena', CAST(2800 AS real));
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] OFF;
2023-02-11 01:44:28.9379|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (13ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] ON;
INSERT INTO [Deposits] ([Id], [AccountId], [DepositSum], [Name], [Period])
VALUES (1, 1, CAST(2000 AS real), N'Savings Deposit', 1),
(2, 1, CAST(500 AS real), N'Fixed Deposit', 12),
(3, 2, CAST(2200 AS real), N'Fixed Deposit', 6),
(4, 2, CAST(1000 AS real), N'Recurring Deposit', 1),
(5, 3, CAST(1200 AS real), N'Savings Deposit', 12),
(6, 3, CAST(1600 AS real), N'Current Deposit', 6);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] OFF;
2023-02-11 01:44:28.9379|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Deposits_AccountId] ON [Deposits] ([AccountId]);
2023-02-11 01:44:28.9462|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230112122455_AccountInfoDBInitialMigration', N'7.0.2');
2023-02-11 01:44:28.9685|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206140911_AccountInfoDBAddUsers'.
2023-02-11 01:44:29.0310|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD [UserId] int NULL;
2023-02-11 01:44:29.0310|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [Email] nvarchar(max) NOT NULL,
    [Username] nvarchar(50) NOT NULL,
    [Password] nvarchar(50) NOT NULL,
    [Admin] bit NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id])
);
2023-02-11 01:44:29.0310|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = NULL
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 01:44:29.0436|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = NULL
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 01:44:29.0436|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = NULL
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 01:44:29.0608|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (12ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Admin', N'Email', N'Name', N'Password', N'Username') AND [object_id] = OBJECT_ID(N'[Users]'))
    SET IDENTITY_INSERT [Users] ON;
INSERT INTO [Users] ([Id], [Admin], [Email], [Name], [Password], [Username])
VALUES (1, CAST(0 AS bit), N'ioanagabor@gmail.com', N'Ioana Gabor', N'1234', N'ioanagabor'),
(2, CAST(0 AS bit), N'carmen2411@gmail.com', N'Pavel Carmen', N'1234', N'pavelcarme'),
(3, CAST(1 AS bit), N'andreeagabor@gmail.com', N'Deea Gabor', N'1234', N'deeagabor');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Admin', N'Email', N'Name', N'Password', N'Username') AND [object_id] = OBJECT_ID(N'[Users]'))
    SET IDENTITY_INSERT [Users] OFF;
2023-02-11 01:44:29.0608|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Accounts_UserId] ON [Accounts] ([UserId]);
2023-02-11 01:44:29.0728|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD CONSTRAINT [FK_Accounts_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]);
2023-02-11 01:44:29.0728|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206140911_AccountInfoDBAddUsers', N'7.0.2');
2023-02-11 01:44:29.0728|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206151030_AccountInfoDBAddUserIdForAccounts'.
2023-02-11 01:44:29.1393|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] DROP CONSTRAINT [FK_Accounts_Users_UserId];
2023-02-11 01:44:29.2505|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (109ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DROP INDEX [IX_Accounts_UserId] ON [Accounts];
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Accounts]') AND [c].[name] = N'UserId');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [Accounts] DROP CONSTRAINT [' + @var0 + '];');
UPDATE [Accounts] SET [UserId] = 0 WHERE [UserId] IS NULL;
ALTER TABLE [Accounts] ALTER COLUMN [UserId] int NOT NULL;
ALTER TABLE [Accounts] ADD DEFAULT 0 FOR [UserId];
CREATE INDEX [IX_Accounts_UserId] ON [Accounts] ([UserId]);
2023-02-11 01:44:29.2505|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 1
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 01:44:29.2505|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 2
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 01:44:29.2594|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 3
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 01:44:29.2594|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD CONSTRAINT [FK_Accounts_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE;
2023-02-11 01:44:29.2594|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206151030_AccountInfoDBAddUserIdForAccounts', N'7.0.2');
2023-02-11 01:44:29.2594|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206151654_AccountInfoDBEditDatabase'.
2023-02-11 01:44:29.2916|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [Owner] = N'Gabor Ioana'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 01:44:29.2916|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [Owner] = N'Gabor Andreea'
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 01:44:29.2990|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Name] = N'Gabor Ioana'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 01:44:29.2990|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Name] = N'Gabor Andreea'
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 01:44:29.2990|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206151654_AccountInfoDBEditDatabase', N'7.0.2');
2023-02-11 01:44:29.2990|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206232605_AccountInfoDBNewEditDatabase'.
2023-02-11 01:44:29.3313|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Username] = N'pavelcarmen'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 01:44:29.3313|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206232605_AccountInfoDBNewEditDatabase', N'7.0.2');
2023-02-11 01:44:29.3313|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230207153732_AccountInfoDBAddNewAccounts'.
2023-02-11 01:44:29.3658|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [Owner] = N'Pavel Carmen', [Sum] = CAST(200 AS real), [UserId] = 2
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 01:44:29.3801|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (12ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum', N'UserId') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] ON;
INSERT INTO [Accounts] ([Id], [Owner], [Sum], [UserId])
VALUES (4, N'Gabor Ioana', CAST(2800 AS real), 2);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum', N'UserId') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] OFF;
2023-02-11 01:44:29.4055|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] ON;
INSERT INTO [Deposits] ([Id], [AccountId], [DepositSum], [Name], [Period])
VALUES (7, 4, CAST(100 AS real), N'Recurring Deposit', 6),
(8, 4, CAST(12 AS real), N'Savings Deposit', 12);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] OFF;
2023-02-11 01:44:29.4055|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230207153732_AccountInfoDBAddNewAccounts', N'7.0.2');
2023-02-11 01:44:29.4055|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230207153902_AccountInfoDBAddNewAccounts2'.
2023-02-11 01:44:29.4335|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 1
WHERE [Id] = 4;
SELECT @@ROWCOUNT;
2023-02-11 01:44:29.4335|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230207153902_AccountInfoDBAddNewAccounts2', N'7.0.2');
2023-02-11 01:44:29.4335|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230207174051_AccountInfoDBAddAttributes'.
2023-02-11 01:44:29.4642|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'12345678'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 01:44:29.4642|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'12345678'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 01:44:29.4642|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'12345678'
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 01:44:29.4642|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230207174051_AccountInfoDBAddAttributes', N'7.0.2');
2023-02-11 01:44:29.4642|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230210221808_AccountInfoDBModifyAttributes'.
2023-02-11 01:44:29.5116|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (14ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @var1 sysname;
SELECT @var1 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Users]') AND [c].[name] = N'Password');
IF @var1 IS NOT NULL EXEC(N'ALTER TABLE [Users] DROP CONSTRAINT [' + @var1 + '];');
ALTER TABLE [Users] ALTER COLUMN [Password] nvarchar(100) NOT NULL;
2023-02-11 01:44:29.5173|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'ef797c8118f02dfb649607dd5d3f8c7623048c9c063d532cc95c5ed7a898a64f'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 01:44:29.5173|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230210221808_AccountInfoDBModifyAttributes', N'7.0.2');
2023-02-11 01:44:29.5173|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230210222506_AccountInfoDBModifyAttributesForLogin'.
2023-02-11 01:44:29.5440|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230210222506_AccountInfoDBModifyAttributesForLogin', N'7.0.2');
2023-02-11 01:44:29.8324|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\z004pj3h\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-02-11 01:44:31.4340|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:57658/ - -
2023-02-11 01:44:31.6211|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:57658/ - - - 404 0 - 195.9655ms
2023-02-11 01:45:15.0829|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 POST https://localhost:57658/api/users application/json 139
2023-02-11 01:45:15.0906|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.UsersController.CreateUser (Bank.API)'
2023-02-11 01:45:15.1398|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "CreateUser", controller = "Users"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult CreateUser(Bank.API.Data.Models.UserCreationDTO) on controller Bank.API.Controllers.UsersController (Bank.API).
2023-02-11 01:45:16.2085|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (59ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 4000), @p2='?' (Size = 50), @p3='?' (Size = 100), @p4='?' (Size = 50)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Admin], [Email], [Name], [Password], [Username])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2023-02-11 01:45:16.2961|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing CreatedAtRouteResult, writing value of type 'Bank.API.Data.Models.UserDTO'.
2023-02-11 01:45:16.6042|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.UsersController.CreateUser (Bank.API) in 1331.4281ms
2023-02-11 01:45:16.6042|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.UsersController.CreateUser (Bank.API)'
2023-02-11 01:45:16.6332|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 POST https://localhost:57658/api/users application/json 139 - 201 171 application/json;+charset=utf-8 1548.6173ms
2023-02-11 01:45:30.1670|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 POST https://localhost:57658/api/login application/json 61
2023-02-11 01:45:30.1670|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.LoginController.Login (Bank.API)'
2023-02-11 01:45:30.1670|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Login", controller = "Login"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(Bank.API.Data.Models.LoginRequest) on controller Bank.API.Controllers.LoginController (Bank.API).
2023-02-11 01:45:30.6623|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [u].[Id], [u].[Admin], [u].[Email], [u].[Name], [u].[Password], [u].[Username]
FROM [Users] AS [u]
2023-02-11 01:45:30.7786|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing OkObjectResult, writing value of type 'Bank.API.Data.Models.LoginRequest'.
2023-02-11 01:45:30.7786|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.LoginController.Login (Bank.API) in 605.0583ms
2023-02-11 01:45:30.7786|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.LoginController.Login (Bank.API)'
2023-02-11 01:45:30.7786|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 POST https://localhost:57658/api/login application/json 61 - 200 45 application/json;+charset=utf-8 620.4983ms
2023-02-11 14:39:28.0628|INFO|Bank.API.Program|Initializing application...
2023-02-11 14:39:40.8591|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (48ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-02-11 14:39:41.1723|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (94ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2023-02-11 14:39:41.1964|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [AccountInfoDB];
2023-02-11 14:39:41.5327|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (251ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [AccountInfoDB];
2023-02-11 14:39:41.6838|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (147ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2023-02-11 14:39:41.6979|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-02-11 14:39:41.8688|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2023-02-11 14:39:41.8733|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-02-11 14:39:41.9216|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (37ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-02-11 14:39:41.9347|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-02-11 14:39:41.9729|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230112122455_AccountInfoDBInitialMigration'.
2023-02-11 14:39:42.1564|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Accounts] (
    [Id] int NOT NULL IDENTITY,
    [Owner] nvarchar(50) NOT NULL,
    [Sum] real NOT NULL,
    CONSTRAINT [PK_Accounts] PRIMARY KEY ([Id])
);
2023-02-11 14:39:42.1671|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Deposits] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [Period] int NOT NULL,
    [DepositSum] real NOT NULL,
    [AccountId] int NOT NULL,
    CONSTRAINT [PK_Deposits] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Deposits_Accounts_AccountId] FOREIGN KEY ([AccountId]) REFERENCES [Accounts] ([Id]) ON DELETE CASCADE
);
2023-02-11 14:39:42.2918|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (121ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] ON;
INSERT INTO [Accounts] ([Id], [Owner], [Sum])
VALUES (1, N'Gabor Andreea', CAST(2500 AS real)),
(2, N'Pavel Carmen', CAST(3200 AS real)),
(3, N'Wolf Lorena', CAST(2800 AS real));
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] OFF;
2023-02-11 14:39:42.3174|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] ON;
INSERT INTO [Deposits] ([Id], [AccountId], [DepositSum], [Name], [Period])
VALUES (1, 1, CAST(2000 AS real), N'Savings Deposit', 1),
(2, 1, CAST(500 AS real), N'Fixed Deposit', 12),
(3, 2, CAST(2200 AS real), N'Fixed Deposit', 6),
(4, 2, CAST(1000 AS real), N'Recurring Deposit', 1),
(5, 3, CAST(1200 AS real), N'Savings Deposit', 12),
(6, 3, CAST(1600 AS real), N'Current Deposit', 6);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] OFF;
2023-02-11 14:39:42.3174|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Deposits_AccountId] ON [Deposits] ([AccountId]);
2023-02-11 14:39:42.3174|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230112122455_AccountInfoDBInitialMigration', N'7.0.2');
2023-02-11 14:39:42.3540|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206140911_AccountInfoDBAddUsers'.
2023-02-11 14:39:42.4189|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD [UserId] int NULL;
2023-02-11 14:39:42.4189|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [Email] nvarchar(max) NOT NULL,
    [Username] nvarchar(50) NOT NULL,
    [Password] nvarchar(50) NOT NULL,
    [Admin] bit NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id])
);
2023-02-11 14:39:42.4467|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = NULL
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 14:39:42.4681|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (16ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = NULL
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 14:39:42.4681|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = NULL
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 14:39:42.4931|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (17ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Admin', N'Email', N'Name', N'Password', N'Username') AND [object_id] = OBJECT_ID(N'[Users]'))
    SET IDENTITY_INSERT [Users] ON;
INSERT INTO [Users] ([Id], [Admin], [Email], [Name], [Password], [Username])
VALUES (1, CAST(0 AS bit), N'ioanagabor@gmail.com', N'Ioana Gabor', N'1234', N'ioanagabor'),
(2, CAST(0 AS bit), N'carmen2411@gmail.com', N'Pavel Carmen', N'1234', N'pavelcarme'),
(3, CAST(1 AS bit), N'andreeagabor@gmail.com', N'Deea Gabor', N'1234', N'deeagabor');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Admin', N'Email', N'Name', N'Password', N'Username') AND [object_id] = OBJECT_ID(N'[Users]'))
    SET IDENTITY_INSERT [Users] OFF;
2023-02-11 14:39:42.4982|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Accounts_UserId] ON [Accounts] ([UserId]);
2023-02-11 14:39:42.4982|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD CONSTRAINT [FK_Accounts_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]);
2023-02-11 14:39:42.4982|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206140911_AccountInfoDBAddUsers', N'7.0.2');
2023-02-11 14:39:42.4982|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206151030_AccountInfoDBAddUserIdForAccounts'.
2023-02-11 14:39:42.5534|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] DROP CONSTRAINT [FK_Accounts_Users_UserId];
2023-02-11 14:39:42.6462|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (87ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DROP INDEX [IX_Accounts_UserId] ON [Accounts];
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Accounts]') AND [c].[name] = N'UserId');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [Accounts] DROP CONSTRAINT [' + @var0 + '];');
UPDATE [Accounts] SET [UserId] = 0 WHERE [UserId] IS NULL;
ALTER TABLE [Accounts] ALTER COLUMN [UserId] int NOT NULL;
ALTER TABLE [Accounts] ADD DEFAULT 0 FOR [UserId];
CREATE INDEX [IX_Accounts_UserId] ON [Accounts] ([UserId]);
2023-02-11 14:39:42.6649|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 1
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 14:39:42.6721|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 2
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 14:39:42.6721|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 3
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 14:39:42.6837|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD CONSTRAINT [FK_Accounts_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE;
2023-02-11 14:39:42.6837|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206151030_AccountInfoDBAddUserIdForAccounts', N'7.0.2');
2023-02-11 14:39:42.6837|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206151654_AccountInfoDBEditDatabase'.
2023-02-11 14:39:42.7140|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [Owner] = N'Gabor Ioana'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 14:39:42.7140|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [Owner] = N'Gabor Andreea'
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 14:39:42.7140|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Name] = N'Gabor Ioana'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 14:39:42.7140|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Name] = N'Gabor Andreea'
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 14:39:42.7140|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206151654_AccountInfoDBEditDatabase', N'7.0.2');
2023-02-11 14:39:42.7140|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206232605_AccountInfoDBNewEditDatabase'.
2023-02-11 14:39:42.7554|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Username] = N'pavelcarmen'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 14:39:42.7554|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206232605_AccountInfoDBNewEditDatabase', N'7.0.2');
2023-02-11 14:39:42.7554|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230207153732_AccountInfoDBAddNewAccounts'.
2023-02-11 14:39:42.8005|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [Owner] = N'Pavel Carmen', [Sum] = CAST(200 AS real), [UserId] = 2
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 14:39:42.8215|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (18ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum', N'UserId') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] ON;
INSERT INTO [Accounts] ([Id], [Owner], [Sum], [UserId])
VALUES (4, N'Gabor Ioana', CAST(2800 AS real), 2);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum', N'UserId') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] OFF;
2023-02-11 14:39:42.8478|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] ON;
INSERT INTO [Deposits] ([Id], [AccountId], [DepositSum], [Name], [Period])
VALUES (7, 4, CAST(100 AS real), N'Recurring Deposit', 6),
(8, 4, CAST(12 AS real), N'Savings Deposit', 12);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] OFF;
2023-02-11 14:39:42.8478|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230207153732_AccountInfoDBAddNewAccounts', N'7.0.2');
2023-02-11 14:39:42.8617|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230207153902_AccountInfoDBAddNewAccounts2'.
2023-02-11 14:39:42.8938|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 1
WHERE [Id] = 4;
SELECT @@ROWCOUNT;
2023-02-11 14:39:42.8938|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230207153902_AccountInfoDBAddNewAccounts2', N'7.0.2');
2023-02-11 14:39:42.8938|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230207174051_AccountInfoDBAddAttributes'.
2023-02-11 14:39:42.9279|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'12345678'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 14:39:42.9279|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'12345678'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 14:39:42.9374|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'12345678'
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 14:39:42.9374|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230207174051_AccountInfoDBAddAttributes', N'7.0.2');
2023-02-11 14:39:42.9374|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230210221808_AccountInfoDBModifyAttributes'.
2023-02-11 14:39:43.0048|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (32ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @var1 sysname;
SELECT @var1 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Users]') AND [c].[name] = N'Password');
IF @var1 IS NOT NULL EXEC(N'ALTER TABLE [Users] DROP CONSTRAINT [' + @var1 + '];');
ALTER TABLE [Users] ALTER COLUMN [Password] nvarchar(100) NOT NULL;
2023-02-11 14:39:43.0048|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'ef797c8118f02dfb649607dd5d3f8c7623048c9c063d532cc95c5ed7a898a64f'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 14:39:43.0141|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230210221808_AccountInfoDBModifyAttributes', N'7.0.2');
2023-02-11 14:39:43.0141|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230210222506_AccountInfoDBModifyAttributesForLogin'.
2023-02-11 14:39:43.0409|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230210222506_AccountInfoDBModifyAttributesForLogin', N'7.0.2');
2023-02-11 14:39:43.7158|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\z004pj3h\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-02-11 14:39:45.4301|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:57658/ - -
2023-02-11 14:39:45.6273|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:57658/ - - - 404 0 - 207.0398ms
2023-02-11 14:48:11.9369|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:57658/api/login - -
2023-02-11 14:48:11.9554|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2023-02-11 14:48:11.9554|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:57658/api/login - - - 204 - - 25.4131ms
2023-02-11 14:48:11.9669|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:57658/api/login application/json;+charset=UTF-8 97
2023-02-11 14:48:11.9669|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2023-02-11 14:48:11.9669|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.LoginController.Login (Bank.API)'
2023-02-11 14:48:12.0321|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Login", controller = "Login"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(Bank.API.Data.Models.LoginRequest) on controller Bank.API.Controllers.LoginController (Bank.API).
2023-02-11 14:48:12.7457|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2023-02-11 14:48:12.9305|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.LoginController.Login (Bank.API) in 870.0674ms
2023-02-11 14:48:12.9345|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.LoginController.Login (Bank.API)'
2023-02-11 14:48:12.9345|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:57658/api/login application/json;+charset=UTF-8 97 - 400 454 application/problem+json;+charset=utf-8 976.1842ms
2023-02-11 14:48:24.9034|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:57658/api/login - -
2023-02-11 14:48:24.9034|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2023-02-11 14:48:24.9374|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:57658/api/login - - - 204 - - 16.4586ms
2023-02-11 14:48:24.9755|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:57658/api/login application/json;+charset=UTF-8 97
2023-02-11 14:48:24.9838|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2023-02-11 14:48:24.9838|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.LoginController.Login (Bank.API)'
2023-02-11 14:48:24.9914|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Login", controller = "Login"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(Bank.API.Data.Models.LoginRequest) on controller Bank.API.Controllers.LoginController (Bank.API).
2023-02-11 14:48:24.9914|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2023-02-11 14:48:24.9914|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.LoginController.Login (Bank.API) in 7.1284ms
2023-02-11 14:48:24.9914|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.LoginController.Login (Bank.API)'
2023-02-11 14:48:25.0150|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:57658/api/login application/json;+charset=UTF-8 97 - 400 454 application/problem+json;+charset=utf-8 37.6856ms
2023-02-11 14:54:04.5683|INFO|Bank.API.Program|Initializing application...
2023-02-11 14:54:15.1853|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (65ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-02-11 14:54:15.3197|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2023-02-11 14:54:15.3630|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (41ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [AccountInfoDB];
2023-02-11 14:54:15.9102|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (418ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [AccountInfoDB];
2023-02-11 14:54:16.0156|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (103ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2023-02-11 14:54:16.0277|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-02-11 14:54:16.1804|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2023-02-11 14:54:16.1804|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-02-11 14:54:16.2607|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (54ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-02-11 14:54:16.2748|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-02-11 14:54:16.3244|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230112122455_AccountInfoDBInitialMigration'.
2023-02-11 14:54:16.4789|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Accounts] (
    [Id] int NOT NULL IDENTITY,
    [Owner] nvarchar(50) NOT NULL,
    [Sum] real NOT NULL,
    CONSTRAINT [PK_Accounts] PRIMARY KEY ([Id])
);
2023-02-11 14:54:16.4789|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Deposits] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [Period] int NOT NULL,
    [DepositSum] real NOT NULL,
    [AccountId] int NOT NULL,
    CONSTRAINT [PK_Deposits] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Deposits_Accounts_AccountId] FOREIGN KEY ([AccountId]) REFERENCES [Accounts] ([Id]) ON DELETE CASCADE
);
2023-02-11 14:54:16.5323|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (46ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] ON;
INSERT INTO [Accounts] ([Id], [Owner], [Sum])
VALUES (1, N'Gabor Andreea', CAST(2500 AS real)),
(2, N'Pavel Carmen', CAST(3200 AS real)),
(3, N'Wolf Lorena', CAST(2800 AS real));
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] OFF;
2023-02-11 14:54:16.5323|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (13ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] ON;
INSERT INTO [Deposits] ([Id], [AccountId], [DepositSum], [Name], [Period])
VALUES (1, 1, CAST(2000 AS real), N'Savings Deposit', 1),
(2, 1, CAST(500 AS real), N'Fixed Deposit', 12),
(3, 2, CAST(2200 AS real), N'Fixed Deposit', 6),
(4, 2, CAST(1000 AS real), N'Recurring Deposit', 1),
(5, 3, CAST(1200 AS real), N'Savings Deposit', 12),
(6, 3, CAST(1600 AS real), N'Current Deposit', 6);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] OFF;
2023-02-11 14:54:16.5323|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Deposits_AccountId] ON [Deposits] ([AccountId]);
2023-02-11 14:54:16.5579|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230112122455_AccountInfoDBInitialMigration', N'7.0.2');
2023-02-11 14:54:16.5797|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206140911_AccountInfoDBAddUsers'.
2023-02-11 14:54:16.6495|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD [UserId] int NULL;
2023-02-11 14:54:16.6495|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [Email] nvarchar(max) NOT NULL,
    [Username] nvarchar(50) NOT NULL,
    [Password] nvarchar(50) NOT NULL,
    [Admin] bit NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id])
);
2023-02-11 14:54:16.6654|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = NULL
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 14:54:16.6654|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = NULL
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 14:54:16.6756|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = NULL
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 14:54:16.7080|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (30ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Admin', N'Email', N'Name', N'Password', N'Username') AND [object_id] = OBJECT_ID(N'[Users]'))
    SET IDENTITY_INSERT [Users] ON;
INSERT INTO [Users] ([Id], [Admin], [Email], [Name], [Password], [Username])
VALUES (1, CAST(0 AS bit), N'ioanagabor@gmail.com', N'Ioana Gabor', N'1234', N'ioanagabor'),
(2, CAST(0 AS bit), N'carmen2411@gmail.com', N'Pavel Carmen', N'1234', N'pavelcarme'),
(3, CAST(1 AS bit), N'andreeagabor@gmail.com', N'Deea Gabor', N'1234', N'deeagabor');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Admin', N'Email', N'Name', N'Password', N'Username') AND [object_id] = OBJECT_ID(N'[Users]'))
    SET IDENTITY_INSERT [Users] OFF;
2023-02-11 14:54:16.7080|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Accounts_UserId] ON [Accounts] ([UserId]);
2023-02-11 14:54:16.7204|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD CONSTRAINT [FK_Accounts_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]);
2023-02-11 14:54:16.7204|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206140911_AccountInfoDBAddUsers', N'7.0.2');
2023-02-11 14:54:16.7204|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206151030_AccountInfoDBAddUserIdForAccounts'.
2023-02-11 14:54:16.7797|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] DROP CONSTRAINT [FK_Accounts_Users_UserId];
2023-02-11 14:54:16.9594|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (177ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DROP INDEX [IX_Accounts_UserId] ON [Accounts];
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Accounts]') AND [c].[name] = N'UserId');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [Accounts] DROP CONSTRAINT [' + @var0 + '];');
UPDATE [Accounts] SET [UserId] = 0 WHERE [UserId] IS NULL;
ALTER TABLE [Accounts] ALTER COLUMN [UserId] int NOT NULL;
ALTER TABLE [Accounts] ADD DEFAULT 0 FOR [UserId];
CREATE INDEX [IX_Accounts_UserId] ON [Accounts] ([UserId]);
2023-02-11 14:54:16.9594|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 1
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 14:54:16.9594|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 2
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 14:54:16.9594|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 3
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 14:54:16.9751|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD CONSTRAINT [FK_Accounts_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE;
2023-02-11 14:54:16.9751|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206151030_AccountInfoDBAddUserIdForAccounts', N'7.0.2');
2023-02-11 14:54:16.9751|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206151654_AccountInfoDBEditDatabase'.
2023-02-11 14:54:16.9970|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [Owner] = N'Gabor Ioana'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 14:54:16.9970|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [Owner] = N'Gabor Andreea'
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 14:54:16.9970|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Name] = N'Gabor Ioana'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 14:54:16.9970|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Name] = N'Gabor Andreea'
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 14:54:17.0084|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206151654_AccountInfoDBEditDatabase', N'7.0.2');
2023-02-11 14:54:17.0084|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206232605_AccountInfoDBNewEditDatabase'.
2023-02-11 14:54:17.0392|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Username] = N'pavelcarmen'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 14:54:17.0392|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206232605_AccountInfoDBNewEditDatabase', N'7.0.2');
2023-02-11 14:54:17.0392|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230207153732_AccountInfoDBAddNewAccounts'.
2023-02-11 14:54:17.0746|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [Owner] = N'Pavel Carmen', [Sum] = CAST(200 AS real), [UserId] = 2
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 14:54:17.1096|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (30ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum', N'UserId') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] ON;
INSERT INTO [Accounts] ([Id], [Owner], [Sum], [UserId])
VALUES (4, N'Gabor Ioana', CAST(2800 AS real), 2);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum', N'UserId') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] OFF;
2023-02-11 14:54:17.1275|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (16ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] ON;
INSERT INTO [Deposits] ([Id], [AccountId], [DepositSum], [Name], [Period])
VALUES (7, 4, CAST(100 AS real), N'Recurring Deposit', 6),
(8, 4, CAST(12 AS real), N'Savings Deposit', 12);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] OFF;
2023-02-11 14:54:17.1275|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230207153732_AccountInfoDBAddNewAccounts', N'7.0.2');
2023-02-11 14:54:17.1275|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230207153902_AccountInfoDBAddNewAccounts2'.
2023-02-11 14:54:17.1568|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 1
WHERE [Id] = 4;
SELECT @@ROWCOUNT;
2023-02-11 14:54:17.1598|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230207153902_AccountInfoDBAddNewAccounts2', N'7.0.2');
2023-02-11 14:54:17.1598|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230207174051_AccountInfoDBAddAttributes'.
2023-02-11 14:54:17.1813|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'12345678'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 14:54:17.1813|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'12345678'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 14:54:17.1813|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'12345678'
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 14:54:17.1813|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230207174051_AccountInfoDBAddAttributes', N'7.0.2');
2023-02-11 14:54:17.1918|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230210221808_AccountInfoDBModifyAttributes'.
2023-02-11 14:54:17.2373|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @var1 sysname;
SELECT @var1 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Users]') AND [c].[name] = N'Password');
IF @var1 IS NOT NULL EXEC(N'ALTER TABLE [Users] DROP CONSTRAINT [' + @var1 + '];');
ALTER TABLE [Users] ALTER COLUMN [Password] nvarchar(100) NOT NULL;
2023-02-11 14:54:17.2373|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'ef797c8118f02dfb649607dd5d3f8c7623048c9c063d532cc95c5ed7a898a64f'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 14:54:17.2373|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230210221808_AccountInfoDBModifyAttributes', N'7.0.2');
2023-02-11 14:54:17.2508|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230210222506_AccountInfoDBModifyAttributesForLogin'.
2023-02-11 14:54:17.2716|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230210222506_AccountInfoDBModifyAttributesForLogin', N'7.0.2');
2023-02-11 14:54:17.5271|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\z004pj3h\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-02-11 14:54:19.5047|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:57658/ - -
2023-02-11 14:54:19.7681|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:57658/ - - - 404 0 - 362.9721ms
2023-02-11 14:54:24.9348|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 POST https://localhost:57658/api/login application/json 62
2023-02-11 14:54:24.9437|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.LoginController.Login (Bank.API)'
2023-02-11 14:54:24.9924|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Login", controller = "Login"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(Bank.API.Data.Models.LoginRequest) on controller Bank.API.Controllers.LoginController (Bank.API).
2023-02-11 14:54:26.0449|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [u].[Id], [u].[Admin], [u].[Email], [u].[Name], [u].[Password], [u].[Username]
FROM [Users] AS [u]
2023-02-11 14:54:26.2416|FATAL|Bank.API.Controllers.LoginController|Exception while logging!
2023-02-11 14:54:26.2640|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'System.String'.
2023-02-11 14:54:26.2818|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.LoginController.Login (Bank.API) in 1274.1471ms
2023-02-11 14:54:26.2837|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.LoginController.Login (Bank.API)'
2023-02-11 14:54:26.3031|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 POST https://localhost:57658/api/login application/json 62 - 500 - text/plain;+charset=utf-8 1368.5398ms
2023-02-11 14:55:02.2803|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 POST https://localhost:57658/api/login application/json 118
2023-02-11 14:55:02.2841|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.LoginController.Login (Bank.API)'
2023-02-11 14:55:02.2841|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Login", controller = "Login"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(Bank.API.Data.Models.LoginRequest) on controller Bank.API.Controllers.LoginController (Bank.API).
2023-02-11 14:55:02.3577|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [u].[Id], [u].[Admin], [u].[Email], [u].[Name], [u].[Password], [u].[Username]
FROM [Users] AS [u]
2023-02-11 14:55:02.4442|FATAL|Bank.API.Controllers.LoginController|Exception while logging!
2023-02-11 14:55:02.4442|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'System.String'.
2023-02-11 14:55:02.4631|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.LoginController.Login (Bank.API) in 161.4484ms
2023-02-11 14:55:02.4631|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.LoginController.Login (Bank.API)'
2023-02-11 14:55:02.4631|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 POST https://localhost:57658/api/login application/json 118 - 500 - text/plain;+charset=utf-8 188.5265ms
2023-02-11 14:56:20.8193|INFO|Bank.API.Program|Initializing application...
2023-02-11 14:56:29.1801|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (59ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-02-11 14:56:29.3120|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2023-02-11 14:56:29.3332|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (18ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [AccountInfoDB];
2023-02-11 14:56:29.6962|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (285ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [AccountInfoDB];
2023-02-11 14:56:29.7715|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (73ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2023-02-11 14:56:29.7809|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-02-11 14:56:29.9708|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2023-02-11 14:56:29.9708|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-02-11 14:56:30.0243|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (35ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-02-11 14:56:30.0432|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-02-11 14:56:30.0986|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230112122455_AccountInfoDBInitialMigration'.
2023-02-11 14:56:30.2300|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Accounts] (
    [Id] int NOT NULL IDENTITY,
    [Owner] nvarchar(50) NOT NULL,
    [Sum] real NOT NULL,
    CONSTRAINT [PK_Accounts] PRIMARY KEY ([Id])
);
2023-02-11 14:56:30.2358|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Deposits] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [Period] int NOT NULL,
    [DepositSum] real NOT NULL,
    [AccountId] int NOT NULL,
    CONSTRAINT [PK_Deposits] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Deposits_Accounts_AccountId] FOREIGN KEY ([AccountId]) REFERENCES [Accounts] ([Id]) ON DELETE CASCADE
);
2023-02-11 14:56:30.2858|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (41ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] ON;
INSERT INTO [Accounts] ([Id], [Owner], [Sum])
VALUES (1, N'Gabor Andreea', CAST(2500 AS real)),
(2, N'Pavel Carmen', CAST(3200 AS real)),
(3, N'Wolf Lorena', CAST(2800 AS real));
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] OFF;
2023-02-11 14:56:30.3048|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (17ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] ON;
INSERT INTO [Deposits] ([Id], [AccountId], [DepositSum], [Name], [Period])
VALUES (1, 1, CAST(2000 AS real), N'Savings Deposit', 1),
(2, 1, CAST(500 AS real), N'Fixed Deposit', 12),
(3, 2, CAST(2200 AS real), N'Fixed Deposit', 6),
(4, 2, CAST(1000 AS real), N'Recurring Deposit', 1),
(5, 3, CAST(1200 AS real), N'Savings Deposit', 12),
(6, 3, CAST(1600 AS real), N'Current Deposit', 6);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] OFF;
2023-02-11 14:56:30.3048|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Deposits_AccountId] ON [Deposits] ([AccountId]);
2023-02-11 14:56:30.3139|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230112122455_AccountInfoDBInitialMigration', N'7.0.2');
2023-02-11 14:56:30.3381|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206140911_AccountInfoDBAddUsers'.
2023-02-11 14:56:30.3975|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD [UserId] int NULL;
2023-02-11 14:56:30.3975|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [Email] nvarchar(max) NOT NULL,
    [Username] nvarchar(50) NOT NULL,
    [Password] nvarchar(50) NOT NULL,
    [Admin] bit NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id])
);
2023-02-11 14:56:30.3975|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = NULL
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 14:56:30.3975|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = NULL
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 14:56:30.4105|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = NULL
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 14:56:30.4302|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (18ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Admin', N'Email', N'Name', N'Password', N'Username') AND [object_id] = OBJECT_ID(N'[Users]'))
    SET IDENTITY_INSERT [Users] ON;
INSERT INTO [Users] ([Id], [Admin], [Email], [Name], [Password], [Username])
VALUES (1, CAST(0 AS bit), N'ioanagabor@gmail.com', N'Ioana Gabor', N'1234', N'ioanagabor'),
(2, CAST(0 AS bit), N'carmen2411@gmail.com', N'Pavel Carmen', N'1234', N'pavelcarme'),
(3, CAST(1 AS bit), N'andreeagabor@gmail.com', N'Deea Gabor', N'1234', N'deeagabor');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Admin', N'Email', N'Name', N'Password', N'Username') AND [object_id] = OBJECT_ID(N'[Users]'))
    SET IDENTITY_INSERT [Users] OFF;
2023-02-11 14:56:30.4302|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Accounts_UserId] ON [Accounts] ([UserId]);
2023-02-11 14:56:30.4414|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD CONSTRAINT [FK_Accounts_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]);
2023-02-11 14:56:30.4414|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206140911_AccountInfoDBAddUsers', N'7.0.2');
2023-02-11 14:56:30.4414|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206151030_AccountInfoDBAddUserIdForAccounts'.
2023-02-11 14:56:30.5063|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] DROP CONSTRAINT [FK_Accounts_Users_UserId];
2023-02-11 14:56:30.5820|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (73ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DROP INDEX [IX_Accounts_UserId] ON [Accounts];
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Accounts]') AND [c].[name] = N'UserId');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [Accounts] DROP CONSTRAINT [' + @var0 + '];');
UPDATE [Accounts] SET [UserId] = 0 WHERE [UserId] IS NULL;
ALTER TABLE [Accounts] ALTER COLUMN [UserId] int NOT NULL;
ALTER TABLE [Accounts] ADD DEFAULT 0 FOR [UserId];
CREATE INDEX [IX_Accounts_UserId] ON [Accounts] ([UserId]);
2023-02-11 14:56:30.5820|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 1
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 14:56:30.5820|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 2
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 14:56:30.5820|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 3
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 14:56:30.5993|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD CONSTRAINT [FK_Accounts_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE;
2023-02-11 14:56:30.5993|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206151030_AccountInfoDBAddUserIdForAccounts', N'7.0.2');
2023-02-11 14:56:30.5993|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206151654_AccountInfoDBEditDatabase'.
2023-02-11 14:56:30.6293|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [Owner] = N'Gabor Ioana'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 14:56:30.6293|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [Owner] = N'Gabor Andreea'
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 14:56:30.6293|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Name] = N'Gabor Ioana'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 14:56:30.6293|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Name] = N'Gabor Andreea'
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 14:56:30.6293|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206151654_AccountInfoDBEditDatabase', N'7.0.2');
2023-02-11 14:56:30.6569|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206232605_AccountInfoDBNewEditDatabase'.
2023-02-11 14:56:30.6836|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Username] = N'pavelcarmen'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 14:56:30.6881|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206232605_AccountInfoDBNewEditDatabase', N'7.0.2');
2023-02-11 14:56:30.6881|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230207153732_AccountInfoDBAddNewAccounts'.
2023-02-11 14:56:30.7388|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [Owner] = N'Pavel Carmen', [Sum] = CAST(200 AS real), [UserId] = 2
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 14:56:30.7613|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum', N'UserId') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] ON;
INSERT INTO [Accounts] ([Id], [Owner], [Sum], [UserId])
VALUES (4, N'Gabor Ioana', CAST(2800 AS real), 2);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum', N'UserId') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] OFF;
2023-02-11 14:56:30.7844|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] ON;
INSERT INTO [Deposits] ([Id], [AccountId], [DepositSum], [Name], [Period])
VALUES (7, 4, CAST(100 AS real), N'Recurring Deposit', 6),
(8, 4, CAST(12 AS real), N'Savings Deposit', 12);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] OFF;
2023-02-11 14:56:30.7844|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230207153732_AccountInfoDBAddNewAccounts', N'7.0.2');
2023-02-11 14:56:30.7844|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230207153902_AccountInfoDBAddNewAccounts2'.
2023-02-11 14:56:30.8195|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 1
WHERE [Id] = 4;
SELECT @@ROWCOUNT;
2023-02-11 14:56:30.8195|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230207153902_AccountInfoDBAddNewAccounts2', N'7.0.2');
2023-02-11 14:56:30.8195|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230207174051_AccountInfoDBAddAttributes'.
2023-02-11 14:56:30.8645|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'12345678'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 14:56:30.8645|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'12345678'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 14:56:30.9029|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'12345678'
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 14:56:30.9127|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230207174051_AccountInfoDBAddAttributes', N'7.0.2');
2023-02-11 14:56:30.9309|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230210221808_AccountInfoDBModifyAttributes'.
2023-02-11 14:56:30.9866|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @var1 sysname;
SELECT @var1 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Users]') AND [c].[name] = N'Password');
IF @var1 IS NOT NULL EXEC(N'ALTER TABLE [Users] DROP CONSTRAINT [' + @var1 + '];');
ALTER TABLE [Users] ALTER COLUMN [Password] nvarchar(100) NOT NULL;
2023-02-11 14:56:31.0365|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'ef797c8118f02dfb649607dd5d3f8c7623048c9c063d532cc95c5ed7a898a64f'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 14:56:31.0365|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230210221808_AccountInfoDBModifyAttributes', N'7.0.2');
2023-02-11 14:56:31.0510|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230210222506_AccountInfoDBModifyAttributesForLogin'.
2023-02-11 14:56:31.0779|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230210222506_AccountInfoDBModifyAttributesForLogin', N'7.0.2');
2023-02-11 14:56:31.3621|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\z004pj3h\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-02-11 14:56:32.8541|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:57658/ - -
2023-02-11 14:56:33.1676|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:57658/ - - - 404 0 - 269.0269ms
2023-02-11 14:56:55.8477|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 POST https://localhost:57658/api/login application/json 118
2023-02-11 14:56:55.8477|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.LoginController.Login (Bank.API)'
2023-02-11 14:56:55.9323|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Login", controller = "Login"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(Bank.API.Data.Models.LoginRequest) on controller Bank.API.Controllers.LoginController (Bank.API).
2023-02-11 14:56:56.9283|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [u].[Id], [u].[Admin], [u].[Email], [u].[Name], [u].[Password], [u].[Username]
FROM [Users] AS [u]
2023-02-11 14:56:57.1367|FATAL|Bank.API.Controllers.LoginController|Exception while logging!
2023-02-11 14:56:57.1540|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'System.String'.
2023-02-11 14:56:57.1708|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.LoginController.Login (Bank.API) in 1224.0763ms
2023-02-11 14:56:57.1732|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.LoginController.Login (Bank.API)'
2023-02-11 14:56:57.2160|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 POST https://localhost:57658/api/login application/json 118 - 500 - text/plain;+charset=utf-8 1355.6304ms
2023-02-11 15:07:56.1896|INFO|Bank.API.Program|Initializing application...
2023-02-11 15:08:04.5635|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (58ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-02-11 15:08:04.7689|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2023-02-11 15:08:04.7930|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [AccountInfoDB];
2023-02-11 15:08:05.2251|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (306ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [AccountInfoDB];
2023-02-11 15:08:05.3251|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (98ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2023-02-11 15:08:05.3343|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-02-11 15:08:05.4946|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2023-02-11 15:08:05.4946|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-02-11 15:08:05.5524|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (39ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-02-11 15:08:05.5524|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-02-11 15:08:05.6073|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230112122455_AccountInfoDBInitialMigration'.
2023-02-11 15:08:05.7566|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Accounts] (
    [Id] int NOT NULL IDENTITY,
    [Owner] nvarchar(50) NOT NULL,
    [Sum] real NOT NULL,
    CONSTRAINT [PK_Accounts] PRIMARY KEY ([Id])
);
2023-02-11 15:08:05.7566|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Deposits] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [Period] int NOT NULL,
    [DepositSum] real NOT NULL,
    [AccountId] int NOT NULL,
    CONSTRAINT [PK_Deposits] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Deposits_Accounts_AccountId] FOREIGN KEY ([AccountId]) REFERENCES [Accounts] ([Id]) ON DELETE CASCADE
);
2023-02-11 15:08:05.7891|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] ON;
INSERT INTO [Accounts] ([Id], [Owner], [Sum])
VALUES (1, N'Gabor Andreea', CAST(2500 AS real)),
(2, N'Pavel Carmen', CAST(3200 AS real)),
(3, N'Wolf Lorena', CAST(2800 AS real));
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] OFF;
2023-02-11 15:08:05.7891|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (12ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] ON;
INSERT INTO [Deposits] ([Id], [AccountId], [DepositSum], [Name], [Period])
VALUES (1, 1, CAST(2000 AS real), N'Savings Deposit', 1),
(2, 1, CAST(500 AS real), N'Fixed Deposit', 12),
(3, 2, CAST(2200 AS real), N'Fixed Deposit', 6),
(4, 2, CAST(1000 AS real), N'Recurring Deposit', 1),
(5, 3, CAST(1200 AS real), N'Savings Deposit', 12),
(6, 3, CAST(1600 AS real), N'Current Deposit', 6);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] OFF;
2023-02-11 15:08:05.8089|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Deposits_AccountId] ON [Deposits] ([AccountId]);
2023-02-11 15:08:05.8089|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230112122455_AccountInfoDBInitialMigration', N'7.0.2');
2023-02-11 15:08:05.8354|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206140911_AccountInfoDBAddUsers'.
2023-02-11 15:08:05.9148|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD [UserId] int NULL;
2023-02-11 15:08:05.9148|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [Email] nvarchar(max) NOT NULL,
    [Username] nvarchar(50) NOT NULL,
    [Password] nvarchar(50) NOT NULL,
    [Admin] bit NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id])
);
2023-02-11 15:08:05.9232|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = NULL
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 15:08:05.9232|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = NULL
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 15:08:05.9232|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = NULL
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 15:08:05.9496|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Admin', N'Email', N'Name', N'Password', N'Username') AND [object_id] = OBJECT_ID(N'[Users]'))
    SET IDENTITY_INSERT [Users] ON;
INSERT INTO [Users] ([Id], [Admin], [Email], [Name], [Password], [Username])
VALUES (1, CAST(0 AS bit), N'ioanagabor@gmail.com', N'Ioana Gabor', N'1234', N'ioanagabor'),
(2, CAST(0 AS bit), N'carmen2411@gmail.com', N'Pavel Carmen', N'1234', N'pavelcarme'),
(3, CAST(1 AS bit), N'andreeagabor@gmail.com', N'Deea Gabor', N'1234', N'deeagabor');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Admin', N'Email', N'Name', N'Password', N'Username') AND [object_id] = OBJECT_ID(N'[Users]'))
    SET IDENTITY_INSERT [Users] OFF;
2023-02-11 15:08:05.9496|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Accounts_UserId] ON [Accounts] ([UserId]);
2023-02-11 15:08:05.9619|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD CONSTRAINT [FK_Accounts_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]);
2023-02-11 15:08:05.9619|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206140911_AccountInfoDBAddUsers', N'7.0.2');
2023-02-11 15:08:05.9619|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206151030_AccountInfoDBAddUserIdForAccounts'.
2023-02-11 15:08:06.0126|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] DROP CONSTRAINT [FK_Accounts_Users_UserId];
2023-02-11 15:08:06.0990|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (82ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DROP INDEX [IX_Accounts_UserId] ON [Accounts];
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Accounts]') AND [c].[name] = N'UserId');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [Accounts] DROP CONSTRAINT [' + @var0 + '];');
UPDATE [Accounts] SET [UserId] = 0 WHERE [UserId] IS NULL;
ALTER TABLE [Accounts] ALTER COLUMN [UserId] int NOT NULL;
ALTER TABLE [Accounts] ADD DEFAULT 0 FOR [UserId];
CREATE INDEX [IX_Accounts_UserId] ON [Accounts] ([UserId]);
2023-02-11 15:08:06.1112|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 1
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 15:08:06.1112|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 2
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 15:08:06.1112|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 3
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 15:08:06.1299|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD CONSTRAINT [FK_Accounts_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE;
2023-02-11 15:08:06.1499|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (16ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206151030_AccountInfoDBAddUserIdForAccounts', N'7.0.2');
2023-02-11 15:08:06.1499|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206151654_AccountInfoDBEditDatabase'.
2023-02-11 15:08:06.1785|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [Owner] = N'Gabor Ioana'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 15:08:06.1785|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [Owner] = N'Gabor Andreea'
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 15:08:06.1785|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Name] = N'Gabor Ioana'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 15:08:06.1785|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Name] = N'Gabor Andreea'
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 15:08:06.1922|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206151654_AccountInfoDBEditDatabase', N'7.0.2');
2023-02-11 15:08:06.1922|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206232605_AccountInfoDBNewEditDatabase'.
2023-02-11 15:08:06.2170|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Username] = N'pavelcarmen'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 15:08:06.2170|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206232605_AccountInfoDBNewEditDatabase', N'7.0.2');
2023-02-11 15:08:06.2228|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230207153732_AccountInfoDBAddNewAccounts'.
2023-02-11 15:08:06.2424|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [Owner] = N'Pavel Carmen', [Sum] = CAST(200 AS real), [UserId] = 2
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 15:08:06.2568|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum', N'UserId') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] ON;
INSERT INTO [Accounts] ([Id], [Owner], [Sum], [UserId])
VALUES (4, N'Gabor Ioana', CAST(2800 AS real), 2);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum', N'UserId') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] OFF;
2023-02-11 15:08:06.2872|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (27ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] ON;
INSERT INTO [Deposits] ([Id], [AccountId], [DepositSum], [Name], [Period])
VALUES (7, 4, CAST(100 AS real), N'Recurring Deposit', 6),
(8, 4, CAST(12 AS real), N'Savings Deposit', 12);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] OFF;
2023-02-11 15:08:06.2872|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230207153732_AccountInfoDBAddNewAccounts', N'7.0.2');
2023-02-11 15:08:06.2872|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230207153902_AccountInfoDBAddNewAccounts2'.
2023-02-11 15:08:06.3125|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 1
WHERE [Id] = 4;
SELECT @@ROWCOUNT;
2023-02-11 15:08:06.3125|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230207153902_AccountInfoDBAddNewAccounts2', N'7.0.2');
2023-02-11 15:08:06.3125|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230207174051_AccountInfoDBAddAttributes'.
2023-02-11 15:08:06.3364|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'12345678'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 15:08:06.3364|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'12345678'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 15:08:06.3364|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'12345678'
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 15:08:06.3447|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230207174051_AccountInfoDBAddAttributes', N'7.0.2');
2023-02-11 15:08:06.3447|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230210221808_AccountInfoDBModifyAttributes'.
2023-02-11 15:08:06.3811|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (14ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @var1 sysname;
SELECT @var1 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Users]') AND [c].[name] = N'Password');
IF @var1 IS NOT NULL EXEC(N'ALTER TABLE [Users] DROP CONSTRAINT [' + @var1 + '];');
ALTER TABLE [Users] ALTER COLUMN [Password] nvarchar(100) NOT NULL;
2023-02-11 15:08:06.3865|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'ef797c8118f02dfb649607dd5d3f8c7623048c9c063d532cc95c5ed7a898a64f'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 15:08:06.3865|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230210221808_AccountInfoDBModifyAttributes', N'7.0.2');
2023-02-11 15:08:06.3865|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230210222506_AccountInfoDBModifyAttributesForLogin'.
2023-02-11 15:08:06.4133|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230210222506_AccountInfoDBModifyAttributesForLogin', N'7.0.2');
2023-02-11 15:08:06.8281|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\z004pj3h\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-02-11 15:08:08.3966|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:57658/ - -
2023-02-11 15:08:08.6617|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:57658/ - - - 404 0 - 260.5924ms
2023-02-11 15:08:16.3454|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 POST https://localhost:57658/api/login application/json 118
2023-02-11 15:08:16.3454|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.LoginController.Login (Bank.API)'
2023-02-11 15:08:16.4036|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Login", controller = "Login"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(Bank.API.Data.Models.LoginRequest) on controller Bank.API.Controllers.LoginController (Bank.API).
2023-02-11 15:08:17.3416|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [u].[Id], [u].[Admin], [u].[Email], [u].[Name], [u].[Password], [u].[Username]
FROM [Users] AS [u]
2023-02-11 15:08:17.4684|INFO|Bank.API.Controllers.LoginController|User wasn't found!
2023-02-11 15:08:17.4913|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2023-02-11 15:08:17.6145|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.LoginController.Login (Bank.API) in 1191.617ms
2023-02-11 15:08:17.6145|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.LoginController.Login (Bank.API)'
2023-02-11 15:08:17.6435|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 POST https://localhost:57658/api/login application/json 118 - 404 161 application/problem+json;+charset=utf-8 1295.1050ms
2023-02-11 15:12:59.7487|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 POST https://localhost:57658/api/login application/json 118
2023-02-11 15:12:59.7528|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.LoginController.Login (Bank.API)'
2023-02-11 15:12:59.7528|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Login", controller = "Login"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(Bank.API.Data.Models.LoginRequest) on controller Bank.API.Controllers.LoginController (Bank.API).
2023-02-11 15:12:59.8421|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [u].[Id], [u].[Admin], [u].[Email], [u].[Name], [u].[Password], [u].[Username]
FROM [Users] AS [u]
2023-02-11 15:12:59.8450|INFO|Bank.API.Controllers.LoginController|User wasn't found!
2023-02-11 15:12:59.8450|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2023-02-11 15:12:59.8450|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.LoginController.Login (Bank.API) in 93.0185ms
2023-02-11 15:12:59.8450|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.LoginController.Login (Bank.API)'
2023-02-11 15:12:59.8604|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 POST https://localhost:57658/api/login application/json 118 - 404 161 application/problem+json;+charset=utf-8 109.3023ms
2023-02-11 15:15:05.9989|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:57658/api/login - -
2023-02-11 15:15:06.0190|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2023-02-11 15:15:06.0190|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:57658/api/login - - - 204 - - 26.6712ms
2023-02-11 15:15:06.0190|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:57658/api/login application/json;+charset=UTF-8 97
2023-02-11 15:15:06.0334|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2023-02-11 15:15:06.0334|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.LoginController.Login (Bank.API)'
2023-02-11 15:15:06.0334|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Login", controller = "Login"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(Bank.API.Data.Models.LoginRequest) on controller Bank.API.Controllers.LoginController (Bank.API).
2023-02-11 15:15:06.0734|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2023-02-11 15:15:06.1265|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.LoginController.Login (Bank.API) in 81.6139ms
2023-02-11 15:15:06.1265|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.LoginController.Login (Bank.API)'
2023-02-11 15:15:06.1489|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:57658/api/login application/json;+charset=UTF-8 97 - 400 454 application/problem+json;+charset=utf-8 106.2522ms
2023-02-11 15:17:57.7251|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:57658/api/login - -
2023-02-11 15:17:57.7251|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2023-02-11 15:17:57.7370|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:57658/api/login - - - 204 - - 7.6828ms
2023-02-11 15:17:57.7370|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:57658/api/login application/json;+charset=UTF-8 97
2023-02-11 15:17:57.7370|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2023-02-11 15:17:57.7370|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.LoginController.Login (Bank.API)'
2023-02-11 15:17:57.7370|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Login", controller = "Login"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(Bank.API.Data.Models.LoginRequest) on controller Bank.API.Controllers.LoginController (Bank.API).
2023-02-11 15:17:57.7506|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2023-02-11 15:17:57.7506|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.LoginController.Login (Bank.API) in 4.1927ms
2023-02-11 15:17:57.7506|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.LoginController.Login (Bank.API)'
2023-02-11 15:17:57.7643|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:57658/api/login application/json;+charset=UTF-8 97 - 400 454 application/problem+json;+charset=utf-8 23.2761ms
2023-02-11 15:18:42.8661|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:57658/api/login - -
2023-02-11 15:18:42.8661|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2023-02-11 15:18:42.8863|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:57658/api/login - - - 204 - - 12.8133ms
2023-02-11 15:18:42.8863|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:57658/api/login application/json;+charset=UTF-8 97
2023-02-11 15:18:42.8963|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2023-02-11 15:18:42.8963|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.LoginController.Login (Bank.API)'
2023-02-11 15:18:42.9050|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Login", controller = "Login"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(Bank.API.Data.Models.LoginRequest) on controller Bank.API.Controllers.LoginController (Bank.API).
2023-02-11 15:18:42.9050|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2023-02-11 15:18:42.9050|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.LoginController.Login (Bank.API) in 4.6455ms
2023-02-11 15:18:42.9050|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.LoginController.Login (Bank.API)'
2023-02-11 15:18:42.9235|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:57658/api/login application/json;+charset=UTF-8 97 - 400 454 application/problem+json;+charset=utf-8 35.4359ms
2023-02-11 15:19:13.9444|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:57658/api/login - -
2023-02-11 15:19:13.9444|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2023-02-11 15:19:13.9570|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:57658/api/login - - - 204 - - 6.2465ms
2023-02-11 15:19:13.9570|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:57658/api/login application/json;+charset=UTF-8 97
2023-02-11 15:19:13.9673|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2023-02-11 15:19:13.9673|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.LoginController.Login (Bank.API)'
2023-02-11 15:19:13.9673|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Login", controller = "Login"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(Bank.API.Data.Models.LoginRequest) on controller Bank.API.Controllers.LoginController (Bank.API).
2023-02-11 15:19:13.9673|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2023-02-11 15:19:13.9673|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.LoginController.Login (Bank.API) in 4.2657ms
2023-02-11 15:19:13.9673|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.LoginController.Login (Bank.API)'
2023-02-11 15:19:13.9857|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:57658/api/login application/json;+charset=UTF-8 97 - 400 454 application/problem+json;+charset=utf-8 20.3828ms
2023-02-11 15:20:20.4802|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:57658/api/login - -
2023-02-11 15:20:20.4848|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2023-02-11 15:20:20.4995|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:57658/api/login - - - 204 - - 15.2238ms
2023-02-11 15:20:20.4995|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:57658/api/login application/json;+charset=UTF-8 110
2023-02-11 15:20:20.4995|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2023-02-11 15:20:20.4995|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.LoginController.Login (Bank.API)'
2023-02-11 15:20:20.5137|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Login", controller = "Login"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(Bank.API.Data.Models.LoginRequest) on controller Bank.API.Controllers.LoginController (Bank.API).
2023-02-11 15:20:20.5137|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2023-02-11 15:20:20.5137|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.LoginController.Login (Bank.API) in 6.6334ms
2023-02-11 15:20:20.5137|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.LoginController.Login (Bank.API)'
2023-02-11 15:20:20.5299|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:57658/api/login application/json;+charset=UTF-8 110 - 400 296 application/problem+json;+charset=utf-8 22.1259ms
2023-02-11 15:22:20.2782|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:57658/api/login - -
2023-02-11 15:22:20.2879|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2023-02-11 15:22:20.2963|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:57658/api/login - - - 204 - - 16.1823ms
2023-02-11 15:22:20.3143|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:57658/api/login application/json;+charset=UTF-8 102
2023-02-11 15:22:20.3143|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2023-02-11 15:22:20.3143|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.LoginController.Login (Bank.API)'
2023-02-11 15:22:20.3271|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Login", controller = "Login"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(Bank.API.Data.Models.LoginRequest) on controller Bank.API.Controllers.LoginController (Bank.API).
2023-02-11 15:22:21.8370|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [u].[Id], [u].[Admin], [u].[Email], [u].[Name], [u].[Password], [u].[Username]
FROM [Users] AS [u]
2023-02-11 15:22:21.8400|INFO|Bank.API.Controllers.LoginController|User wasn't found!
2023-02-11 15:22:21.8400|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2023-02-11 15:22:21.8460|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.LoginController.Login (Bank.API) in 1515.5347ms
2023-02-11 15:22:21.8460|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.LoginController.Login (Bank.API)'
2023-02-11 15:22:21.8460|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:57658/api/login application/json;+charset=UTF-8 102 - 404 161 application/problem+json;+charset=utf-8 1543.5544ms
2023-02-11 15:30:47.4378|INFO|Bank.API.Program|Initializing application...
2023-02-11 15:30:55.2710|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (48ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-02-11 15:30:55.5329|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (77ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2023-02-11 15:30:55.5902|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (53ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [AccountInfoDB];
2023-02-11 15:30:56.0168|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (309ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [AccountInfoDB];
2023-02-11 15:30:56.0880|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (69ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2023-02-11 15:30:56.0970|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-02-11 15:30:56.2557|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2023-02-11 15:30:56.2557|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-02-11 15:30:56.3028|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (32ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-02-11 15:30:56.3161|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-02-11 15:30:56.3524|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230112122455_AccountInfoDBInitialMigration'.
2023-02-11 15:30:56.5183|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Accounts] (
    [Id] int NOT NULL IDENTITY,
    [Owner] nvarchar(50) NOT NULL,
    [Sum] real NOT NULL,
    CONSTRAINT [PK_Accounts] PRIMARY KEY ([Id])
);
2023-02-11 15:30:56.5183|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Deposits] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [Period] int NOT NULL,
    [DepositSum] real NOT NULL,
    [AccountId] int NOT NULL,
    CONSTRAINT [PK_Deposits] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Deposits_Accounts_AccountId] FOREIGN KEY ([AccountId]) REFERENCES [Accounts] ([Id]) ON DELETE CASCADE
);
2023-02-11 15:30:56.5698|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (42ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] ON;
INSERT INTO [Accounts] ([Id], [Owner], [Sum])
VALUES (1, N'Gabor Andreea', CAST(2500 AS real)),
(2, N'Pavel Carmen', CAST(3200 AS real)),
(3, N'Wolf Lorena', CAST(2800 AS real));
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] OFF;
2023-02-11 15:30:56.5858|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (13ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] ON;
INSERT INTO [Deposits] ([Id], [AccountId], [DepositSum], [Name], [Period])
VALUES (1, 1, CAST(2000 AS real), N'Savings Deposit', 1),
(2, 1, CAST(500 AS real), N'Fixed Deposit', 12),
(3, 2, CAST(2200 AS real), N'Fixed Deposit', 6),
(4, 2, CAST(1000 AS real), N'Recurring Deposit', 1),
(5, 3, CAST(1200 AS real), N'Savings Deposit', 12),
(6, 3, CAST(1600 AS real), N'Current Deposit', 6);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] OFF;
2023-02-11 15:30:56.5858|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Deposits_AccountId] ON [Deposits] ([AccountId]);
2023-02-11 15:30:56.5969|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230112122455_AccountInfoDBInitialMigration', N'7.0.2');
2023-02-11 15:30:56.6295|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206140911_AccountInfoDBAddUsers'.
2023-02-11 15:30:56.6768|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD [UserId] int NULL;
2023-02-11 15:30:56.6768|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [Email] nvarchar(max) NOT NULL,
    [Username] nvarchar(50) NOT NULL,
    [Password] nvarchar(50) NOT NULL,
    [Admin] bit NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id])
);
2023-02-11 15:30:56.6845|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = NULL
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 15:30:56.6845|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = NULL
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 15:30:56.6845|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = NULL
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 15:30:56.6845|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Admin', N'Email', N'Name', N'Password', N'Username') AND [object_id] = OBJECT_ID(N'[Users]'))
    SET IDENTITY_INSERT [Users] ON;
INSERT INTO [Users] ([Id], [Admin], [Email], [Name], [Password], [Username])
VALUES (1, CAST(0 AS bit), N'ioanagabor@gmail.com', N'Ioana Gabor', N'1234', N'ioanagabor'),
(2, CAST(0 AS bit), N'carmen2411@gmail.com', N'Pavel Carmen', N'1234', N'pavelcarme'),
(3, CAST(1 AS bit), N'andreeagabor@gmail.com', N'Deea Gabor', N'1234', N'deeagabor');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Admin', N'Email', N'Name', N'Password', N'Username') AND [object_id] = OBJECT_ID(N'[Users]'))
    SET IDENTITY_INSERT [Users] OFF;
2023-02-11 15:30:56.6845|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Accounts_UserId] ON [Accounts] ([UserId]);
2023-02-11 15:30:56.7132|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD CONSTRAINT [FK_Accounts_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]);
2023-02-11 15:30:56.7132|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206140911_AccountInfoDBAddUsers', N'7.0.2');
2023-02-11 15:30:56.7132|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206151030_AccountInfoDBAddUserIdForAccounts'.
2023-02-11 15:30:56.7636|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] DROP CONSTRAINT [FK_Accounts_Users_UserId];
2023-02-11 15:30:56.8882|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (122ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DROP INDEX [IX_Accounts_UserId] ON [Accounts];
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Accounts]') AND [c].[name] = N'UserId');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [Accounts] DROP CONSTRAINT [' + @var0 + '];');
UPDATE [Accounts] SET [UserId] = 0 WHERE [UserId] IS NULL;
ALTER TABLE [Accounts] ALTER COLUMN [UserId] int NOT NULL;
ALTER TABLE [Accounts] ADD DEFAULT 0 FOR [UserId];
CREATE INDEX [IX_Accounts_UserId] ON [Accounts] ([UserId]);
2023-02-11 15:30:56.8882|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 1
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 15:30:56.8882|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 2
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 15:30:56.8882|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 3
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 15:30:56.8882|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD CONSTRAINT [FK_Accounts_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE;
2023-02-11 15:30:56.8882|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206151030_AccountInfoDBAddUserIdForAccounts', N'7.0.2');
2023-02-11 15:30:56.9102|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206151654_AccountInfoDBEditDatabase'.
2023-02-11 15:30:56.9295|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [Owner] = N'Gabor Ioana'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 15:30:56.9295|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [Owner] = N'Gabor Andreea'
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 15:30:56.9295|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Name] = N'Gabor Ioana'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 15:30:56.9295|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Name] = N'Gabor Andreea'
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 15:30:56.9295|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206151654_AccountInfoDBEditDatabase', N'7.0.2');
2023-02-11 15:30:56.9295|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206232605_AccountInfoDBNewEditDatabase'.
2023-02-11 15:30:56.9662|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Username] = N'pavelcarmen'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 15:30:56.9662|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206232605_AccountInfoDBNewEditDatabase', N'7.0.2');
2023-02-11 15:30:56.9662|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230207153732_AccountInfoDBAddNewAccounts'.
2023-02-11 15:30:57.0149|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [Owner] = N'Pavel Carmen', [Sum] = CAST(200 AS real), [UserId] = 2
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 15:30:57.0486|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (29ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum', N'UserId') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] ON;
INSERT INTO [Accounts] ([Id], [Owner], [Sum], [UserId])
VALUES (4, N'Gabor Ioana', CAST(2800 AS real), 2);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum', N'UserId') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] OFF;
2023-02-11 15:30:57.0695|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (18ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] ON;
INSERT INTO [Deposits] ([Id], [AccountId], [DepositSum], [Name], [Period])
VALUES (7, 4, CAST(100 AS real), N'Recurring Deposit', 6),
(8, 4, CAST(12 AS real), N'Savings Deposit', 12);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] OFF;
2023-02-11 15:30:57.0695|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230207153732_AccountInfoDBAddNewAccounts', N'7.0.2');
2023-02-11 15:30:57.0782|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230207153902_AccountInfoDBAddNewAccounts2'.
2023-02-11 15:30:57.1023|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 1
WHERE [Id] = 4;
SELECT @@ROWCOUNT;
2023-02-11 15:30:57.1023|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230207153902_AccountInfoDBAddNewAccounts2', N'7.0.2');
2023-02-11 15:30:57.1023|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230207174051_AccountInfoDBAddAttributes'.
2023-02-11 15:30:57.1305|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'12345678'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 15:30:57.1305|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'12345678'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 15:30:57.1305|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'12345678'
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 15:30:57.1305|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230207174051_AccountInfoDBAddAttributes', N'7.0.2');
2023-02-11 15:30:57.1305|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230210221808_AccountInfoDBModifyAttributes'.
2023-02-11 15:30:57.1883|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @var1 sysname;
SELECT @var1 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Users]') AND [c].[name] = N'Password');
IF @var1 IS NOT NULL EXEC(N'ALTER TABLE [Users] DROP CONSTRAINT [' + @var1 + '];');
ALTER TABLE [Users] ALTER COLUMN [Password] nvarchar(100) NOT NULL;
2023-02-11 15:30:57.1883|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'ef797c8118f02dfb649607dd5d3f8c7623048c9c063d532cc95c5ed7a898a64f'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 15:30:57.1960|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230210221808_AccountInfoDBModifyAttributes', N'7.0.2');
2023-02-11 15:30:57.1960|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230210222506_AccountInfoDBModifyAttributesForLogin'.
2023-02-11 15:30:57.2273|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230210222506_AccountInfoDBModifyAttributesForLogin', N'7.0.2');
2023-02-11 15:30:57.7727|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\z004pj3h\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-02-11 15:30:59.4889|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:57658/ - -
2023-02-11 15:30:59.7009|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:57658/ - - - 404 0 - 239.3047ms
2023-02-11 15:31:11.6192|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 POST https://localhost:57658/api/login application/json 118
2023-02-11 15:31:11.6267|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.LoginController.Login (Bank.API)'
2023-02-11 15:31:11.6860|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Login", controller = "Login"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(Bank.API.Data.Models.LoginRequest) on controller Bank.API.Controllers.LoginController (Bank.API).
2023-02-11 15:31:12.7380|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [u].[Id], [u].[Admin], [u].[Email], [u].[Name], [u].[Password], [u].[Username]
FROM [Users] AS [u]
2023-02-11 15:31:12.9547|FATAL|Bank.API.Controllers.LoginController|Exception while logging!
2023-02-11 15:31:12.9728|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'System.String'.
2023-02-11 15:31:12.9905|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.LoginController.Login (Bank.API) in 1290.7159ms
2023-02-11 15:31:12.9905|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.LoginController.Login (Bank.API)'
2023-02-11 15:31:13.0176|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 POST https://localhost:57658/api/login application/json 118 - 500 - text/plain;+charset=utf-8 1397.6122ms
2023-02-11 15:31:55.7294|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:57658/api/login - -
2023-02-11 15:31:55.7422|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2023-02-11 15:31:55.7485|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:57658/api/login - - - 204 - - 17.9167ms
2023-02-11 15:31:55.7485|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:57658/api/login application/json;+charset=UTF-8 102
2023-02-11 15:31:55.7485|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2023-02-11 15:31:55.7485|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.LoginController.Login (Bank.API)'
2023-02-11 15:31:55.7485|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Login", controller = "Login"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(Bank.API.Data.Models.LoginRequest) on controller Bank.API.Controllers.LoginController (Bank.API).
2023-02-11 15:31:55.8300|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [u].[Id], [u].[Admin], [u].[Email], [u].[Name], [u].[Password], [u].[Username]
FROM [Users] AS [u]
2023-02-11 15:31:55.9074|FATAL|Bank.API.Controllers.LoginController|Exception while logging!
2023-02-11 15:31:55.9074|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'System.String'.
2023-02-11 15:31:55.9648|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.LoginController.Login (Bank.API) in 144.5651ms
2023-02-11 15:31:55.9761|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.LoginController.Login (Bank.API)'
2023-02-11 15:31:55.9921|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:57658/api/login application/json;+charset=UTF-8 102 - 500 - text/plain;+charset=utf-8 219.9040ms
2023-02-11 15:38:33.3722|INFO|Bank.API.Program|Initializing application...
2023-02-11 15:38:38.5487|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (44ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-02-11 15:38:38.6853|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2023-02-11 15:38:38.7080|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [AccountInfoDB];
2023-02-11 15:38:39.1747|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (343ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [AccountInfoDB];
2023-02-11 15:38:39.2685|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (92ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2023-02-11 15:38:39.3635|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-02-11 15:38:39.5451|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2023-02-11 15:38:39.5451|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-02-11 15:38:39.5947|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (35ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-02-11 15:38:39.6101|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-02-11 15:38:39.6873|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230112122455_AccountInfoDBInitialMigration'.
2023-02-11 15:38:39.9449|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Accounts] (
    [Id] int NOT NULL IDENTITY,
    [Owner] nvarchar(50) NOT NULL,
    [Sum] real NOT NULL,
    CONSTRAINT [PK_Accounts] PRIMARY KEY ([Id])
);
2023-02-11 15:38:39.9539|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Deposits] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [Period] int NOT NULL,
    [DepositSum] real NOT NULL,
    [AccountId] int NOT NULL,
    CONSTRAINT [PK_Deposits] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Deposits_Accounts_AccountId] FOREIGN KEY ([AccountId]) REFERENCES [Accounts] ([Id]) ON DELETE CASCADE
);
2023-02-11 15:38:40.0185|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (62ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] ON;
INSERT INTO [Accounts] ([Id], [Owner], [Sum])
VALUES (1, N'Gabor Andreea', CAST(2500 AS real)),
(2, N'Pavel Carmen', CAST(3200 AS real)),
(3, N'Wolf Lorena', CAST(2800 AS real));
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] OFF;
2023-02-11 15:38:40.0469|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] ON;
INSERT INTO [Deposits] ([Id], [AccountId], [DepositSum], [Name], [Period])
VALUES (1, 1, CAST(2000 AS real), N'Savings Deposit', 1),
(2, 1, CAST(500 AS real), N'Fixed Deposit', 12),
(3, 2, CAST(2200 AS real), N'Fixed Deposit', 6),
(4, 2, CAST(1000 AS real), N'Recurring Deposit', 1),
(5, 3, CAST(1200 AS real), N'Savings Deposit', 12),
(6, 3, CAST(1600 AS real), N'Current Deposit', 6);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] OFF;
2023-02-11 15:38:40.0535|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Deposits_AccountId] ON [Deposits] ([AccountId]);
2023-02-11 15:38:40.0535|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230112122455_AccountInfoDBInitialMigration', N'7.0.2');
2023-02-11 15:38:40.0803|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206140911_AccountInfoDBAddUsers'.
2023-02-11 15:38:40.1828|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD [UserId] int NULL;
2023-02-11 15:38:40.1932|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [Email] nvarchar(max) NOT NULL,
    [Username] nvarchar(50) NOT NULL,
    [Password] nvarchar(50) NOT NULL,
    [Admin] bit NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id])
);
2023-02-11 15:38:40.2306|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = NULL
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 15:38:40.3009|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (50ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = NULL
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 15:38:40.3310|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (28ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = NULL
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 15:38:40.3605|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (27ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Admin', N'Email', N'Name', N'Password', N'Username') AND [object_id] = OBJECT_ID(N'[Users]'))
    SET IDENTITY_INSERT [Users] ON;
INSERT INTO [Users] ([Id], [Admin], [Email], [Name], [Password], [Username])
VALUES (1, CAST(0 AS bit), N'ioanagabor@gmail.com', N'Ioana Gabor', N'1234', N'ioanagabor'),
(2, CAST(0 AS bit), N'carmen2411@gmail.com', N'Pavel Carmen', N'1234', N'pavelcarme'),
(3, CAST(1 AS bit), N'andreeagabor@gmail.com', N'Deea Gabor', N'1234', N'deeagabor');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Admin', N'Email', N'Name', N'Password', N'Username') AND [object_id] = OBJECT_ID(N'[Users]'))
    SET IDENTITY_INSERT [Users] OFF;
2023-02-11 15:38:40.3605|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Accounts_UserId] ON [Accounts] ([UserId]);
2023-02-11 15:38:40.3784|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD CONSTRAINT [FK_Accounts_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]);
2023-02-11 15:38:40.3784|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206140911_AccountInfoDBAddUsers', N'7.0.2');
2023-02-11 15:38:40.3784|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206151030_AccountInfoDBAddUserIdForAccounts'.
2023-02-11 15:38:40.4273|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] DROP CONSTRAINT [FK_Accounts_Users_UserId];
2023-02-11 15:38:40.4854|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (55ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DROP INDEX [IX_Accounts_UserId] ON [Accounts];
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Accounts]') AND [c].[name] = N'UserId');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [Accounts] DROP CONSTRAINT [' + @var0 + '];');
UPDATE [Accounts] SET [UserId] = 0 WHERE [UserId] IS NULL;
ALTER TABLE [Accounts] ALTER COLUMN [UserId] int NOT NULL;
ALTER TABLE [Accounts] ADD DEFAULT 0 FOR [UserId];
CREATE INDEX [IX_Accounts_UserId] ON [Accounts] ([UserId]);
2023-02-11 15:38:40.4854|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 1
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 15:38:40.4854|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 2
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 15:38:40.4854|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 3
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 15:38:40.5042|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD CONSTRAINT [FK_Accounts_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE;
2023-02-11 15:38:40.5042|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206151030_AccountInfoDBAddUserIdForAccounts', N'7.0.2');
2023-02-11 15:38:40.5042|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206151654_AccountInfoDBEditDatabase'.
2023-02-11 15:38:40.5716|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [Owner] = N'Gabor Ioana'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 15:38:40.5935|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (15ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [Owner] = N'Gabor Andreea'
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 15:38:40.6229|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Name] = N'Gabor Ioana'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 15:38:40.6229|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Name] = N'Gabor Andreea'
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 15:38:40.6420|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206151654_AccountInfoDBEditDatabase', N'7.0.2');
2023-02-11 15:38:40.6420|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206232605_AccountInfoDBNewEditDatabase'.
2023-02-11 15:38:40.6694|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Username] = N'pavelcarmen'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 15:38:40.6694|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206232605_AccountInfoDBNewEditDatabase', N'7.0.2');
2023-02-11 15:38:40.6694|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230207153732_AccountInfoDBAddNewAccounts'.
2023-02-11 15:38:40.6993|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [Owner] = N'Pavel Carmen', [Sum] = CAST(200 AS real), [UserId] = 2
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 15:38:40.7183|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (17ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum', N'UserId') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] ON;
INSERT INTO [Accounts] ([Id], [Owner], [Sum], [UserId])
VALUES (4, N'Gabor Ioana', CAST(2800 AS real), 2);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum', N'UserId') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] OFF;
2023-02-11 15:38:40.7386|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (18ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] ON;
INSERT INTO [Deposits] ([Id], [AccountId], [DepositSum], [Name], [Period])
VALUES (7, 4, CAST(100 AS real), N'Recurring Deposit', 6),
(8, 4, CAST(12 AS real), N'Savings Deposit', 12);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] OFF;
2023-02-11 15:38:40.7386|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230207153732_AccountInfoDBAddNewAccounts', N'7.0.2');
2023-02-11 15:38:40.7386|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230207153902_AccountInfoDBAddNewAccounts2'.
2023-02-11 15:38:40.7676|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 1
WHERE [Id] = 4;
SELECT @@ROWCOUNT;
2023-02-11 15:38:40.7676|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230207153902_AccountInfoDBAddNewAccounts2', N'7.0.2');
2023-02-11 15:38:40.7676|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230207174051_AccountInfoDBAddAttributes'.
2023-02-11 15:38:40.8182|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'12345678'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 15:38:40.8182|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'12345678'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 15:38:40.8267|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'12345678'
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 15:38:40.8267|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230207174051_AccountInfoDBAddAttributes', N'7.0.2');
2023-02-11 15:38:40.8267|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230210221808_AccountInfoDBModifyAttributes'.
2023-02-11 15:38:40.9314|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (63ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @var1 sysname;
SELECT @var1 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Users]') AND [c].[name] = N'Password');
IF @var1 IS NOT NULL EXEC(N'ALTER TABLE [Users] DROP CONSTRAINT [' + @var1 + '];');
ALTER TABLE [Users] ALTER COLUMN [Password] nvarchar(100) NOT NULL;
2023-02-11 15:38:40.9314|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'ef797c8118f02dfb649607dd5d3f8c7623048c9c063d532cc95c5ed7a898a64f'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 15:38:40.9434|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230210221808_AccountInfoDBModifyAttributes', N'7.0.2');
2023-02-11 15:38:40.9434|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230210222506_AccountInfoDBModifyAttributesForLogin'.
2023-02-11 15:38:40.9732|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230210222506_AccountInfoDBModifyAttributesForLogin', N'7.0.2');
2023-02-11 15:38:41.6010|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\z004pj3h\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-02-11 15:38:43.6196|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:57658/ - -
2023-02-11 15:38:43.9217|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:57658/ - - - 404 0 - 294.0822ms
2023-02-11 15:39:02.5569|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 POST https://localhost:57658/api/users application/json 135
2023-02-11 15:39:02.5647|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.UsersController.CreateUser (Bank.API)'
2023-02-11 15:39:02.6231|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "CreateUser", controller = "Users"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult CreateUser(Bank.API.Data.Models.UserCreationDTO) on controller Bank.API.Controllers.UsersController (Bank.API).
2023-02-11 15:39:03.7356|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (93ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 4000), @p2='?' (Size = 50), @p3='?' (Size = 100), @p4='?' (Size = 50)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Admin], [Email], [Name], [Password], [Username])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2023-02-11 15:39:03.8213|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing CreatedAtRouteResult, writing value of type 'Bank.API.Data.Models.UserDTO'.
2023-02-11 15:39:03.9719|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.UsersController.CreateUser (Bank.API) in 1323.1803ms
2023-02-11 15:39:04.0083|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.UsersController.CreateUser (Bank.API)'
2023-02-11 15:39:04.0328|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 POST https://localhost:57658/api/users application/json 135 - 201 171 application/json;+charset=utf-8 1473.7025ms
2023-02-11 15:40:21.7023|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:57658/api/login - -
2023-02-11 15:40:21.7220|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2023-02-11 15:40:21.7220|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:57658/api/login - - - 204 - - 23.8679ms
2023-02-11 15:40:21.7379|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:57658/api/login application/json;+charset=UTF-8 97
2023-02-11 15:40:21.7379|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2023-02-11 15:40:21.7379|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.LoginController.Login (Bank.API)'
2023-02-11 15:40:21.7494|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Login", controller = "Login"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(Bank.API.Data.Models.LoginRequest) on controller Bank.API.Controllers.LoginController (Bank.API).
2023-02-11 15:40:22.2098|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [u].[Id], [u].[Admin], [u].[Email], [u].[Name], [u].[Password], [u].[Username]
FROM [Users] AS [u]
2023-02-11 15:40:22.2268|INFO|Bank.API.Controllers.LoginController|User wasn't found!
2023-02-11 15:40:22.2268|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2023-02-11 15:40:22.2639|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.LoginController.Login (Bank.API) in 508.5302ms
2023-02-11 15:40:22.2639|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.LoginController.Login (Bank.API)'
2023-02-11 15:40:22.2639|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:57658/api/login application/json;+charset=UTF-8 97 - 404 161 application/problem+json;+charset=utf-8 531.0410ms
2023-02-11 15:40:38.7915|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 POST https://localhost:57658/api/login application/json 113
2023-02-11 15:40:38.7976|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.LoginController.Login (Bank.API)'
2023-02-11 15:40:38.7976|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Login", controller = "Login"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(Bank.API.Data.Models.LoginRequest) on controller Bank.API.Controllers.LoginController (Bank.API).
2023-02-11 15:40:38.8139|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [u].[Id], [u].[Admin], [u].[Email], [u].[Name], [u].[Password], [u].[Username]
FROM [Users] AS [u]
2023-02-11 15:40:38.8139|INFO|Bank.API.Controllers.LoginController|User wasn't found!
2023-02-11 15:40:38.8139|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2023-02-11 15:40:38.8139|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.LoginController.Login (Bank.API) in 18.1054ms
2023-02-11 15:40:38.8139|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.LoginController.Login (Bank.API)'
2023-02-11 15:40:38.8294|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 POST https://localhost:57658/api/login application/json 113 - 404 161 application/problem+json;+charset=utf-8 37.4102ms
2023-02-11 15:54:22.0353|INFO|Bank.API.Program|Initializing application...
2023-02-11 15:54:31.0105|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (59ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-02-11 15:54:31.1313|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2023-02-11 15:54:31.1682|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (34ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [AccountInfoDB];
2023-02-11 15:54:31.6092|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (354ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [AccountInfoDB];
2023-02-11 15:54:31.7125|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (101ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2023-02-11 15:54:31.7220|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-02-11 15:54:31.9266|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2023-02-11 15:54:31.9309|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-02-11 15:54:31.9716|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (30ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-02-11 15:54:31.9716|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-02-11 15:54:32.0398|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230112122455_AccountInfoDBInitialMigration'.
2023-02-11 15:54:32.1467|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Accounts] (
    [Id] int NOT NULL IDENTITY,
    [Owner] nvarchar(50) NOT NULL,
    [Sum] real NOT NULL,
    CONSTRAINT [PK_Accounts] PRIMARY KEY ([Id])
);
2023-02-11 15:54:32.1467|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Deposits] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [Period] int NOT NULL,
    [DepositSum] real NOT NULL,
    [AccountId] int NOT NULL,
    CONSTRAINT [PK_Deposits] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Deposits_Accounts_AccountId] FOREIGN KEY ([AccountId]) REFERENCES [Accounts] ([Id]) ON DELETE CASCADE
);
2023-02-11 15:54:32.1970|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (41ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] ON;
INSERT INTO [Accounts] ([Id], [Owner], [Sum])
VALUES (1, N'Gabor Andreea', CAST(2500 AS real)),
(2, N'Pavel Carmen', CAST(3200 AS real)),
(3, N'Wolf Lorena', CAST(2800 AS real));
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] OFF;
2023-02-11 15:54:32.2241|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] ON;
INSERT INTO [Deposits] ([Id], [AccountId], [DepositSum], [Name], [Period])
VALUES (1, 1, CAST(2000 AS real), N'Savings Deposit', 1),
(2, 1, CAST(500 AS real), N'Fixed Deposit', 12),
(3, 2, CAST(2200 AS real), N'Fixed Deposit', 6),
(4, 2, CAST(1000 AS real), N'Recurring Deposit', 1),
(5, 3, CAST(1200 AS real), N'Savings Deposit', 12),
(6, 3, CAST(1600 AS real), N'Current Deposit', 6);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] OFF;
2023-02-11 15:54:32.2241|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Deposits_AccountId] ON [Deposits] ([AccountId]);
2023-02-11 15:54:32.2360|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230112122455_AccountInfoDBInitialMigration', N'7.0.2');
2023-02-11 15:54:32.2562|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206140911_AccountInfoDBAddUsers'.
2023-02-11 15:54:32.2995|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD [UserId] int NULL;
2023-02-11 15:54:32.2995|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [Email] nvarchar(max) NOT NULL,
    [Username] nvarchar(50) NOT NULL,
    [Password] nvarchar(50) NOT NULL,
    [Admin] bit NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id])
);
2023-02-11 15:54:32.3082|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = NULL
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 15:54:32.3082|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = NULL
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 15:54:32.3082|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = NULL
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 15:54:32.3278|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (12ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Admin', N'Email', N'Name', N'Password', N'Username') AND [object_id] = OBJECT_ID(N'[Users]'))
    SET IDENTITY_INSERT [Users] ON;
INSERT INTO [Users] ([Id], [Admin], [Email], [Name], [Password], [Username])
VALUES (1, CAST(0 AS bit), N'ioanagabor@gmail.com', N'Ioana Gabor', N'1234', N'ioanagabor'),
(2, CAST(0 AS bit), N'carmen2411@gmail.com', N'Pavel Carmen', N'1234', N'pavelcarme'),
(3, CAST(1 AS bit), N'andreeagabor@gmail.com', N'Deea Gabor', N'1234', N'deeagabor');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Admin', N'Email', N'Name', N'Password', N'Username') AND [object_id] = OBJECT_ID(N'[Users]'))
    SET IDENTITY_INSERT [Users] OFF;
2023-02-11 15:54:32.3278|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Accounts_UserId] ON [Accounts] ([UserId]);
2023-02-11 15:54:32.3384|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD CONSTRAINT [FK_Accounts_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]);
2023-02-11 15:54:32.3384|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206140911_AccountInfoDBAddUsers', N'7.0.2');
2023-02-11 15:54:32.3384|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206151030_AccountInfoDBAddUserIdForAccounts'.
2023-02-11 15:54:32.3913|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] DROP CONSTRAINT [FK_Accounts_Users_UserId];
2023-02-11 15:54:32.5084|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (114ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DROP INDEX [IX_Accounts_UserId] ON [Accounts];
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Accounts]') AND [c].[name] = N'UserId');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [Accounts] DROP CONSTRAINT [' + @var0 + '];');
UPDATE [Accounts] SET [UserId] = 0 WHERE [UserId] IS NULL;
ALTER TABLE [Accounts] ALTER COLUMN [UserId] int NOT NULL;
ALTER TABLE [Accounts] ADD DEFAULT 0 FOR [UserId];
CREATE INDEX [IX_Accounts_UserId] ON [Accounts] ([UserId]);
2023-02-11 15:54:32.5084|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 1
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 15:54:32.5084|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 2
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 15:54:32.5084|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 3
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 15:54:32.5255|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD CONSTRAINT [FK_Accounts_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE;
2023-02-11 15:54:32.5255|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206151030_AccountInfoDBAddUserIdForAccounts', N'7.0.2');
2023-02-11 15:54:32.5255|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206151654_AccountInfoDBEditDatabase'.
2023-02-11 15:54:32.5523|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [Owner] = N'Gabor Ioana'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 15:54:32.5523|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [Owner] = N'Gabor Andreea'
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 15:54:32.5609|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Name] = N'Gabor Ioana'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 15:54:32.5609|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Name] = N'Gabor Andreea'
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 15:54:32.5609|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206151654_AccountInfoDBEditDatabase', N'7.0.2');
2023-02-11 15:54:32.5609|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206232605_AccountInfoDBNewEditDatabase'.
2023-02-11 15:54:32.5932|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Username] = N'pavelcarmen'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 15:54:32.5932|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206232605_AccountInfoDBNewEditDatabase', N'7.0.2');
2023-02-11 15:54:32.5932|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230207153732_AccountInfoDBAddNewAccounts'.
2023-02-11 15:54:32.6425|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (13ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [Owner] = N'Pavel Carmen', [Sum] = CAST(200 AS real), [UserId] = 2
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 15:54:32.6646|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum', N'UserId') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] ON;
INSERT INTO [Accounts] ([Id], [Owner], [Sum], [UserId])
VALUES (4, N'Gabor Ioana', CAST(2800 AS real), 2);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum', N'UserId') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] OFF;
2023-02-11 15:54:32.6882|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] ON;
INSERT INTO [Deposits] ([Id], [AccountId], [DepositSum], [Name], [Period])
VALUES (7, 4, CAST(100 AS real), N'Recurring Deposit', 6),
(8, 4, CAST(12 AS real), N'Savings Deposit', 12);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] OFF;
2023-02-11 15:54:32.6916|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230207153732_AccountInfoDBAddNewAccounts', N'7.0.2');
2023-02-11 15:54:32.6916|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230207153902_AccountInfoDBAddNewAccounts2'.
2023-02-11 15:54:32.7133|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 1
WHERE [Id] = 4;
SELECT @@ROWCOUNT;
2023-02-11 15:54:32.7133|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230207153902_AccountInfoDBAddNewAccounts2', N'7.0.2');
2023-02-11 15:54:32.7133|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230207174051_AccountInfoDBAddAttributes'.
2023-02-11 15:54:32.7402|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'12345678'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 15:54:32.7402|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'12345678'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 15:54:32.7402|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'12345678'
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 15:54:32.7402|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230207174051_AccountInfoDBAddAttributes', N'7.0.2');
2023-02-11 15:54:32.7402|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230210221808_AccountInfoDBModifyAttributes'.
2023-02-11 15:54:32.7965|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @var1 sysname;
SELECT @var1 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Users]') AND [c].[name] = N'Password');
IF @var1 IS NOT NULL EXEC(N'ALTER TABLE [Users] DROP CONSTRAINT [' + @var1 + '];');
ALTER TABLE [Users] ALTER COLUMN [Password] nvarchar(100) NOT NULL;
2023-02-11 15:54:32.7965|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'ef797c8118f02dfb649607dd5d3f8c7623048c9c063d532cc95c5ed7a898a64f'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 15:54:32.8047|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230210221808_AccountInfoDBModifyAttributes', N'7.0.2');
2023-02-11 15:54:32.8047|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230210222506_AccountInfoDBModifyAttributesForLogin'.
2023-02-11 15:54:32.8291|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230210222506_AccountInfoDBModifyAttributesForLogin', N'7.0.2');
2023-02-11 15:54:33.2082|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\z004pj3h\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-02-11 15:54:34.7721|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:57658/ - -
2023-02-11 15:54:34.9624|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:57658/ - - - 404 0 - 187.6508ms
2023-02-11 15:54:45.7903|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 POST https://localhost:57658/api/users application/json 135
2023-02-11 15:54:45.7983|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.UsersController.CreateUser (Bank.API)'
2023-02-11 15:54:45.8424|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "CreateUser", controller = "Users"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult CreateUser(Bank.API.Data.Models.UserCreationDTO) on controller Bank.API.Controllers.UsersController (Bank.API).
2023-02-11 15:54:46.7518|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (87ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 4000), @p2='?' (Size = 50), @p3='?' (Size = 100), @p4='?' (Size = 50)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Admin], [Email], [Name], [Password], [Username])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2023-02-11 15:54:46.8445|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing CreatedAtRouteResult, writing value of type 'Bank.API.Data.Models.UserDTO'.
2023-02-11 15:54:46.9839|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.UsersController.CreateUser (Bank.API) in 1121.4426ms
2023-02-11 15:54:46.9955|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.UsersController.CreateUser (Bank.API)'
2023-02-11 15:54:47.0198|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 POST https://localhost:57658/api/users application/json 135 - 201 175 application/json;+charset=utf-8 1229.6516ms
2023-02-11 15:55:12.7392|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 POST https://localhost:57658/api/login application/json 113
2023-02-11 15:55:12.7392|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.LoginController.Login (Bank.API)'
2023-02-11 15:55:12.7392|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Login", controller = "Login"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(Bank.API.Data.Models.LoginRequest) on controller Bank.API.Controllers.LoginController (Bank.API).
2023-02-11 15:55:13.2379|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [u].[Id], [u].[Admin], [u].[Email], [u].[Name], [u].[Password], [u].[Username]
FROM [Users] AS [u]
2023-02-11 15:55:13.2379|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing OkObjectResult, writing value of type 'System.Int32'.
2023-02-11 15:55:13.2379|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.LoginController.Login (Bank.API) in 498.0065ms
2023-02-11 15:55:13.2554|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.LoginController.Login (Bank.API)'
2023-02-11 15:55:13.2554|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 POST https://localhost:57658/api/login application/json 113 - 200 1 application/json;+charset=utf-8 519.1511ms
2023-02-11 15:55:50.9189|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:57658/api/login - -
2023-02-11 15:55:50.9310|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2023-02-11 15:55:50.9310|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:57658/api/login - - - 204 - - 20.1653ms
2023-02-11 15:55:50.9405|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:57658/api/login application/json;+charset=UTF-8 102
2023-02-11 15:55:50.9405|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2023-02-11 15:55:50.9405|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.LoginController.Login (Bank.API)'
2023-02-11 15:55:50.9565|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Login", controller = "Login"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(Bank.API.Data.Models.LoginRequest) on controller Bank.API.Controllers.LoginController (Bank.API).
2023-02-11 15:55:50.9775|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [u].[Id], [u].[Admin], [u].[Email], [u].[Name], [u].[Password], [u].[Username]
FROM [Users] AS [u]
2023-02-11 15:55:50.9921|INFO|Bank.API.Controllers.LoginController|User wasn't found!
2023-02-11 15:55:50.9921|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2023-02-11 15:55:51.0302|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.LoginController.Login (Bank.API) in 68.6904ms
2023-02-11 15:55:51.0573|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.LoginController.Login (Bank.API)'
2023-02-11 15:55:51.0693|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:57658/api/login application/json;+charset=UTF-8 102 - 404 161 application/problem+json;+charset=utf-8 118.9578ms
2023-02-11 15:57:39.4519|INFO|Bank.API.Program|Initializing application...
2023-02-11 15:57:46.0704|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (45ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-02-11 15:57:46.2148|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2023-02-11 15:57:46.2347|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (18ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [AccountInfoDB];
2023-02-11 15:57:46.6220|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (285ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [AccountInfoDB];
2023-02-11 15:57:46.7249|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (101ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2023-02-11 15:57:46.7451|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-02-11 15:57:46.9486|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2023-02-11 15:57:46.9486|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-02-11 15:57:47.0054|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (41ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-02-11 15:57:47.1025|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (63ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-02-11 15:57:47.1946|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230112122455_AccountInfoDBInitialMigration'.
2023-02-11 15:57:47.3914|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Accounts] (
    [Id] int NOT NULL IDENTITY,
    [Owner] nvarchar(50) NOT NULL,
    [Sum] real NOT NULL,
    CONSTRAINT [PK_Accounts] PRIMARY KEY ([Id])
);
2023-02-11 15:57:47.3984|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Deposits] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [Period] int NOT NULL,
    [DepositSum] real NOT NULL,
    [AccountId] int NOT NULL,
    CONSTRAINT [PK_Deposits] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Deposits_Accounts_AccountId] FOREIGN KEY ([AccountId]) REFERENCES [Accounts] ([Id]) ON DELETE CASCADE
);
2023-02-11 15:57:47.4326|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (31ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] ON;
INSERT INTO [Accounts] ([Id], [Owner], [Sum])
VALUES (1, N'Gabor Andreea', CAST(2500 AS real)),
(2, N'Pavel Carmen', CAST(3200 AS real)),
(3, N'Wolf Lorena', CAST(2800 AS real));
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] OFF;
2023-02-11 15:57:47.4540|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] ON;
INSERT INTO [Deposits] ([Id], [AccountId], [DepositSum], [Name], [Period])
VALUES (1, 1, CAST(2000 AS real), N'Savings Deposit', 1),
(2, 1, CAST(500 AS real), N'Fixed Deposit', 12),
(3, 2, CAST(2200 AS real), N'Fixed Deposit', 6),
(4, 2, CAST(1000 AS real), N'Recurring Deposit', 1),
(5, 3, CAST(1200 AS real), N'Savings Deposit', 12),
(6, 3, CAST(1600 AS real), N'Current Deposit', 6);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] OFF;
2023-02-11 15:57:47.4608|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Deposits_AccountId] ON [Deposits] ([AccountId]);
2023-02-11 15:57:47.4608|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230112122455_AccountInfoDBInitialMigration', N'7.0.2');
2023-02-11 15:57:47.4844|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206140911_AccountInfoDBAddUsers'.
2023-02-11 15:57:47.5613|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD [UserId] int NULL;
2023-02-11 15:57:47.5613|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [Email] nvarchar(max) NOT NULL,
    [Username] nvarchar(50) NOT NULL,
    [Password] nvarchar(50) NOT NULL,
    [Admin] bit NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id])
);
2023-02-11 15:57:47.5722|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = NULL
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 15:57:47.5722|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = NULL
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 15:57:47.5722|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = NULL
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 15:57:47.5963|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (15ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Admin', N'Email', N'Name', N'Password', N'Username') AND [object_id] = OBJECT_ID(N'[Users]'))
    SET IDENTITY_INSERT [Users] ON;
INSERT INTO [Users] ([Id], [Admin], [Email], [Name], [Password], [Username])
VALUES (1, CAST(0 AS bit), N'ioanagabor@gmail.com', N'Ioana Gabor', N'1234', N'ioanagabor'),
(2, CAST(0 AS bit), N'carmen2411@gmail.com', N'Pavel Carmen', N'1234', N'pavelcarme'),
(3, CAST(1 AS bit), N'andreeagabor@gmail.com', N'Deea Gabor', N'1234', N'deeagabor');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Admin', N'Email', N'Name', N'Password', N'Username') AND [object_id] = OBJECT_ID(N'[Users]'))
    SET IDENTITY_INSERT [Users] OFF;
2023-02-11 15:57:47.6014|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Accounts_UserId] ON [Accounts] ([UserId]);
2023-02-11 15:57:47.6014|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD CONSTRAINT [FK_Accounts_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]);
2023-02-11 15:57:47.6014|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206140911_AccountInfoDBAddUsers', N'7.0.2');
2023-02-11 15:57:47.6014|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206151030_AccountInfoDBAddUserIdForAccounts'.
2023-02-11 15:57:47.6677|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] DROP CONSTRAINT [FK_Accounts_Users_UserId];
2023-02-11 15:57:47.7238|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (54ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DROP INDEX [IX_Accounts_UserId] ON [Accounts];
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Accounts]') AND [c].[name] = N'UserId');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [Accounts] DROP CONSTRAINT [' + @var0 + '];');
UPDATE [Accounts] SET [UserId] = 0 WHERE [UserId] IS NULL;
ALTER TABLE [Accounts] ALTER COLUMN [UserId] int NOT NULL;
ALTER TABLE [Accounts] ADD DEFAULT 0 FOR [UserId];
CREATE INDEX [IX_Accounts_UserId] ON [Accounts] ([UserId]);
2023-02-11 15:57:47.7238|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 1
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 15:57:47.7308|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 2
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 15:57:47.7308|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 3
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 15:57:47.7308|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD CONSTRAINT [FK_Accounts_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE;
2023-02-11 15:57:47.7308|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206151030_AccountInfoDBAddUserIdForAccounts', N'7.0.2');
2023-02-11 15:57:47.7308|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206151654_AccountInfoDBEditDatabase'.
2023-02-11 15:57:47.7713|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [Owner] = N'Gabor Ioana'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 15:57:47.7873|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [Owner] = N'Gabor Andreea'
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 15:57:47.7873|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Name] = N'Gabor Ioana'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 15:57:47.7873|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Name] = N'Gabor Andreea'
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 15:57:47.8035|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206151654_AccountInfoDBEditDatabase', N'7.0.2');
2023-02-11 15:57:47.8035|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206232605_AccountInfoDBNewEditDatabase'.
2023-02-11 15:57:47.8354|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Username] = N'pavelcarmen'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 15:57:47.8354|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206232605_AccountInfoDBNewEditDatabase', N'7.0.2');
2023-02-11 15:57:47.8354|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230207153732_AccountInfoDBAddNewAccounts'.
2023-02-11 15:57:47.8844|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [Owner] = N'Pavel Carmen', [Sum] = CAST(200 AS real), [UserId] = 2
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 15:57:47.9252|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum', N'UserId') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] ON;
INSERT INTO [Accounts] ([Id], [Owner], [Sum], [UserId])
VALUES (4, N'Gabor Ioana', CAST(2800 AS real), 2);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum', N'UserId') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] OFF;
2023-02-11 15:57:47.9789|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (27ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] ON;
INSERT INTO [Deposits] ([Id], [AccountId], [DepositSum], [Name], [Period])
VALUES (7, 4, CAST(100 AS real), N'Recurring Deposit', 6),
(8, 4, CAST(12 AS real), N'Savings Deposit', 12);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] OFF;
2023-02-11 15:57:48.0288|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (29ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230207153732_AccountInfoDBAddNewAccounts', N'7.0.2');
2023-02-11 15:57:48.0288|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230207153902_AccountInfoDBAddNewAccounts2'.
2023-02-11 15:57:48.0603|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 1
WHERE [Id] = 4;
SELECT @@ROWCOUNT;
2023-02-11 15:57:48.0603|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230207153902_AccountInfoDBAddNewAccounts2', N'7.0.2');
2023-02-11 15:57:48.0603|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230207174051_AccountInfoDBAddAttributes'.
2023-02-11 15:57:48.0922|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'12345678'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 15:57:48.0922|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'12345678'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 15:57:48.0922|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'12345678'
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 15:57:48.1028|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230207174051_AccountInfoDBAddAttributes', N'7.0.2');
2023-02-11 15:57:48.1028|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230210221808_AccountInfoDBModifyAttributes'.
2023-02-11 15:57:48.1453|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (18ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @var1 sysname;
SELECT @var1 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Users]') AND [c].[name] = N'Password');
IF @var1 IS NOT NULL EXEC(N'ALTER TABLE [Users] DROP CONSTRAINT [' + @var1 + '];');
ALTER TABLE [Users] ALTER COLUMN [Password] nvarchar(100) NOT NULL;
2023-02-11 15:57:48.1497|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'ef797c8118f02dfb649607dd5d3f8c7623048c9c063d532cc95c5ed7a898a64f'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 15:57:48.1497|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230210221808_AccountInfoDBModifyAttributes', N'7.0.2');
2023-02-11 15:57:48.1497|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230210222506_AccountInfoDBModifyAttributesForLogin'.
2023-02-11 15:57:48.1788|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230210222506_AccountInfoDBModifyAttributesForLogin', N'7.0.2');
2023-02-11 15:57:48.4785|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\z004pj3h\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-02-11 15:57:50.0870|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:57658/ - -
2023-02-11 15:57:50.3286|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:57658/ - - - 404 0 - 240.7843ms
2023-02-11 15:58:00.6333|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 POST https://localhost:57658/api/users application/json 135
2023-02-11 15:58:00.6333|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.UsersController.CreateUser (Bank.API)'
2023-02-11 15:58:00.6864|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "CreateUser", controller = "Users"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult CreateUser(Bank.API.Data.Models.UserCreationDTO) on controller Bank.API.Controllers.UsersController (Bank.API).
2023-02-11 15:58:01.8738|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (62ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 4000), @p2='?' (Size = 50), @p3='?' (Size = 100), @p4='?' (Size = 50)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Admin], [Email], [Name], [Password], [Username])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2023-02-11 15:58:01.9721|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing CreatedAtRouteResult, writing value of type 'Bank.API.Data.Models.UserDTO'.
2023-02-11 15:58:02.0954|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.UsersController.CreateUser (Bank.API) in 1394.6253ms
2023-02-11 15:58:02.0954|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.UsersController.CreateUser (Bank.API)'
2023-02-11 15:58:02.1190|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 POST https://localhost:57658/api/users application/json 135 - 201 155 application/json;+charset=utf-8 1485.7048ms
2023-02-11 15:58:43.4140|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 POST https://localhost:57658/api/login application/json 93
2023-02-11 15:58:43.4623|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.LoginController.Login (Bank.API)'
2023-02-11 15:58:43.4623|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Login", controller = "Login"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(Bank.API.Data.Models.LoginRequest) on controller Bank.API.Controllers.LoginController (Bank.API).
2023-02-11 15:58:44.0371|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [u].[Id], [u].[Admin], [u].[Email], [u].[Name], [u].[Password], [u].[Username]
FROM [Users] AS [u]
2023-02-11 15:58:44.0515|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing OkObjectResult, writing value of type 'System.Int32'.
2023-02-11 15:58:44.0542|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.LoginController.Login (Bank.API) in 584.5581ms
2023-02-11 15:58:44.0542|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.LoginController.Login (Bank.API)'
2023-02-11 15:58:44.0542|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 POST https://localhost:57658/api/login application/json 93 - 200 1 application/json;+charset=utf-8 647.4184ms
2023-02-11 15:58:56.2930|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:57658/api/login - -
2023-02-11 15:58:56.3087|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2023-02-11 15:58:56.3087|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:57658/api/login - - - 204 - - 20.4319ms
2023-02-11 15:58:56.3087|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:57658/api/login application/json;+charset=UTF-8 102
2023-02-11 15:58:56.3200|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2023-02-11 15:58:56.3200|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.LoginController.Login (Bank.API)'
2023-02-11 15:58:56.3200|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Login", controller = "Login"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(Bank.API.Data.Models.LoginRequest) on controller Bank.API.Controllers.LoginController (Bank.API).
2023-02-11 15:58:56.3360|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [u].[Id], [u].[Admin], [u].[Email], [u].[Name], [u].[Password], [u].[Username]
FROM [Users] AS [u]
2023-02-11 15:58:56.3502|INFO|Bank.API.Controllers.LoginController|User wasn't found!
2023-02-11 15:58:56.3502|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2023-02-11 15:58:56.3772|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.LoginController.Login (Bank.API) in 46.8585ms
2023-02-11 15:58:56.3772|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.LoginController.Login (Bank.API)'
2023-02-11 15:58:56.3843|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:57658/api/login application/json;+charset=UTF-8 102 - 404 161 application/problem+json;+charset=utf-8 66.0421ms
2023-02-11 16:02:45.6270|INFO|Bank.API.Program|Initializing application...
2023-02-11 16:02:54.1749|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (40ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-02-11 16:02:54.4195|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (91ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2023-02-11 16:02:54.4385|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (17ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [AccountInfoDB];
2023-02-11 16:02:54.9582|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (389ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [AccountInfoDB];
2023-02-11 16:02:55.0460|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (85ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2023-02-11 16:02:55.0555|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-02-11 16:02:55.2392|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2023-02-11 16:02:55.2392|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-02-11 16:02:55.2898|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (35ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-02-11 16:02:55.2898|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-02-11 16:02:55.3604|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230112122455_AccountInfoDBInitialMigration'.
2023-02-11 16:02:55.5102|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Accounts] (
    [Id] int NOT NULL IDENTITY,
    [Owner] nvarchar(50) NOT NULL,
    [Sum] real NOT NULL,
    CONSTRAINT [PK_Accounts] PRIMARY KEY ([Id])
);
2023-02-11 16:02:55.5102|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Deposits] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [Period] int NOT NULL,
    [DepositSum] real NOT NULL,
    [AccountId] int NOT NULL,
    CONSTRAINT [PK_Deposits] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Deposits_Accounts_AccountId] FOREIGN KEY ([AccountId]) REFERENCES [Accounts] ([Id]) ON DELETE CASCADE
);
2023-02-11 16:02:55.5737|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (55ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] ON;
INSERT INTO [Accounts] ([Id], [Owner], [Sum])
VALUES (1, N'Gabor Andreea', CAST(2500 AS real)),
(2, N'Pavel Carmen', CAST(3200 AS real)),
(3, N'Wolf Lorena', CAST(2800 AS real));
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] OFF;
2023-02-11 16:02:55.5968|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] ON;
INSERT INTO [Deposits] ([Id], [AccountId], [DepositSum], [Name], [Period])
VALUES (1, 1, CAST(2000 AS real), N'Savings Deposit', 1),
(2, 1, CAST(500 AS real), N'Fixed Deposit', 12),
(3, 2, CAST(2200 AS real), N'Fixed Deposit', 6),
(4, 2, CAST(1000 AS real), N'Recurring Deposit', 1),
(5, 3, CAST(1200 AS real), N'Savings Deposit', 12),
(6, 3, CAST(1600 AS real), N'Current Deposit', 6);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] OFF;
2023-02-11 16:02:55.6034|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Deposits_AccountId] ON [Deposits] ([AccountId]);
2023-02-11 16:02:55.6034|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230112122455_AccountInfoDBInitialMigration', N'7.0.2');
2023-02-11 16:02:55.6316|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206140911_AccountInfoDBAddUsers'.
2023-02-11 16:02:55.6854|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD [UserId] int NULL;
2023-02-11 16:02:55.6896|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [Email] nvarchar(max) NOT NULL,
    [Username] nvarchar(50) NOT NULL,
    [Password] nvarchar(50) NOT NULL,
    [Admin] bit NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id])
);
2023-02-11 16:02:55.6896|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = NULL
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 16:02:55.6896|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = NULL
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 16:02:55.6896|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = NULL
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 16:02:55.7153|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (13ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Admin', N'Email', N'Name', N'Password', N'Username') AND [object_id] = OBJECT_ID(N'[Users]'))
    SET IDENTITY_INSERT [Users] ON;
INSERT INTO [Users] ([Id], [Admin], [Email], [Name], [Password], [Username])
VALUES (1, CAST(0 AS bit), N'ioanagabor@gmail.com', N'Ioana Gabor', N'1234', N'ioanagabor'),
(2, CAST(0 AS bit), N'carmen2411@gmail.com', N'Pavel Carmen', N'1234', N'pavelcarme'),
(3, CAST(1 AS bit), N'andreeagabor@gmail.com', N'Deea Gabor', N'1234', N'deeagabor');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Admin', N'Email', N'Name', N'Password', N'Username') AND [object_id] = OBJECT_ID(N'[Users]'))
    SET IDENTITY_INSERT [Users] OFF;
2023-02-11 16:02:55.7153|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Accounts_UserId] ON [Accounts] ([UserId]);
2023-02-11 16:02:55.7259|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD CONSTRAINT [FK_Accounts_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]);
2023-02-11 16:02:55.7259|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206140911_AccountInfoDBAddUsers', N'7.0.2');
2023-02-11 16:02:55.7259|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206151030_AccountInfoDBAddUserIdForAccounts'.
2023-02-11 16:02:55.7912|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] DROP CONSTRAINT [FK_Accounts_Users_UserId];
2023-02-11 16:02:55.8884|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (94ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DROP INDEX [IX_Accounts_UserId] ON [Accounts];
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Accounts]') AND [c].[name] = N'UserId');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [Accounts] DROP CONSTRAINT [' + @var0 + '];');
UPDATE [Accounts] SET [UserId] = 0 WHERE [UserId] IS NULL;
ALTER TABLE [Accounts] ALTER COLUMN [UserId] int NOT NULL;
ALTER TABLE [Accounts] ADD DEFAULT 0 FOR [UserId];
CREATE INDEX [IX_Accounts_UserId] ON [Accounts] ([UserId]);
2023-02-11 16:02:55.8884|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 1
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 16:02:55.8884|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 2
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 16:02:55.8884|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 3
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 16:02:55.9026|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD CONSTRAINT [FK_Accounts_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE;
2023-02-11 16:02:55.9026|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206151030_AccountInfoDBAddUserIdForAccounts', N'7.0.2');
2023-02-11 16:02:55.9026|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206151654_AccountInfoDBEditDatabase'.
2023-02-11 16:02:55.9246|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [Owner] = N'Gabor Ioana'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 16:02:55.9246|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [Owner] = N'Gabor Andreea'
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 16:02:55.9246|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Name] = N'Gabor Ioana'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 16:02:55.9246|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Name] = N'Gabor Andreea'
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 16:02:55.9388|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206151654_AccountInfoDBEditDatabase', N'7.0.2');
2023-02-11 16:02:55.9388|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230206232605_AccountInfoDBNewEditDatabase'.
2023-02-11 16:02:55.9624|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Username] = N'pavelcarmen'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 16:02:55.9656|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230206232605_AccountInfoDBNewEditDatabase', N'7.0.2');
2023-02-11 16:02:55.9656|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230207153732_AccountInfoDBAddNewAccounts'.
2023-02-11 16:02:56.0307|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [Owner] = N'Pavel Carmen', [Sum] = CAST(200 AS real), [UserId] = 2
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 16:02:56.0592|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum', N'UserId') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] ON;
INSERT INTO [Accounts] ([Id], [Owner], [Sum], [UserId])
VALUES (4, N'Gabor Ioana', CAST(2800 AS real), 2);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Owner', N'Sum', N'UserId') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] OFF;
2023-02-11 16:02:56.0819|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] ON;
INSERT INTO [Deposits] ([Id], [AccountId], [DepositSum], [Name], [Period])
VALUES (7, 4, CAST(100 AS real), N'Recurring Deposit', 6),
(8, 4, CAST(12 AS real), N'Savings Deposit', 12);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name', N'Period') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] OFF;
2023-02-11 16:02:56.1033|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230207153732_AccountInfoDBAddNewAccounts', N'7.0.2');
2023-02-11 16:02:56.1120|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230207153902_AccountInfoDBAddNewAccounts2'.
2023-02-11 16:02:56.1377|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Accounts] SET [UserId] = 1
WHERE [Id] = 4;
SELECT @@ROWCOUNT;
2023-02-11 16:02:56.1377|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230207153902_AccountInfoDBAddNewAccounts2', N'7.0.2');
2023-02-11 16:02:56.1377|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230207174051_AccountInfoDBAddAttributes'.
2023-02-11 16:02:56.1717|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'12345678'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 16:02:56.1747|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'12345678'
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-02-11 16:02:56.1747|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'12345678'
WHERE [Id] = 3;
SELECT @@ROWCOUNT;
2023-02-11 16:02:56.1747|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230207174051_AccountInfoDBAddAttributes', N'7.0.2');
2023-02-11 16:02:56.1842|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230210221808_AccountInfoDBModifyAttributes'.
2023-02-11 16:02:56.2456|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (30ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
DECLARE @var1 sysname;
SELECT @var1 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Users]') AND [c].[name] = N'Password');
IF @var1 IS NOT NULL EXEC(N'ALTER TABLE [Users] DROP CONSTRAINT [' + @var1 + '];');
ALTER TABLE [Users] ALTER COLUMN [Password] nvarchar(100) NOT NULL;
2023-02-11 16:02:56.2456|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
UPDATE [Users] SET [Password] = N'ef797c8118f02dfb649607dd5d3f8c7623048c9c063d532cc95c5ed7a898a64f'
WHERE [Id] = 1;
SELECT @@ROWCOUNT;
2023-02-11 16:02:56.2456|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230210221808_AccountInfoDBModifyAttributes', N'7.0.2');
2023-02-11 16:02:56.2622|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230210222506_AccountInfoDBModifyAttributesForLogin'.
2023-02-11 16:02:56.2872|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230210222506_AccountInfoDBModifyAttributesForLogin', N'7.0.2');
2023-02-11 16:02:56.7017|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\z004pj3h\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-02-11 16:02:58.2222|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:57658/ - -
2023-02-11 16:02:58.4176|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:57658/ - - - 404 0 - 200.4092ms
2023-02-11 16:03:04.1257|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 POST https://localhost:57658/api/users application/json 135
2023-02-11 16:03:04.1257|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.UsersController.CreateUser (Bank.API)'
2023-02-11 16:03:04.1903|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "CreateUser", controller = "Users"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult CreateUser(Bank.API.Data.Models.UserCreationDTO) on controller Bank.API.Controllers.UsersController (Bank.API).
2023-02-11 16:03:05.2824|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (127ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 4000), @p2='?' (Size = 50), @p3='?' (Size = 100), @p4='?' (Size = 50)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Admin], [Email], [Name], [Password], [Username])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2023-02-11 16:03:05.3770|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing CreatedAtRouteResult, writing value of type 'Bank.API.Data.Models.UserDTO'.
2023-02-11 16:03:05.6352|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.UsersController.CreateUser (Bank.API) in 1371.315ms
2023-02-11 16:03:05.6352|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.UsersController.CreateUser (Bank.API)'
2023-02-11 16:03:05.6729|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 POST https://localhost:57658/api/users application/json 135 - 201 175 application/json;+charset=utf-8 1543.5644ms
2023-02-11 16:03:37.1946|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 POST https://localhost:57658/api/login application/json 113
2023-02-11 16:03:37.2014|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.LoginController.Login (Bank.API)'
2023-02-11 16:03:37.2014|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Login", controller = "Login"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(Bank.API.Data.Models.LoginRequest) on controller Bank.API.Controllers.LoginController (Bank.API).
2023-02-11 16:03:37.7583|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [u].[Id], [u].[Admin], [u].[Email], [u].[Name], [u].[Password], [u].[Username]
FROM [Users] AS [u]
2023-02-11 16:03:37.7798|INFO|Bank.API.Controllers.LoginController|User wasn't found!
2023-02-11 16:03:37.7798|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2023-02-11 16:03:37.8106|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.LoginController.Login (Bank.API) in 601.4115ms
2023-02-11 16:03:37.8106|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.LoginController.Login (Bank.API)'
2023-02-11 16:03:37.8106|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 POST https://localhost:57658/api/login application/json 113 - 404 161 application/problem+json;+charset=utf-8 673.2671ms
2023-02-11 16:03:58.8006|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 OPTIONS https://localhost:57658/api/login - -
2023-02-11 16:03:58.8192|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2023-02-11 16:03:58.8246|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 OPTIONS https://localhost:57658/api/login - - - 204 - - 26.2404ms
2023-02-11 16:03:58.8246|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 POST https://localhost:57658/api/login application/json;+charset=UTF-8 102
2023-02-11 16:03:58.8246|INFO|Microsoft.AspNetCore.Cors.Infrastructure.CorsService|CORS policy execution successful.
2023-02-11 16:03:58.8246|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.LoginController.Login (Bank.API)'
2023-02-11 16:03:58.8246|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "Login", controller = "Login"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(Bank.API.Data.Models.LoginRequest) on controller Bank.API.Controllers.LoginController (Bank.API).
2023-02-11 16:03:58.8460|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [u].[Id], [u].[Admin], [u].[Email], [u].[Name], [u].[Password], [u].[Username]
FROM [Users] AS [u]
2023-02-11 16:03:58.8460|INFO|Bank.API.Controllers.LoginController|User wasn't found!
2023-02-11 16:03:58.8460|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2023-02-11 16:03:58.8566|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.LoginController.Login (Bank.API) in 16.3186ms
2023-02-11 16:03:58.8566|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.LoginController.Login (Bank.API)'
2023-02-11 16:03:58.8566|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 POST https://localhost:57658/api/login application/json;+charset=UTF-8 102 - 404 161 application/problem+json;+charset=utf-8 34.3118ms
