2023-01-08 22:56:57.9175|INFO|Bank.API.Program|Initializing application...
2023-01-08 22:57:07.0718|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (67ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-08 22:57:07.2185|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2023-01-08 22:57:07.2527|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (30ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [AccountInfoDB];
2023-01-08 22:57:07.6514|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (291ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [AccountInfoDB];
2023-01-08 22:57:07.7637|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (108ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2023-01-08 22:57:07.7729|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-08 22:57:07.9528|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (13ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2023-01-08 22:57:07.9596|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-08 22:57:08.0143|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (40ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-01-08 22:57:08.0347|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-01-08 22:57:08.0977|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230105161435_AccountInfoDBInitialMigration'.
2023-01-08 22:57:08.2410|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Accounts] (
    [Id] int NOT NULL IDENTITY,
    [Owner] nvarchar(50) NOT NULL,
    [Sum] int NOT NULL,
    CONSTRAINT [PK_Accounts] PRIMARY KEY ([Id])
);
2023-01-08 22:57:08.2643|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (18ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Deposits] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [DepositSum] int NOT NULL,
    [AccountId] int NOT NULL,
    CONSTRAINT [PK_Deposits] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Deposits_Accounts_AccountId] FOREIGN KEY ([AccountId]) REFERENCES [Accounts] ([Id]) ON DELETE CASCADE
);
2023-01-08 22:57:08.2867|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (18ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Deposits_AccountId] ON [Deposits] ([AccountId]);
2023-01-08 22:57:08.2867|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230105161435_AccountInfoDBInitialMigration', N'7.0.1');
2023-01-08 22:57:08.3343|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230105162733_AccountInfoDBAddNumberOfDeposits'.
2023-01-08 22:57:08.3704|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD [NumberOfDeposits] int NOT NULL DEFAULT 0;
2023-01-08 22:57:08.3821|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230105162733_AccountInfoDBAddNumberOfDeposits', N'7.0.1');
2023-01-08 22:57:08.3821|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230105175606_SampleData'.
2023-01-08 22:57:08.5236|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (62ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'NumberOfDeposits', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] ON;
INSERT INTO [Accounts] ([Id], [NumberOfDeposits], [Owner], [Sum])
VALUES (1, 0, N'Gabor Andreea', 2500),
(2, 0, N'Pavel Carmen', 3200),
(3, 0, N'Wolf Lorena', 2800);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'NumberOfDeposits', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] OFF;
2023-01-08 22:57:08.5907|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (44ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] ON;
INSERT INTO [Deposits] ([Id], [AccountId], [DepositSum], [Name])
VALUES (1, 1, 2000, N'Savings Deposit'),
(2, 1, 500, N'Fixed Deposit'),
(3, 2, 2200, N'Fixed Deposit'),
(4, 2, 1000, N'Recurring Deposit'),
(5, 3, 1200, N'Savings Deposit'),
(6, 3, 1600, N'Current Deposit');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] OFF;
2023-01-08 22:57:08.6038|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230105175606_SampleData', N'7.0.1');
2023-01-08 22:57:09.0988|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\z004pj3h\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-01-08 22:57:10.8038|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:57658/ - -
2023-01-08 22:57:11.1378|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:57658/ - - - 404 0 - 264.2925ms
2023-01-08 22:58:58.4087|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:57658/api/accounts application/json 97
2023-01-08 22:58:58.4405|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.AccountsController.GetAccounts (Bank.API)'
2023-01-08 22:58:58.4846|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetAccounts", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAccounts() on controller Bank.API.Controllers.AccountsController (Bank.API).
2023-01-08 22:58:59.5732|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[NumberOfDeposits], [a].[Owner], [a].[Sum]
FROM [Accounts] AS [a]
ORDER BY [a].[Owner]
2023-01-08 22:58:59.7134|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Bank.API.Models.AccountWithoutDepositsDTO, Bank.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-01-08 22:58:59.9564|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.AccountsController.GetAccounts (Bank.API) in 1452.8694ms
2023-01-08 22:58:59.9592|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.AccountsController.GetAccounts (Bank.API)'
2023-01-08 22:58:59.9831|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:57658/api/accounts application/json 97 - 200 130 application/json;+charset=utf-8 1574.7026ms
2023-01-08 22:59:36.4078|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 POST https://localhost:57658/api/accounts application/json 61
2023-01-08 22:59:36.4570|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.AccountsController.CreateAccount (Bank.API)'
2023-01-08 22:59:36.4947|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "CreateAccount", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult CreateAccount(Bank.API.Models.AccountCreationDTO) on controller Bank.API.Controllers.AccountsController (Bank.API).
2023-01-08 23:02:26.5540|INFO|Bank.API.Program|Initializing application...
2023-01-08 23:02:33.7737|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (71ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-08 23:02:34.0732|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (79ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2023-01-08 23:02:34.0958|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [AccountInfoDB];
2023-01-08 23:02:34.4799|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (275ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [AccountInfoDB];
2023-01-08 23:02:34.5807|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (96ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2023-01-08 23:02:34.6049|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-08 23:02:34.7846|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2023-01-08 23:02:34.8224|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-08 23:02:34.8937|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (47ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-01-08 23:02:34.9387|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-01-08 23:02:35.0259|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230105161435_AccountInfoDBInitialMigration'.
2023-01-08 23:02:35.1295|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Accounts] (
    [Id] int NOT NULL IDENTITY,
    [Owner] nvarchar(50) NOT NULL,
    [Sum] int NOT NULL,
    CONSTRAINT [PK_Accounts] PRIMARY KEY ([Id])
);
2023-01-08 23:02:35.1295|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Deposits] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [DepositSum] int NOT NULL,
    [AccountId] int NOT NULL,
    CONSTRAINT [PK_Deposits] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Deposits_Accounts_AccountId] FOREIGN KEY ([AccountId]) REFERENCES [Accounts] ([Id]) ON DELETE CASCADE
);
2023-01-08 23:02:35.1295|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Deposits_AccountId] ON [Deposits] ([AccountId]);
2023-01-08 23:02:35.1452|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230105161435_AccountInfoDBInitialMigration', N'7.0.1');
2023-01-08 23:02:35.1710|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230105162733_AccountInfoDBAddNumberOfDeposits'.
2023-01-08 23:02:35.1912|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD [NumberOfDeposits] int NOT NULL DEFAULT 0;
2023-01-08 23:02:35.1943|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230105162733_AccountInfoDBAddNumberOfDeposits', N'7.0.1');
2023-01-08 23:02:35.1943|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230105175606_SampleData'.
2023-01-08 23:02:35.3056|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (39ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'NumberOfDeposits', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] ON;
INSERT INTO [Accounts] ([Id], [NumberOfDeposits], [Owner], [Sum])
VALUES (1, 0, N'Gabor Andreea', 2500),
(2, 0, N'Pavel Carmen', 3200),
(3, 0, N'Wolf Lorena', 2800);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'NumberOfDeposits', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] OFF;
2023-01-08 23:02:35.3299|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] ON;
INSERT INTO [Deposits] ([Id], [AccountId], [DepositSum], [Name])
VALUES (1, 1, 2000, N'Savings Deposit'),
(2, 1, 500, N'Fixed Deposit'),
(3, 2, 2200, N'Fixed Deposit'),
(4, 2, 1000, N'Recurring Deposit'),
(5, 3, 1200, N'Savings Deposit'),
(6, 3, 1600, N'Current Deposit');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] OFF;
2023-01-08 23:02:35.3338|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230105175606_SampleData', N'7.0.1');
2023-01-08 23:02:35.7443|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\z004pj3h\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-01-08 23:02:36.9491|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:57658/ - -
2023-01-08 23:02:37.1888|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:57658/ - - - 404 0 - 182.9191ms
2023-01-08 23:03:07.6929|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 POST https://localhost:57658/api/accounts application/json 61
2023-01-08 23:03:07.6929|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.AccountsController.CreateAccount (Bank.API)'
2023-01-08 23:03:07.7484|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "CreateAccount", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult CreateAccount(Bank.API.Models.AccountCreationDTO) on controller Bank.API.Controllers.AccountsController (Bank.API).
2023-01-08 23:03:08.7129|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (122ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 50), @p2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Accounts] ([NumberOfDeposits], [Owner], [Sum])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
2023-01-08 23:03:08.8223|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing CreatedAtRouteResult, writing value of type 'Bank.API.Models.AccountDTO'.
2023-01-08 23:03:08.9922|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.AccountsController.CreateAccount (Bank.API) in 1217.4869ms
2023-01-08 23:03:08.9922|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.AccountsController.CreateAccount (Bank.API)'
2023-01-08 23:03:09.0350|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 POST https://localhost:57658/api/accounts application/json 61 - 201 69 application/json;+charset=utf-8 1333.7286ms
2023-01-08 23:03:53.2763|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:57658/api/accounts application/json 61
2023-01-08 23:03:53.2858|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.AccountsController.GetAccounts (Bank.API)'
2023-01-08 23:03:53.2858|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetAccounts", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAccounts() on controller Bank.API.Controllers.AccountsController (Bank.API).
2023-01-08 23:03:54.2998|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[NumberOfDeposits], [a].[Owner], [a].[Sum]
FROM [Accounts] AS [a]
ORDER BY [a].[Owner]
2023-01-08 23:03:54.3294|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Bank.API.Models.AccountWithoutDepositsDTO, Bank.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-01-08 23:03:54.3460|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.AccountsController.GetAccounts (Bank.API) in 1033.4333ms
2023-01-08 23:03:54.3496|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.AccountsController.GetAccounts (Bank.API)'
2023-01-08 23:03:54.3496|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:57658/api/accounts application/json 61 - 200 165 application/json;+charset=utf-8 1078.2709ms
2023-01-08 23:46:13.7104|INFO|Bank.API.Program|Initializing application...
2023-01-08 23:46:19.4913|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (30ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-08 23:46:19.5872|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2023-01-08 23:46:19.6162|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (28ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [AccountInfoDB];
2023-01-08 23:46:20.0337|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (357ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [AccountInfoDB];
2023-01-08 23:46:20.1058|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (71ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2023-01-08 23:46:20.1134|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-08 23:46:20.2293|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2023-01-08 23:46:20.2293|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-08 23:46:20.2630|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-01-08 23:46:20.2718|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-01-08 23:46:20.3115|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230105161435_AccountInfoDBInitialMigration'.
2023-01-08 23:46:20.4147|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Accounts] (
    [Id] int NOT NULL IDENTITY,
    [Owner] nvarchar(50) NOT NULL,
    [Sum] int NOT NULL,
    CONSTRAINT [PK_Accounts] PRIMARY KEY ([Id])
);
2023-01-08 23:46:20.4532|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (36ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Deposits] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [DepositSum] int NOT NULL,
    [AccountId] int NOT NULL,
    CONSTRAINT [PK_Deposits] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Deposits_Accounts_AccountId] FOREIGN KEY ([AccountId]) REFERENCES [Accounts] ([Id]) ON DELETE CASCADE
);
2023-01-08 23:46:20.4666|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (13ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Deposits_AccountId] ON [Deposits] ([AccountId]);
2023-01-08 23:46:20.4716|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230105161435_AccountInfoDBInitialMigration', N'7.0.1');
2023-01-08 23:46:20.4716|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230105162733_AccountInfoDBAddNumberOfDeposits'.
2023-01-08 23:46:20.5009|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD [NumberOfDeposits] int NOT NULL DEFAULT 0;
2023-01-08 23:46:20.5022|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230105162733_AccountInfoDBAddNumberOfDeposits', N'7.0.1');
2023-01-08 23:46:20.5022|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230105175606_SampleData'.
2023-01-08 23:46:20.6063|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (49ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'NumberOfDeposits', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] ON;
INSERT INTO [Accounts] ([Id], [NumberOfDeposits], [Owner], [Sum])
VALUES (1, 0, N'Gabor Andreea', 2500),
(2, 0, N'Pavel Carmen', 3200),
(3, 0, N'Wolf Lorena', 2800);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'NumberOfDeposits', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] OFF;
2023-01-08 23:46:20.6264|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] ON;
INSERT INTO [Deposits] ([Id], [AccountId], [DepositSum], [Name])
VALUES (1, 1, 2000, N'Savings Deposit'),
(2, 1, 500, N'Fixed Deposit'),
(3, 2, 2200, N'Fixed Deposit'),
(4, 2, 1000, N'Recurring Deposit'),
(5, 3, 1200, N'Savings Deposit'),
(6, 3, 1600, N'Current Deposit');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] OFF;
2023-01-08 23:46:20.6296|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230105175606_SampleData', N'7.0.1');
2023-01-08 23:46:20.8461|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\z004pj3h\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-01-08 23:46:21.5065|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:57658/ - -
2023-01-08 23:46:21.6512|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:57658/ - - - 404 0 - 147.6988ms
2023-01-08 23:46:39.5482|INFO|Bank.API.Program|Initializing application...
2023-01-08 23:46:45.8522|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (60ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-08 23:46:46.2823|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (127ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2023-01-08 23:46:46.3175|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (32ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [AccountInfoDB];
2023-01-08 23:46:46.8363|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (396ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [AccountInfoDB];
2023-01-08 23:46:46.9908|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (136ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2023-01-08 23:46:47.0030|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-08 23:46:47.3770|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (168ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2023-01-08 23:46:47.3770|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-08 23:46:47.4534|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (39ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-01-08 23:46:47.4731|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-01-08 23:46:47.5249|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230105161435_AccountInfoDBInitialMigration'.
2023-01-08 23:46:47.6624|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (33ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Accounts] (
    [Id] int NOT NULL IDENTITY,
    [Owner] nvarchar(50) NOT NULL,
    [Sum] int NOT NULL,
    CONSTRAINT [PK_Accounts] PRIMARY KEY ([Id])
);
2023-01-08 23:46:47.6907|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Deposits] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [DepositSum] int NOT NULL,
    [AccountId] int NOT NULL,
    CONSTRAINT [PK_Deposits] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Deposits_Accounts_AccountId] FOREIGN KEY ([AccountId]) REFERENCES [Accounts] ([Id]) ON DELETE CASCADE
);
2023-01-08 23:46:47.7091|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (15ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Deposits_AccountId] ON [Deposits] ([AccountId]);
2023-01-08 23:46:47.7673|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (50ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230105161435_AccountInfoDBInitialMigration', N'7.0.1');
2023-01-08 23:46:47.8429|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230105162733_AccountInfoDBAddNumberOfDeposits'.
2023-01-08 23:46:47.9526|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (75ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD [NumberOfDeposits] int NOT NULL DEFAULT 0;
2023-01-08 23:46:47.9706|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230105162733_AccountInfoDBAddNumberOfDeposits', N'7.0.1');
2023-01-08 23:46:47.9706|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230105175606_SampleData'.
2023-01-08 23:46:48.1034|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (44ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'NumberOfDeposits', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] ON;
INSERT INTO [Accounts] ([Id], [NumberOfDeposits], [Owner], [Sum])
VALUES (1, 0, N'Gabor Andreea', 2500),
(2, 0, N'Pavel Carmen', 3200),
(3, 0, N'Wolf Lorena', 2800);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'NumberOfDeposits', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] OFF;
2023-01-08 23:46:48.1578|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] ON;
INSERT INTO [Deposits] ([Id], [AccountId], [DepositSum], [Name])
VALUES (1, 1, 2000, N'Savings Deposit'),
(2, 1, 500, N'Fixed Deposit'),
(3, 2, 2200, N'Fixed Deposit'),
(4, 2, 1000, N'Recurring Deposit'),
(5, 3, 1200, N'Savings Deposit'),
(6, 3, 1600, N'Current Deposit');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] OFF;
2023-01-08 23:46:48.1778|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230105175606_SampleData', N'7.0.1');
2023-01-08 23:46:48.6120|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\z004pj3h\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-01-08 23:46:49.9174|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:57658/ - -
2023-01-08 23:46:50.1541|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:57658/ - - - 404 0 - 187.2912ms
2023-01-08 23:46:56.2888|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:57658/api/accounts application/json 96
2023-01-08 23:46:56.3141|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.AccountsController.GetAccounts (Bank.API)'
2023-01-08 23:46:56.3665|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetAccounts", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAccounts() on controller Bank.API.Controllers.AccountsController (Bank.API).
2023-01-08 23:46:57.8659|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[NumberOfDeposits], [a].[Owner], [a].[Sum]
FROM [Accounts] AS [a]
ORDER BY [a].[Owner]
2023-01-08 23:46:58.0179|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Bank.API.Models.AccountWithoutDepositsDTO, Bank.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-01-08 23:46:58.3340|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.AccountsController.GetAccounts (Bank.API) in 1929.9207ms
2023-01-08 23:46:58.3661|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.AccountsController.GetAccounts (Bank.API)'
2023-01-08 23:46:58.4363|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:57658/api/accounts application/json 96 - 200 130 application/json;+charset=utf-8 2108.9139ms
2023-01-08 23:47:13.2542|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:57658/api/accounts/2 application/json 96
2023-01-08 23:47:13.3143|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.AccountsController.GetAccount (Bank.API)'
2023-01-08 23:47:13.3526|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetAccount", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAccount(Int32, Boolean) on controller Bank.API.Controllers.AccountsController (Bank.API).
2023-01-08 23:47:13.8868|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (215ms) [Parameters=[@__accountId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[NumberOfDeposits], [a].[Owner], [a].[Sum]
FROM [Accounts] AS [a]
WHERE [a].[Id] = @__accountId_0
2023-01-08 23:47:13.9004|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing OkObjectResult, writing value of type 'Bank.API.Models.AccountWithoutDepositsDTO'.
2023-01-08 23:47:13.9141|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.AccountsController.GetAccount (Bank.API) in 548.5955ms
2023-01-08 23:47:13.9524|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.AccountsController.GetAccount (Bank.API)'
2023-01-08 23:47:14.0395|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:57658/api/accounts/2 application/json 96 - 200 42 application/json;+charset=utf-8 837.7576ms
2023-01-08 23:47:19.2499|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 PATCH https://localhost:57658/api/accounts/2 application/json 96
2023-01-08 23:47:19.2709|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.AccountsController.PartialUpdateAccount (Bank.API)'
2023-01-08 23:47:19.3016|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "PartialUpdateAccount", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult PartialUpdateAccount(Int32, Microsoft.AspNetCore.JsonPatch.JsonPatchDocument`1[Bank.API.Models.AccountUpdateDTO]) on controller Bank.API.Controllers.AccountsController (Bank.API).
2023-01-08 23:47:19.6458|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (38ms) [Parameters=[@__accountId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Accounts] AS [a]
        WHERE [a].[Id] = @__accountId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-01-08 23:47:19.6829|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[@__accountId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[NumberOfDeposits], [a].[Owner], [a].[Sum]
FROM [Accounts] AS [a]
WHERE [a].[Id] = @__accountId_0
2023-01-08 23:47:19.9487|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 50)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Accounts] SET [Owner] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2023-01-08 23:47:20.0137|INFO|Microsoft.AspNetCore.Mvc.StatusCodeResult|Executing StatusCodeResult, setting HTTP status code 204
2023-01-08 23:47:20.0324|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.AccountsController.PartialUpdateAccount (Bank.API) in 712.2447ms
2023-01-08 23:47:20.0372|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.AccountsController.PartialUpdateAccount (Bank.API)'
2023-01-08 23:47:20.0530|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 PATCH https://localhost:57658/api/accounts/2 application/json 96 - 204 - - 918.4595ms
2023-01-08 23:47:26.2502|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:57658/api/accounts/2 application/json 96
2023-01-08 23:47:26.2645|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.AccountsController.GetAccount (Bank.API)'
2023-01-08 23:47:26.2683|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetAccount", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAccount(Int32, Boolean) on controller Bank.API.Controllers.AccountsController (Bank.API).
2023-01-08 23:47:26.2683|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__accountId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[NumberOfDeposits], [a].[Owner], [a].[Sum]
FROM [Accounts] AS [a]
WHERE [a].[Id] = @__accountId_0
2023-01-08 23:47:26.2683|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing OkObjectResult, writing value of type 'Bank.API.Models.AccountWithoutDepositsDTO'.
2023-01-08 23:47:26.3004|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.AccountsController.GetAccount (Bank.API) in 13.7495ms
2023-01-08 23:47:26.3004|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.AccountsController.GetAccount (Bank.API)'
2023-01-08 23:47:26.3627|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:57658/api/accounts/2 application/json 96 - 200 34 application/json;+charset=utf-8 70.1195ms
2023-01-08 23:56:43.7146|INFO|Bank.API.Program|Initializing application...
2023-01-08 23:56:52.9992|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (61ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-08 23:56:53.1359|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2023-01-08 23:56:53.1664|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (28ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
DROP DATABASE [AccountInfoDB];
2023-01-08 23:56:53.8037|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (544ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
CREATE DATABASE [AccountInfoDB];
2023-01-08 23:56:53.9081|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (102ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AccountInfoDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2023-01-08 23:56:53.9081|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-08 23:56:54.0933|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2023-01-08 23:56:54.1051|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT 1
2023-01-08 23:56:54.1553|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (36ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-01-08 23:56:54.1691|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-01-08 23:56:54.2102|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230105161435_AccountInfoDBInitialMigration'.
2023-01-08 23:56:54.3057|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Accounts] (
    [Id] int NOT NULL IDENTITY,
    [Owner] nvarchar(50) NOT NULL,
    [Sum] int NOT NULL,
    CONSTRAINT [PK_Accounts] PRIMARY KEY ([Id])
);
2023-01-08 23:56:54.3057|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE TABLE [Deposits] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(50) NOT NULL,
    [DepositSum] int NOT NULL,
    [AccountId] int NOT NULL,
    CONSTRAINT [PK_Deposits] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Deposits_Accounts_AccountId] FOREIGN KEY ([AccountId]) REFERENCES [Accounts] ([Id]) ON DELETE CASCADE
);
2023-01-08 23:56:54.3165|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
CREATE INDEX [IX_Deposits_AccountId] ON [Deposits] ([AccountId]);
2023-01-08 23:56:54.3165|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230105161435_AccountInfoDBInitialMigration', N'7.0.1');
2023-01-08 23:56:54.3517|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230105162733_AccountInfoDBAddNumberOfDeposits'.
2023-01-08 23:56:54.3916|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
ALTER TABLE [Accounts] ADD [NumberOfDeposits] int NOT NULL DEFAULT 0;
2023-01-08 23:56:54.4096|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (15ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230105162733_AccountInfoDBAddNumberOfDeposits', N'7.0.1');
2023-01-08 23:56:54.4096|INFO|Microsoft.EntityFrameworkCore.Migrations|Applying migration '20230105175606_SampleData'.
2023-01-08 23:56:54.5591|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (47ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'NumberOfDeposits', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] ON;
INSERT INTO [Accounts] ([Id], [NumberOfDeposits], [Owner], [Sum])
VALUES (1, 0, N'Gabor Andreea', 2500),
(2, 0, N'Pavel Carmen', 3200),
(3, 0, N'Wolf Lorena', 2800);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'NumberOfDeposits', N'Owner', N'Sum') AND [object_id] = OBJECT_ID(N'[Accounts]'))
    SET IDENTITY_INSERT [Accounts] OFF;
2023-01-08 23:56:54.5822|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] ON;
INSERT INTO [Deposits] ([Id], [AccountId], [DepositSum], [Name])
VALUES (1, 1, 2000, N'Savings Deposit'),
(2, 1, 500, N'Fixed Deposit'),
(3, 2, 2200, N'Fixed Deposit'),
(4, 2, 1000, N'Recurring Deposit'),
(5, 3, 1200, N'Savings Deposit'),
(6, 3, 1600, N'Current Deposit');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountId', N'DepositSum', N'Name') AND [object_id] = OBJECT_ID(N'[Deposits]'))
    SET IDENTITY_INSERT [Deposits] OFF;
2023-01-08 23:56:54.5980|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (13ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230105175606_SampleData', N'7.0.1');
2023-01-08 23:56:54.8279|INFO|Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager|User profile is available. Using 'C:\Users\z004pj3h\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-01-08 23:56:56.1148|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/2 GET https://localhost:57658/ - -
2023-01-08 23:56:56.2797|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/2 GET https://localhost:57658/ - - - 404 0 - 177.7905ms
2023-01-08 23:59:21.2692|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:57658/api/accounts/2 application/json 96
2023-01-08 23:59:21.2871|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.AccountsController.GetAccount (Bank.API)'
2023-01-08 23:59:21.3416|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetAccount", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAccount(Int32, Boolean) on controller Bank.API.Controllers.AccountsController (Bank.API).
2023-01-08 23:59:22.4707|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (65ms) [Parameters=[@__accountId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[NumberOfDeposits], [a].[Owner], [a].[Sum]
FROM [Accounts] AS [a]
WHERE [a].[Id] = @__accountId_0
2023-01-08 23:59:22.6063|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing OkObjectResult, writing value of type 'Bank.API.Models.AccountWithoutDepositsDTO'.
2023-01-08 23:59:22.8115|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.AccountsController.GetAccount (Bank.API) in 1451.1792ms
2023-01-08 23:59:22.8115|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.AccountsController.GetAccount (Bank.API)'
2023-01-08 23:59:22.8375|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:57658/api/accounts/2 application/json 96 - 200 42 application/json;+charset=utf-8 1570.0049ms
2023-01-08 23:59:29.7382|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 DELETE https://localhost:57658/api/accounts/2 application/json 96
2023-01-08 23:59:29.7382|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.AccountsController.DeleteAccount (Bank.API)'
2023-01-08 23:59:29.7382|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "DeleteAccount", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult DeleteAccount(Int32) on controller Bank.API.Controllers.AccountsController (Bank.API).
2023-01-08 23:59:29.8782|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__accountId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Accounts] AS [a]
        WHERE [a].[Id] = @__accountId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-01-08 23:59:29.8910|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (1ms) [Parameters=[@__accountId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[NumberOfDeposits], [a].[Owner], [a].[Sum]
FROM [Accounts] AS [a]
WHERE [a].[Id] = @__accountId_0
2023-01-08 23:59:30.0678|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Accounts]
OUTPUT 1
WHERE [Id] = @p0;
2023-01-08 23:59:30.1139|INFO|Microsoft.AspNetCore.Mvc.StatusCodeResult|Executing StatusCodeResult, setting HTTP status code 204
2023-01-08 23:59:30.1139|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.AccountsController.DeleteAccount (Bank.API) in 365.2865ms
2023-01-08 23:59:30.1139|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.AccountsController.DeleteAccount (Bank.API)'
2023-01-08 23:59:30.1139|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 DELETE https://localhost:57658/api/accounts/2 application/json 96 - 204 - - 384.6931ms
2023-01-08 23:59:35.4205|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request starting HTTP/1.1 GET https://localhost:57658/api/accounts/2 application/json 96
2023-01-08 23:59:35.4231|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executing endpoint 'Bank.API.Controllers.AccountsController.GetAccount (Bank.API)'
2023-01-08 23:59:35.4231|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Route matched with {action = "GetAccount", controller = "Accounts"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAccount(Int32, Boolean) on controller Bank.API.Controllers.AccountsController (Bank.API).
2023-01-08 23:59:35.4231|INFO|Microsoft.EntityFrameworkCore.Database.Command|Executed DbCommand (0ms) [Parameters=[@__accountId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[NumberOfDeposits], [a].[Owner], [a].[Sum]
FROM [Accounts] AS [a]
WHERE [a].[Id] = @__accountId_0
2023-01-08 23:59:35.4395|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor|Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2023-01-08 23:59:35.4659|INFO|Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker|Executed action Bank.API.Controllers.AccountsController.GetAccount (Bank.API) in 36.5814ms
2023-01-08 23:59:35.4721|INFO|Microsoft.AspNetCore.Routing.EndpointMiddleware|Executed endpoint 'Bank.API.Controllers.AccountsController.GetAccount (Bank.API)'
2023-01-08 23:59:35.4721|INFO|Microsoft.AspNetCore.Hosting.Diagnostics|Request finished HTTP/1.1 GET https://localhost:57658/api/accounts/2 application/json 96 - 404 161 application/problem+json;+charset=utf-8 54.0193ms
